/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => {
  // webpackBootstrap
  /******/ "use strict";
  /******/ var __webpack_modules__ = {
    /***/ "./src/LexParser.js":
      /*!**************************!*\
  !*** ./src/LexParser.js ***!
  \**************************/
      /***/ (
        __unused_webpack_module,
        __webpack_exports__,
        __webpack_require__
      ) => {
        eval(
          '__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   scan: () => (/* binding */ scan)\n/* harmony export */ });\nclass XRegExp {\r\n  constructor(source, flag, root = "root") {\r\n    this.table = new Map();\r\n    this.regexp = new RegExp(this.compileRegExp(source, root, 0).source, flag);\r\n  }\r\n\r\n  exec(str) {\r\n    let reg = this.regexp.exec(str);\r\n    for (let i = 0, len = reg.length; i < len; i++) {\r\n      if (reg[i] !== void 0) {\r\n        reg[this.table.get(i - 1)] = reg[i];\r\n        // console.log(this.table.get(i));\r\n      }\r\n    }\r\n    return reg;\r\n  }\r\n\r\n  get lastIndex() {\r\n    return this.regexp.lastIndexst;\r\n  }\r\n\r\n  set lastIndex(value) {\r\n    this.regexp.lastIndex = value;\r\n  }\r\n\r\n  compileRegExp(source, literal, start) {\r\n    if (source[literal] instanceof RegExp)\r\n      return {\r\n        source: source[literal].source,\r\n        length: 0,\r\n      };\r\n\r\n    // 通过 length 计算每一个词法规则可以在 tabel 表中被找到\r\n    let length = 0;\r\n    let regexp = source[literal].replace(/\\<([^>]+)\\>/g, (str, $1) => {\r\n      this.table.set(start + length, $1);\r\n      // this.table.set($1, start + length)\r\n\r\n      ++length;\r\n      let reg = this.compileRegExp(source, $1, start + length);\r\n      length += reg.length;\r\n\r\n      return "(" + reg.source + ")";\r\n    });\r\n\r\n    return {\r\n      source: regexp,\r\n      length: length,\r\n    };\r\n  }\r\n}\r\n\r\n// Keywords 一定在 Identifer 之前，因为 Identifer 可能包含关键字\r\nlet reg = new XRegExp(\r\n  {\r\n    InputElement: "<Whitespace>|<LineTerminator>|<Comments>|<Token>",\r\n    Whitespace: / /,\r\n    LineTerminator: /\\n/,\r\n    Comments: /\\/\\*(?:[^*]|\\*[^\\/])*\\*\\/|\\/\\/[^\\n]*/,\r\n    Token: "<Literal>|<Keywords>|<Identifier>|<Punctuator>",\r\n    Literal: "<NumericLiteral>|<BooleanLiteral>|<StringLiteral>|<NullLiteral>",\r\n    NumericLiteral:\r\n      /0o[0-7]+|0x[0-9a-fA-F]+|0b[01]+|(?:[1-9][0-9]*|0)(?:\\.[0-9]*)?|\\.[0-9]+/,\r\n    StringLiteral: /\\"(?:[^"\\n]|\\\\[\\s\\S])*\\"|\\\'(?:[^\'\\n]|\\\\[\\s\\S])*\\\'/,\r\n    BooleanLiteral: /true|false/,\r\n    NullLiteral: /null/,\r\n    Punctuator:\r\n      /\\|\\||\\&\\&|\\=\\=|\\=\\>|\\+\\+|\\-\\-|\\-|\\+|\\:|\\(|\\=|\\<|\\>|\\]|\\[|\\*|\\)|\\{|\\}|\\?|\\.|;|\\/|\\\'|\\"|\\,/,\r\n    Keywords:\r\n      /let|const|var|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|this|throw|try|typeof|void|while|with|yield/,\r\n    Identifier: /[a-zA-Z_$][a-zA-Z0-9_$]*/,\r\n  },\r\n  "g",\r\n  "InputElement"\r\n);\r\n\r\nfunction* scan(str) {\r\n  reg.regexp.lastIndex = 0;\r\n  while (reg.regexp.lastIndex < str.length) {\r\n    let r = reg.exec(str);\r\n\r\n    if (r.Whitespace) {\r\n    } else if (r.LineTerminator) {\r\n    } else if (r.Comments) {\r\n    } else if (r.NumericLiteral) {\r\n      yield {\r\n        type: "NumericLiteral",\r\n        value: r[0],\r\n      };\r\n    } else if (r.StringLiteral) {\r\n      yield {\r\n        type: "StringLiteral",\r\n        value: r[0],\r\n      };\r\n    } else if (r.BooleanLiteral) {\r\n      yield {\r\n        type: "BooleanLiteral",\r\n        value: r[0],\r\n      };\r\n    } else if (r.NullLiteral) {\r\n      yield {\r\n        type: "NullLiteral",\r\n        value: null,\r\n      };\r\n    } else if (r.Identifier) {\r\n      yield {\r\n        type: "Identifier",\r\n        name: r[0],\r\n      };\r\n    } else if (!r.Keywords) {\r\n      if (r.Punctuator) {\r\n        yield {\r\n          type: r[0],\r\n        };\r\n      } else {\r\n        throw new Error("unexpected token: " + r[0]);\r\n      }\r\n    } else {\r\n      yield {\r\n        type: r[0],\r\n      };\r\n    }\r\n\r\n    // console.log(JSON.stringify(r[0]));\r\n    // document.write(r[0]);\r\n    if (!r[0].length) break;\r\n  }\r\n\r\n  yield {\r\n    type: "EOF",\r\n  };\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvTGV4UGFyc2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0NBQXNDLFNBQVM7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdFQUF3RSxHQUFHLFFBQVE7QUFDbkY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLE1BQU07QUFDTixNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG95c2NyaXB0Ly4vc3JjL0xleFBhcnNlci5qcz9iZDQxIl0sInNvdXJjZXNDb250ZW50IjpbImNsYXNzIFhSZWdFeHAge1xyXG4gIGNvbnN0cnVjdG9yKHNvdXJjZSwgZmxhZywgcm9vdCA9IFwicm9vdFwiKSB7XHJcbiAgICB0aGlzLnRhYmxlID0gbmV3IE1hcCgpO1xyXG4gICAgdGhpcy5yZWdleHAgPSBuZXcgUmVnRXhwKHRoaXMuY29tcGlsZVJlZ0V4cChzb3VyY2UsIHJvb3QsIDApLnNvdXJjZSwgZmxhZyk7XHJcbiAgfVxyXG5cclxuICBleGVjKHN0cikge1xyXG4gICAgbGV0IHJlZyA9IHRoaXMucmVnZXhwLmV4ZWMoc3RyKTtcclxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSByZWcubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgaWYgKHJlZ1tpXSAhPT0gdm9pZCAwKSB7XHJcbiAgICAgICAgcmVnW3RoaXMudGFibGUuZ2V0KGkgLSAxKV0gPSByZWdbaV07XHJcbiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy50YWJsZS5nZXQoaSkpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVnO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGxhc3RJbmRleCgpIHtcclxuICAgIHJldHVybiB0aGlzLnJlZ2V4cC5sYXN0SW5kZXhzdDtcclxuICB9XHJcblxyXG4gIHNldCBsYXN0SW5kZXgodmFsdWUpIHtcclxuICAgIHRoaXMucmVnZXhwLmxhc3RJbmRleCA9IHZhbHVlO1xyXG4gIH1cclxuXHJcbiAgY29tcGlsZVJlZ0V4cChzb3VyY2UsIGxpdGVyYWwsIHN0YXJ0KSB7XHJcbiAgICBpZiAoc291cmNlW2xpdGVyYWxdIGluc3RhbmNlb2YgUmVnRXhwKVxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHNvdXJjZTogc291cmNlW2xpdGVyYWxdLnNvdXJjZSxcclxuICAgICAgICBsZW5ndGg6IDAsXHJcbiAgICAgIH07XHJcblxyXG4gICAgLy8g6YCa6L+HIGxlbmd0aCDorqHnrpfmr4/kuIDkuKror43ms5Xop4TliJnlj6/ku6XlnKggdGFiZWwg6KGo5Lit6KKr5om+5YiwXHJcbiAgICBsZXQgbGVuZ3RoID0gMDtcclxuICAgIGxldCByZWdleHAgPSBzb3VyY2VbbGl0ZXJhbF0ucmVwbGFjZSgvXFw8KFtePl0rKVxcPi9nLCAoc3RyLCAkMSkgPT4ge1xyXG4gICAgICB0aGlzLnRhYmxlLnNldChzdGFydCArIGxlbmd0aCwgJDEpO1xyXG4gICAgICAvLyB0aGlzLnRhYmxlLnNldCgkMSwgc3RhcnQgKyBsZW5ndGgpXHJcblxyXG4gICAgICArK2xlbmd0aDtcclxuICAgICAgbGV0IHJlZyA9IHRoaXMuY29tcGlsZVJlZ0V4cChzb3VyY2UsICQxLCBzdGFydCArIGxlbmd0aCk7XHJcbiAgICAgIGxlbmd0aCArPSByZWcubGVuZ3RoO1xyXG5cclxuICAgICAgcmV0dXJuIFwiKFwiICsgcmVnLnNvdXJjZSArIFwiKVwiO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgc291cmNlOiByZWdleHAsXHJcbiAgICAgIGxlbmd0aDogbGVuZ3RoLFxyXG4gICAgfTtcclxuICB9XHJcbn1cclxuXHJcbi8vIEtleXdvcmRzIOS4gOWumuWcqCBJZGVudGlmZXIg5LmL5YmN77yM5Zug5Li6IElkZW50aWZlciDlj6/og73ljIXlkKvlhbPplK7lrZdcclxubGV0IHJlZyA9IG5ldyBYUmVnRXhwKFxyXG4gIHtcclxuICAgIElucHV0RWxlbWVudDogXCI8V2hpdGVzcGFjZT58PExpbmVUZXJtaW5hdG9yPnw8Q29tbWVudHM+fDxUb2tlbj5cIixcclxuICAgIFdoaXRlc3BhY2U6IC8gLyxcclxuICAgIExpbmVUZXJtaW5hdG9yOiAvXFxuLyxcclxuICAgIENvbW1lbnRzOiAvXFwvXFwqKD86W14qXXxcXCpbXlxcL10pKlxcKlxcL3xcXC9cXC9bXlxcbl0qLyxcclxuICAgIFRva2VuOiBcIjxMaXRlcmFsPnw8S2V5d29yZHM+fDxJZGVudGlmaWVyPnw8UHVuY3R1YXRvcj5cIixcclxuICAgIExpdGVyYWw6IFwiPE51bWVyaWNMaXRlcmFsPnw8Qm9vbGVhbkxpdGVyYWw+fDxTdHJpbmdMaXRlcmFsPnw8TnVsbExpdGVyYWw+XCIsXHJcbiAgICBOdW1lcmljTGl0ZXJhbDpcclxuICAgICAgLzBvWzAtN10rfDB4WzAtOWEtZkEtRl0rfDBiWzAxXSt8KD86WzEtOV1bMC05XSp8MCkoPzpcXC5bMC05XSopP3xcXC5bMC05XSsvLFxyXG4gICAgU3RyaW5nTGl0ZXJhbDogL1xcXCIoPzpbXlwiXFxuXXxcXFxcW1xcc1xcU10pKlxcXCJ8XFwnKD86W14nXFxuXXxcXFxcW1xcc1xcU10pKlxcJy8sXHJcbiAgICBCb29sZWFuTGl0ZXJhbDogL3RydWV8ZmFsc2UvLFxyXG4gICAgTnVsbExpdGVyYWw6IC9udWxsLyxcclxuICAgIFB1bmN0dWF0b3I6XHJcbiAgICAgIC9cXHxcXHx8XFwmXFwmfFxcPVxcPXxcXD1cXD58XFwrXFwrfFxcLVxcLXxcXC18XFwrfFxcOnxcXCh8XFw9fFxcPHxcXD58XFxdfFxcW3xcXCp8XFwpfFxce3xcXH18XFw/fFxcLnw7fFxcL3xcXCd8XFxcInxcXCwvLFxyXG4gICAgS2V5d29yZHM6XHJcbiAgICAgIC9sZXR8Y29uc3R8dmFyfGJyZWFrfGNhc2V8Y2F0Y2h8Y29udGludWV8ZGVmYXVsdHxkZWxldGV8ZG98ZWxzZXxmaW5hbGx5fGZvcnxmdW5jdGlvbnxpZnxpbnxpbnN0YW5jZW9mfG5ld3xyZXR1cm58c3dpdGNofHRoaXN8dGhyb3d8dHJ5fHR5cGVvZnx2b2lkfHdoaWxlfHdpdGh8eWllbGQvLFxyXG4gICAgSWRlbnRpZmllcjogL1thLXpBLVpfJF1bYS16QS1aMC05XyRdKi8sXHJcbiAgfSxcclxuICBcImdcIixcclxuICBcIklucHV0RWxlbWVudFwiXHJcbik7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24qIHNjYW4oc3RyKSB7XHJcbiAgcmVnLnJlZ2V4cC5sYXN0SW5kZXggPSAwO1xyXG4gIHdoaWxlIChyZWcucmVnZXhwLmxhc3RJbmRleCA8IHN0ci5sZW5ndGgpIHtcclxuICAgIGxldCByID0gcmVnLmV4ZWMoc3RyKTtcclxuXHJcbiAgICBpZiAoci5XaGl0ZXNwYWNlKSB7XHJcbiAgICB9IGVsc2UgaWYgKHIuTGluZVRlcm1pbmF0b3IpIHtcclxuICAgIH0gZWxzZSBpZiAoci5Db21tZW50cykge1xyXG4gICAgfSBlbHNlIGlmIChyLk51bWVyaWNMaXRlcmFsKSB7XHJcbiAgICAgIHlpZWxkIHtcclxuICAgICAgICB0eXBlOiBcIk51bWVyaWNMaXRlcmFsXCIsXHJcbiAgICAgICAgdmFsdWU6IHJbMF0sXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2UgaWYgKHIuU3RyaW5nTGl0ZXJhbCkge1xyXG4gICAgICB5aWVsZCB7XHJcbiAgICAgICAgdHlwZTogXCJTdHJpbmdMaXRlcmFsXCIsXHJcbiAgICAgICAgdmFsdWU6IHJbMF0sXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2UgaWYgKHIuQm9vbGVhbkxpdGVyYWwpIHtcclxuICAgICAgeWllbGQge1xyXG4gICAgICAgIHR5cGU6IFwiQm9vbGVhbkxpdGVyYWxcIixcclxuICAgICAgICB2YWx1ZTogclswXSxcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSBpZiAoci5OdWxsTGl0ZXJhbCkge1xyXG4gICAgICB5aWVsZCB7XHJcbiAgICAgICAgdHlwZTogXCJOdWxsTGl0ZXJhbFwiLFxyXG4gICAgICAgIHZhbHVlOiBudWxsLFxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIGlmIChyLklkZW50aWZpZXIpIHtcclxuICAgICAgeWllbGQge1xyXG4gICAgICAgIHR5cGU6IFwiSWRlbnRpZmllclwiLFxyXG4gICAgICAgIG5hbWU6IHJbMF0sXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2UgaWYgKCFyLktleXdvcmRzKSB7XHJcbiAgICAgIGlmIChyLlB1bmN0dWF0b3IpIHtcclxuICAgICAgICB5aWVsZCB7XHJcbiAgICAgICAgICB0eXBlOiByWzBdLFxyXG4gICAgICAgIH07XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwidW5leHBlY3RlZCB0b2tlbjogXCIgKyByWzBdKTtcclxuICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgeWllbGQge1xyXG4gICAgICAgIHR5cGU6IHJbMF0sXHJcbiAgICAgIH07XHJcbiAgICB9XHJcblxyXG4gICAgLy8gY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkoclswXSkpO1xyXG4gICAgLy8gZG9jdW1lbnQud3JpdGUoclswXSk7XHJcbiAgICBpZiAoIXJbMF0ubGVuZ3RoKSBicmVhaztcclxuICB9XHJcblxyXG4gIHlpZWxkIHtcclxuICAgIHR5cGU6IFwiRU9GXCIsXHJcbiAgfTtcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/LexParser.js\n'
        );

        /***/
      },

    /***/ "./src/SynctaxParser.js":
      /*!******************************!*\
  !*** ./src/SynctaxParser.js ***!
  \******************************/
      /***/ (
        __unused_webpack_module,
        __webpack_exports__,
        __webpack_require__
      ) => {
        eval(
          "__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parse: () => (/* binding */ parse)\n/* harmony export */ });\n/* harmony import */ var _LexParser_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LexParser.js */ \"./src/LexParser.js\");\n\r\n\r\nconst syntaxMap = {\r\n    Program: [['StatementList', 'EOF']],\r\n    StatementList: [['Statement'], ['StatementList', 'Statement']],\r\n    Statement: [\r\n      ['ExpressionStatement'],\r\n      ['IfStatement'],\r\n      ['WhileStatement'],\r\n      ['VariableDeclaration'],\r\n      ['FunctionDeclaration'],\r\n      ['BlockStatement'],\r\n      ['BreakStatement'],\r\n      ['ContinueStatement'],\r\n    ],\r\n    BreakStatement: [\r\n      ['break', ';']\r\n    ],\r\n    ContinueStatement: [\r\n      ['continue', ';']\r\n    ],\r\n    BlockStatement: [\r\n      ['{', 'StatementList', '}'],\r\n      ['{', '}']\r\n    ],\r\n    IfStatement: [\r\n      ['if', '(', 'Expression', ')', 'Statement']\r\n    ],\r\n    WhileStatement: [\r\n      ['while', '(', 'Expression', ')', 'Statement']\r\n    ],\r\n    VariableDeclaration: [\r\n      ['var', 'Identifier', ';'],\r\n      ['let', 'Identifier', ';']\r\n    ],\r\n    FunctionDeclaration: [\r\n      ['function', 'Identifier', '(', ')', '{', 'StatementList', '}']\r\n    ],\r\n    ExpressionStatement: [['Expression', ';']],\r\n    Expression: [['AssignmentExpression']],\r\n    AssignmentExpression: [\r\n      ['LeftHandSideExpression', '=', 'LogicalORExpression'],\r\n      ['LogicalORExpression']\r\n    ],\r\n    LogicalORExpression: [\r\n      ['LogicalANDExpression'],\r\n      ['LogicalORExpression', '||', 'LogicalANDExpression']\r\n    ],\r\n    LogicalANDExpression: [\r\n      ['AdditiveExpression'],\r\n      ['LogicalANDExpression', '&&', 'AdditiveExpression']\r\n    ],\r\n    AdditiveExpression: [\r\n      ['MultiplicativeExpression'],\r\n      ['AdditiveExpression', '+', 'MultiplicativeExpression'],\r\n      ['AdditiveExpression', '-', 'MultiplicativeExpression']\r\n    ],\r\n    MultiplicativeExpression: [\r\n      ['LeftHandSideExpression'],\r\n      ['MultiplicativeExpression', '*', 'LeftHandSideExpression'],\r\n      ['MultiplicativeExpression', '/', 'LeftHandSideExpression']\r\n    ],\r\n    MemberExpression: [\r\n      ['PrimaryExpression'],\r\n      ['PrimaryExpression', '.', 'Identifier'],\r\n      ['PrimaryExpression', '[', 'Expression', ']']\r\n    ] /* new fn()() || new fn().a() 需要额外注意的是这里的优先级 */,\r\n    LeftHandSideExpression: [\r\n      ['CallExpression'],\r\n      ['NewExpression']\r\n    ],\r\n    CallExpression: [\r\n      ['MemberExpression', 'Arguments'],\r\n      ['CallExpression', 'Arguments']\r\n    ] /* new fn() */,\r\n    Arguments: [\r\n      ['(', ')'],\r\n      ['(', 'ArgumentList', ')']\r\n    ],\r\n    ArgumentList: [\r\n      ['AssignmentExpression'],\r\n      ['ArgumentList', ',', 'AssignmentExpression']\r\n    ],\r\n    NewExpression: [\r\n      ['MemberExpression'],\r\n      ['new', 'NewExpression']\r\n    ] /* new fn */,\r\n    PrimaryExpression: [\r\n      ['(', 'Expression', ')'],\r\n      ['Literal'],\r\n      ['Identifier']\r\n    ],\r\n    Literal: [\r\n      ['NumericLiteral'] /*Number类型默认用于表示双精度浮点数*/,\r\n      ['StringLiteral'] /*JavaScript中的String类型使用UTF-16编码*/,\r\n      ['BooleanLiteral'],\r\n      ['NullLiteral'],\r\n      ['RegularExpression'],\r\n      [\r\n        'ObjectLiteral'\r\n      ] /*Javascript property 对行为和状态并没有一个明确的区分*/,\r\n      ['ArrayLiteral']\r\n    ],\r\n    ObjectLiteral: [\r\n      ['{', '}'],\r\n      ['{', 'PropertyList', '}']\r\n    ],\r\n    PropertyList: [['Property'], ['PropertyList', ',', 'Property']],\r\n    Property: [\r\n      ['StringLiteral', ':', 'AdditiveExpression'],\r\n      ['Identifier', ':', 'AdditiveExpression']\r\n    ]\r\n  },\r\n  hash = {};\r\n\r\n// 状态机\r\nfunction closure(state) {\r\n  hash[JSON.stringify(state)] = state; // 在数据污染之前备份数据\r\n  const queue = [];\r\n\r\n  for (let symbol in state) {\r\n    if (symbol.match(/^\\$/)) continue; // 将 $reduceState 排除, 不做为普通的状态进行迁移\r\n    queue.push(symbol); // 广度优先\r\n  }\r\n  // 提取每一个 symbol，根据 syntax 规则去进行展开 此时只处理了两层\r\n  while (queue.length) {\r\n    const symbol = queue.shift();\r\n    // console.log(symbol);\r\n\r\n    if (syntaxMap[symbol]) {\r\n      for (let rule of syntaxMap[symbol]) {\r\n        if (!state[rule[0]]) queue.push(rule[0]);\r\n        let current = state;\r\n        for (const part of rule) {\r\n          if (!current[part]) {\r\n            current[part] = {};\r\n          }\r\n          current = current[part];\r\n        }\r\n        // 在术语中用 reduce 来代指合并，reduce 有两个要素\r\n        // 1. 将不定个 non-terminal-symbol 合并，所以需要回退状态\r\n        // 2. 要 reduce 成一个什么样的 symbol\r\n        current.$reduceType = symbol;\r\n        current.$reduceLength = rule.length;\r\n      }\r\n    }\r\n  }\r\n\r\n  //\r\n  for (const symbol in state) {\r\n    if (symbol.match(/^\\$/)) continue;\r\n\r\n    if (hash[JSON.stringify(state[symbol])]) {\r\n      state[symbol] = hash[JSON.stringify(state[symbol])];\r\n    } else {\r\n      closure(state[symbol]);\r\n    }\r\n  }\r\n}\r\n\r\n// 如果把语法的分析过程看做一个状态迁移的过程 就是从 start 到 end 的过程\r\nconst end = {\r\n  $isEnd: true\r\n};\r\nconst start = {\r\n  Program: end\r\n};\r\n\r\nclosure(start);\r\n\r\n// console.log(start);\r\n\r\nfunction parse(source) {\r\n  let stack = [start];\r\n  let symbolStack = [];\r\n\r\n  // 处理的是子元素\r\n  function reduce() {\r\n    let state = stack[stack.length - 1];\r\n    // 生成新的 _symbol\r\n    if (state.$reduceType) {\r\n      let children = [];\r\n      for (let i = 0; i < state.$reduceLength; i++) {\r\n        stack.pop();\r\n        children.push(symbolStack.pop());\r\n      }\r\n\r\n      // reduce to non-terminal-symbol and shift it\r\n      return {\r\n        type: state.$reduceType,\r\n        children: children.reverse()\r\n      };\r\n    } else {\r\n      console.log(state);\r\n      throw new Error('unexpected token');\r\n    }\r\n  }\r\n\r\n  function shift(symbol) {\r\n    let state = stack[stack.length - 1];\r\n    if (symbol && symbol.type in state) {\r\n      stack.push(state[symbol.type]); // 储存状态\r\n      symbolStack.push(symbol);\r\n    } else {\r\n      // reduce to non-terminal-symbol\r\n      // reduce 产生的新的 symbol 没有入栈，需要再次 shift\r\n      shift(reduce());\r\n      shift(symbol);\r\n    }\r\n  }\r\n\r\n  for (let symbol /* terminal symbols */ of (0,_LexParser_js__WEBPACK_IMPORTED_MODULE_0__.scan)(source)) {\r\n    shift(symbol);\r\n    // console.log(symbol);\r\n  }\r\n  return reduce();\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3luY3RheFBhcnNlci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EsU0FBUyxzQkFBc0I7QUFDL0IsU0FBUyxLQUFLO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QjtBQUM5Qiw4QkFBOEI7QUFDOUI7QUFDQTtBQUNBLDZDQUE2QyxzQkFBc0I7QUFDbkU7QUFDQSwyQ0FBMkM7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsS0FBSztBQUNkLFNBQVMscUJBQXFCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQSx1Q0FBdUM7QUFDdkMsd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5QkFBeUI7QUFDL0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0Q0FBNEMsbURBQUk7QUFDaEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RveXNjcmlwdC8uL3NyYy9TeW5jdGF4UGFyc2VyLmpzPzJhMjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtzY2FufSBmcm9tICcuL0xleFBhcnNlci5qcyc7XHJcblxyXG5jb25zdCBzeW50YXhNYXAgPSB7XHJcbiAgICBQcm9ncmFtOiBbWydTdGF0ZW1lbnRMaXN0JywgJ0VPRiddXSxcclxuICAgIFN0YXRlbWVudExpc3Q6IFtbJ1N0YXRlbWVudCddLCBbJ1N0YXRlbWVudExpc3QnLCAnU3RhdGVtZW50J11dLFxyXG4gICAgU3RhdGVtZW50OiBbXHJcbiAgICAgIFsnRXhwcmVzc2lvblN0YXRlbWVudCddLFxyXG4gICAgICBbJ0lmU3RhdGVtZW50J10sXHJcbiAgICAgIFsnV2hpbGVTdGF0ZW1lbnQnXSxcclxuICAgICAgWydWYXJpYWJsZURlY2xhcmF0aW9uJ10sXHJcbiAgICAgIFsnRnVuY3Rpb25EZWNsYXJhdGlvbiddLFxyXG4gICAgICBbJ0Jsb2NrU3RhdGVtZW50J10sXHJcbiAgICAgIFsnQnJlYWtTdGF0ZW1lbnQnXSxcclxuICAgICAgWydDb250aW51ZVN0YXRlbWVudCddLFxyXG4gICAgXSxcclxuICAgIEJyZWFrU3RhdGVtZW50OiBbXHJcbiAgICAgIFsnYnJlYWsnLCAnOyddXHJcbiAgICBdLFxyXG4gICAgQ29udGludWVTdGF0ZW1lbnQ6IFtcclxuICAgICAgWydjb250aW51ZScsICc7J11cclxuICAgIF0sXHJcbiAgICBCbG9ja1N0YXRlbWVudDogW1xyXG4gICAgICBbJ3snLCAnU3RhdGVtZW50TGlzdCcsICd9J10sXHJcbiAgICAgIFsneycsICd9J11cclxuICAgIF0sXHJcbiAgICBJZlN0YXRlbWVudDogW1xyXG4gICAgICBbJ2lmJywgJygnLCAnRXhwcmVzc2lvbicsICcpJywgJ1N0YXRlbWVudCddXHJcbiAgICBdLFxyXG4gICAgV2hpbGVTdGF0ZW1lbnQ6IFtcclxuICAgICAgWyd3aGlsZScsICcoJywgJ0V4cHJlc3Npb24nLCAnKScsICdTdGF0ZW1lbnQnXVxyXG4gICAgXSxcclxuICAgIFZhcmlhYmxlRGVjbGFyYXRpb246IFtcclxuICAgICAgWyd2YXInLCAnSWRlbnRpZmllcicsICc7J10sXHJcbiAgICAgIFsnbGV0JywgJ0lkZW50aWZpZXInLCAnOyddXHJcbiAgICBdLFxyXG4gICAgRnVuY3Rpb25EZWNsYXJhdGlvbjogW1xyXG4gICAgICBbJ2Z1bmN0aW9uJywgJ0lkZW50aWZpZXInLCAnKCcsICcpJywgJ3snLCAnU3RhdGVtZW50TGlzdCcsICd9J11cclxuICAgIF0sXHJcbiAgICBFeHByZXNzaW9uU3RhdGVtZW50OiBbWydFeHByZXNzaW9uJywgJzsnXV0sXHJcbiAgICBFeHByZXNzaW9uOiBbWydBc3NpZ25tZW50RXhwcmVzc2lvbiddXSxcclxuICAgIEFzc2lnbm1lbnRFeHByZXNzaW9uOiBbXHJcbiAgICAgIFsnTGVmdEhhbmRTaWRlRXhwcmVzc2lvbicsICc9JywgJ0xvZ2ljYWxPUkV4cHJlc3Npb24nXSxcclxuICAgICAgWydMb2dpY2FsT1JFeHByZXNzaW9uJ11cclxuICAgIF0sXHJcbiAgICBMb2dpY2FsT1JFeHByZXNzaW9uOiBbXHJcbiAgICAgIFsnTG9naWNhbEFOREV4cHJlc3Npb24nXSxcclxuICAgICAgWydMb2dpY2FsT1JFeHByZXNzaW9uJywgJ3x8JywgJ0xvZ2ljYWxBTkRFeHByZXNzaW9uJ11cclxuICAgIF0sXHJcbiAgICBMb2dpY2FsQU5ERXhwcmVzc2lvbjogW1xyXG4gICAgICBbJ0FkZGl0aXZlRXhwcmVzc2lvbiddLFxyXG4gICAgICBbJ0xvZ2ljYWxBTkRFeHByZXNzaW9uJywgJyYmJywgJ0FkZGl0aXZlRXhwcmVzc2lvbiddXHJcbiAgICBdLFxyXG4gICAgQWRkaXRpdmVFeHByZXNzaW9uOiBbXHJcbiAgICAgIFsnTXVsdGlwbGljYXRpdmVFeHByZXNzaW9uJ10sXHJcbiAgICAgIFsnQWRkaXRpdmVFeHByZXNzaW9uJywgJysnLCAnTXVsdGlwbGljYXRpdmVFeHByZXNzaW9uJ10sXHJcbiAgICAgIFsnQWRkaXRpdmVFeHByZXNzaW9uJywgJy0nLCAnTXVsdGlwbGljYXRpdmVFeHByZXNzaW9uJ11cclxuICAgIF0sXHJcbiAgICBNdWx0aXBsaWNhdGl2ZUV4cHJlc3Npb246IFtcclxuICAgICAgWydMZWZ0SGFuZFNpZGVFeHByZXNzaW9uJ10sXHJcbiAgICAgIFsnTXVsdGlwbGljYXRpdmVFeHByZXNzaW9uJywgJyonLCAnTGVmdEhhbmRTaWRlRXhwcmVzc2lvbiddLFxyXG4gICAgICBbJ011bHRpcGxpY2F0aXZlRXhwcmVzc2lvbicsICcvJywgJ0xlZnRIYW5kU2lkZUV4cHJlc3Npb24nXVxyXG4gICAgXSxcclxuICAgIE1lbWJlckV4cHJlc3Npb246IFtcclxuICAgICAgWydQcmltYXJ5RXhwcmVzc2lvbiddLFxyXG4gICAgICBbJ1ByaW1hcnlFeHByZXNzaW9uJywgJy4nLCAnSWRlbnRpZmllciddLFxyXG4gICAgICBbJ1ByaW1hcnlFeHByZXNzaW9uJywgJ1snLCAnRXhwcmVzc2lvbicsICddJ11cclxuICAgIF0gLyogbmV3IGZuKCkoKSB8fCBuZXcgZm4oKS5hKCkg6ZyA6KaB6aKd5aSW5rOo5oSP55qE5piv6L+Z6YeM55qE5LyY5YWI57qnICovLFxyXG4gICAgTGVmdEhhbmRTaWRlRXhwcmVzc2lvbjogW1xyXG4gICAgICBbJ0NhbGxFeHByZXNzaW9uJ10sXHJcbiAgICAgIFsnTmV3RXhwcmVzc2lvbiddXHJcbiAgICBdLFxyXG4gICAgQ2FsbEV4cHJlc3Npb246IFtcclxuICAgICAgWydNZW1iZXJFeHByZXNzaW9uJywgJ0FyZ3VtZW50cyddLFxyXG4gICAgICBbJ0NhbGxFeHByZXNzaW9uJywgJ0FyZ3VtZW50cyddXHJcbiAgICBdIC8qIG5ldyBmbigpICovLFxyXG4gICAgQXJndW1lbnRzOiBbXHJcbiAgICAgIFsnKCcsICcpJ10sXHJcbiAgICAgIFsnKCcsICdBcmd1bWVudExpc3QnLCAnKSddXHJcbiAgICBdLFxyXG4gICAgQXJndW1lbnRMaXN0OiBbXHJcbiAgICAgIFsnQXNzaWdubWVudEV4cHJlc3Npb24nXSxcclxuICAgICAgWydBcmd1bWVudExpc3QnLCAnLCcsICdBc3NpZ25tZW50RXhwcmVzc2lvbiddXHJcbiAgICBdLFxyXG4gICAgTmV3RXhwcmVzc2lvbjogW1xyXG4gICAgICBbJ01lbWJlckV4cHJlc3Npb24nXSxcclxuICAgICAgWyduZXcnLCAnTmV3RXhwcmVzc2lvbiddXHJcbiAgICBdIC8qIG5ldyBmbiAqLyxcclxuICAgIFByaW1hcnlFeHByZXNzaW9uOiBbXHJcbiAgICAgIFsnKCcsICdFeHByZXNzaW9uJywgJyknXSxcclxuICAgICAgWydMaXRlcmFsJ10sXHJcbiAgICAgIFsnSWRlbnRpZmllciddXHJcbiAgICBdLFxyXG4gICAgTGl0ZXJhbDogW1xyXG4gICAgICBbJ051bWVyaWNMaXRlcmFsJ10gLypOdW1iZXLnsbvlnovpu5jorqTnlKjkuo7ooajnpLrlj4znsr7luqbmta7ngrnmlbAqLyxcclxuICAgICAgWydTdHJpbmdMaXRlcmFsJ10gLypKYXZhU2NyaXB05Lit55qEU3RyaW5n57G75Z6L5L2/55SoVVRGLTE257yW56CBKi8sXHJcbiAgICAgIFsnQm9vbGVhbkxpdGVyYWwnXSxcclxuICAgICAgWydOdWxsTGl0ZXJhbCddLFxyXG4gICAgICBbJ1JlZ3VsYXJFeHByZXNzaW9uJ10sXHJcbiAgICAgIFtcclxuICAgICAgICAnT2JqZWN0TGl0ZXJhbCdcclxuICAgICAgXSAvKkphdmFzY3JpcHQgcHJvcGVydHkg5a+56KGM5Li65ZKM54q25oCB5bm25rKh5pyJ5LiA5Liq5piO56Gu55qE5Yy65YiGKi8sXHJcbiAgICAgIFsnQXJyYXlMaXRlcmFsJ11cclxuICAgIF0sXHJcbiAgICBPYmplY3RMaXRlcmFsOiBbXHJcbiAgICAgIFsneycsICd9J10sXHJcbiAgICAgIFsneycsICdQcm9wZXJ0eUxpc3QnLCAnfSddXHJcbiAgICBdLFxyXG4gICAgUHJvcGVydHlMaXN0OiBbWydQcm9wZXJ0eSddLCBbJ1Byb3BlcnR5TGlzdCcsICcsJywgJ1Byb3BlcnR5J11dLFxyXG4gICAgUHJvcGVydHk6IFtcclxuICAgICAgWydTdHJpbmdMaXRlcmFsJywgJzonLCAnQWRkaXRpdmVFeHByZXNzaW9uJ10sXHJcbiAgICAgIFsnSWRlbnRpZmllcicsICc6JywgJ0FkZGl0aXZlRXhwcmVzc2lvbiddXHJcbiAgICBdXHJcbiAgfSxcclxuICBoYXNoID0ge307XHJcblxyXG4vLyDnirbmgIHmnLpcclxuZnVuY3Rpb24gY2xvc3VyZShzdGF0ZSkge1xyXG4gIGhhc2hbSlNPTi5zdHJpbmdpZnkoc3RhdGUpXSA9IHN0YXRlOyAvLyDlnKjmlbDmja7msaHmn5PkuYvliY3lpIfku73mlbDmja5cclxuICBjb25zdCBxdWV1ZSA9IFtdO1xyXG5cclxuICBmb3IgKGxldCBzeW1ib2wgaW4gc3RhdGUpIHtcclxuICAgIGlmIChzeW1ib2wubWF0Y2goL15cXCQvKSkgY29udGludWU7IC8vIOWwhiAkcmVkdWNlU3RhdGUg5o6S6ZmkLCDkuI3lgZrkuLrmma7pgJrnmoTnirbmgIHov5vooYzov4Hnp7tcclxuICAgIHF1ZXVlLnB1c2goc3ltYm9sKTsgLy8g5bm/5bqm5LyY5YWIXHJcbiAgfVxyXG4gIC8vIOaPkOWPluavj+S4gOS4qiBzeW1ib2zvvIzmoLnmja4gc3ludGF4IOinhOWImeWOu+i/m+ihjOWxleW8gCDmraTml7blj6rlpITnkIbkuobkuKTlsYJcclxuICB3aGlsZSAocXVldWUubGVuZ3RoKSB7XHJcbiAgICBjb25zdCBzeW1ib2wgPSBxdWV1ZS5zaGlmdCgpO1xyXG4gICAgLy8gY29uc29sZS5sb2coc3ltYm9sKTtcclxuXHJcbiAgICBpZiAoc3ludGF4TWFwW3N5bWJvbF0pIHtcclxuICAgICAgZm9yIChsZXQgcnVsZSBvZiBzeW50YXhNYXBbc3ltYm9sXSkge1xyXG4gICAgICAgIGlmICghc3RhdGVbcnVsZVswXV0pIHF1ZXVlLnB1c2gocnVsZVswXSk7XHJcbiAgICAgICAgbGV0IGN1cnJlbnQgPSBzdGF0ZTtcclxuICAgICAgICBmb3IgKGNvbnN0IHBhcnQgb2YgcnVsZSkge1xyXG4gICAgICAgICAgaWYgKCFjdXJyZW50W3BhcnRdKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRbcGFydF0gPSB7fTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIGN1cnJlbnQgPSBjdXJyZW50W3BhcnRdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyDlnKjmnK/or63kuK3nlKggcmVkdWNlIOadpeS7o+aMh+WQiOW5tu+8jHJlZHVjZSDmnInkuKTkuKropoHntKBcclxuICAgICAgICAvLyAxLiDlsIbkuI3lrprkuKogbm9uLXRlcm1pbmFsLXN5bWJvbCDlkIjlubbvvIzmiYDku6XpnIDopoHlm57pgIDnirbmgIFcclxuICAgICAgICAvLyAyLiDopoEgcmVkdWNlIOaIkOS4gOS4quS7gOS5iOagt+eahCBzeW1ib2xcclxuICAgICAgICBjdXJyZW50LiRyZWR1Y2VUeXBlID0gc3ltYm9sO1xyXG4gICAgICAgIGN1cnJlbnQuJHJlZHVjZUxlbmd0aCA9IHJ1bGUubGVuZ3RoO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvL1xyXG4gIGZvciAoY29uc3Qgc3ltYm9sIGluIHN0YXRlKSB7XHJcbiAgICBpZiAoc3ltYm9sLm1hdGNoKC9eXFwkLykpIGNvbnRpbnVlO1xyXG5cclxuICAgIGlmIChoYXNoW0pTT04uc3RyaW5naWZ5KHN0YXRlW3N5bWJvbF0pXSkge1xyXG4gICAgICBzdGF0ZVtzeW1ib2xdID0gaGFzaFtKU09OLnN0cmluZ2lmeShzdGF0ZVtzeW1ib2xdKV07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjbG9zdXJlKHN0YXRlW3N5bWJvbF0pO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8g5aaC5p6c5oqK6K+t5rOV55qE5YiG5p6Q6L+H56iL55yL5YGa5LiA5Liq54q25oCB6L+B56e755qE6L+H56iLIOWwseaYr+S7jiBzdGFydCDliLAgZW5kIOeahOi/h+eoi1xyXG5jb25zdCBlbmQgPSB7XHJcbiAgJGlzRW5kOiB0cnVlXHJcbn07XHJcbmNvbnN0IHN0YXJ0ID0ge1xyXG4gIFByb2dyYW06IGVuZFxyXG59O1xyXG5cclxuY2xvc3VyZShzdGFydCk7XHJcblxyXG4vLyBjb25zb2xlLmxvZyhzdGFydCk7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcGFyc2Uoc291cmNlKSB7XHJcbiAgbGV0IHN0YWNrID0gW3N0YXJ0XTtcclxuICBsZXQgc3ltYm9sU3RhY2sgPSBbXTtcclxuXHJcbiAgLy8g5aSE55CG55qE5piv5a2Q5YWD57SgXHJcbiAgZnVuY3Rpb24gcmVkdWNlKCkge1xyXG4gICAgbGV0IHN0YXRlID0gc3RhY2tbc3RhY2subGVuZ3RoIC0gMV07XHJcbiAgICAvLyDnlJ/miJDmlrDnmoQgX3N5bWJvbFxyXG4gICAgaWYgKHN0YXRlLiRyZWR1Y2VUeXBlKSB7XHJcbiAgICAgIGxldCBjaGlsZHJlbiA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0YXRlLiRyZWR1Y2VMZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHN0YWNrLnBvcCgpO1xyXG4gICAgICAgIGNoaWxkcmVuLnB1c2goc3ltYm9sU3RhY2sucG9wKCkpO1xyXG4gICAgICB9XHJcblxyXG4gICAgICAvLyByZWR1Y2UgdG8gbm9uLXRlcm1pbmFsLXN5bWJvbCBhbmQgc2hpZnQgaXRcclxuICAgICAgcmV0dXJuIHtcclxuICAgICAgICB0eXBlOiBzdGF0ZS4kcmVkdWNlVHlwZSxcclxuICAgICAgICBjaGlsZHJlbjogY2hpbGRyZW4ucmV2ZXJzZSgpXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLmxvZyhzdGF0ZSk7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcigndW5leHBlY3RlZCB0b2tlbicpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZnVuY3Rpb24gc2hpZnQoc3ltYm9sKSB7XHJcbiAgICBsZXQgc3RhdGUgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcclxuICAgIGlmIChzeW1ib2wgJiYgc3ltYm9sLnR5cGUgaW4gc3RhdGUpIHtcclxuICAgICAgc3RhY2sucHVzaChzdGF0ZVtzeW1ib2wudHlwZV0pOyAvLyDlgqjlrZjnirbmgIFcclxuICAgICAgc3ltYm9sU3RhY2sucHVzaChzeW1ib2wpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gcmVkdWNlIHRvIG5vbi10ZXJtaW5hbC1zeW1ib2xcclxuICAgICAgLy8gcmVkdWNlIOS6p+eUn+eahOaWsOeahCBzeW1ib2wg5rKh5pyJ5YWl5qCI77yM6ZyA6KaB5YaN5qyhIHNoaWZ0XHJcbiAgICAgIHNoaWZ0KHJlZHVjZSgpKTtcclxuICAgICAgc2hpZnQoc3ltYm9sKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGZvciAobGV0IHN5bWJvbCAvKiB0ZXJtaW5hbCBzeW1ib2xzICovIG9mIHNjYW4oc291cmNlKSkge1xyXG4gICAgc2hpZnQoc3ltYm9sKTtcclxuICAgIC8vIGNvbnNvbGUubG9nKHN5bWJvbCk7XHJcbiAgfVxyXG4gIHJldHVybiByZWR1Y2UoKTtcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/SynctaxParser.js\n"
        );

        /***/
      },

    /***/ "./src/evaluator.js":
      /*!**************************!*\
  !*** ./src/evaluator.js ***!
  \**************************/
      /***/ (
        __unused_webpack_module,
        __webpack_exports__,
        __webpack_require__
      ) => {
        eval(
          '__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Evaluator: () => (/* binding */ Evaluator)\n/* harmony export */ });\n/* harmony import */ var _runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runtime.js */ "./src/runtime.js");\n\r\n\r\nclass Evaluator {\r\n  constructor() {\r\n    this.realm = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Realm();\r\n    // 执行上下文中的数据状态 在函数调用的时候切换\r\n    // 通过栈来管理 ExecutionContext 在存储函数调用的先后时机\r\n    this.globalObject = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsObject();\r\n    this.ecs = [\r\n      new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionContext(\r\n        this.realm,\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.ObjectEnvironmentRecord(this.globalObject),\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.ObjectEnvironmentRecord(this.globalObject)\r\n      ),\r\n    ];\r\n    this.log();\r\n  }\r\n\r\n  evaluateModule(node) {\r\n    let globalEC = this.ecs[0],\r\n      ec = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionContext(\r\n        this.realm,\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.EnvironmentRecord(globalEC.lexicalEnvironment),\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.EnvironmentRecord(globalEC.lexicalEnvironment)\r\n      );\r\n\r\n    this.ecs.push(ec);\r\n    let result = this.valueOf(node);\r\n    this.ecs.pop();\r\n\r\n    return result;\r\n  }\r\n\r\n  log() {\r\n    this.globalObject.set("log", new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsObject());\r\n    this.globalObject.get("log").call = (args) => {\r\n      console.log(args);\r\n    };\r\n  }\r\n\r\n  evaluate(node) {\r\n    if (this[node.type]) {\r\n      let r = this[node.type](node);\r\n      // console.log(r)\r\n      return r;\r\n    }\r\n  }\r\n\r\n  Program(node) {\r\n    return this.evaluate(node.children[0]);\r\n  }\r\n\r\n  StatementList(node) {\r\n    if (node.children.length === 1) {\r\n      return this.evaluate(node.children[0]);\r\n    } else {\r\n      const record = this.evaluate(node.children[0]);\r\n      if (record.type === "normal") {\r\n        return this.evaluate(node.children[1]);\r\n      }\r\n      return record;\r\n    }\r\n  }\r\n\r\n  Statement(node) {\r\n    return this.evaluate(node.children[0]);\r\n  }\r\n\r\n  IfStatement(node) {\r\n    let condition = this.evaluate(node.children[2]);\r\n    if (condition.property === "undefined" || condition.property === "NaN") {\r\n      return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsUndefined().toBoolean();\r\n    }\r\n    if (condition instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) {\r\n      condition = condition.get();\r\n    }\r\n    if (condition.toBoolean().value) {\r\n      return this.evaluate(node.children[4]);\r\n    }\r\n  }\r\n\r\n  WhileStatement(node) {\r\n    while (true) {\r\n      let condition = this.evaluate(node.children[2]);\r\n      if (condition.property === "undefined" || condition.property === "NaN") {\r\n        return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsUndefined().toBoolean();\r\n      }\r\n      if (condition instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) {\r\n        condition = condition.get();\r\n      }\r\n      if (condition.toBoolean().value) {\r\n        let record = this.evaluate(node.children[4]);\r\n        if (record.type === "continue") {\r\n          continue;\r\n          // TODO\r\n        } else if (record.type === "break") {\r\n          return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord("normal"); // break 代表着循环截止了 否则一个 break 会截停多层循环了\r\n        }\r\n      } else {\r\n        return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord("normal");\r\n      }\r\n    }\r\n  }\r\n\r\n  BreakStatement(node) {\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord("break");\r\n  }\r\n\r\n  ContinueStatement(node) {\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord("continue");\r\n  }\r\n\r\n  VariableDeclaration(node) {\r\n    // log(node) 获取表达式声明体\r\n    let runningEC = this.ecs[this.ecs.length - 1]; // 取栈顶\r\n    runningEC.lexicalEnvironment.add(node.children[1].name);\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord("normal", new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsUndefined());\r\n  }\r\n\r\n  ExpressionStatement(node) {\r\n    let result = this.evaluate(node.children[0]);\r\n    if (result instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) {\r\n      result = result.get();\r\n    }\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord("normal", result);\r\n  }\r\n\r\n  Expression(node) {\r\n    return this.evaluate(node.children[0]);\r\n  }\r\n\r\n  AdditiveExpression(node) {\r\n    if (node.children.length === 1) return this.evaluate(node.children[0]);\r\n    else {\r\n      let left = this.evaluate(node.children[0]),\r\n        right = this.evaluate(node.children[2]);\r\n      if (left instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) left = left.get();\r\n      if (right instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) right = right.get();\r\n\r\n      if (node.children[1].type === "+") {\r\n        return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsNumber(left.value + right.value);\r\n      }\r\n      if (node.children[1].type === "-") {\r\n        return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsNumber(left.value - right.value);\r\n      }\r\n    }\r\n  }\r\n\r\n  MultiplicativeExpression(node) {\r\n    if (node.children.length === 1) return this.evaluate(node.children[0]);\r\n    else {\r\n      let left = this.evaluate(node.children[0]),\r\n        right = this.evaluate(node.children[2]);\r\n      if (left instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) left = left.get();\r\n      if (right instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) right = left.get();\r\n\r\n      if (node.children[1].type === "*") {\r\n        return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsNumber(left.value * right.value);\r\n      }\r\n      if (node.children[1].type === "/") {\r\n        return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsNumber(left.value / right.value);\r\n      }\r\n    }\r\n  }\r\n\r\n  PrimaryExpression(node) {\r\n    if (node.children.length === 1) return this.evaluate(node.children[0]);\r\n  }\r\n\r\n  Literal(node) {\r\n    return this.evaluate(node.children[0]);\r\n  }\r\n\r\n  NumericLiteral(node) {\r\n    let str = node.value,\r\n      len = str.length,\r\n      value = 0, // 进制\r\n      n = 10;\r\n\r\n    if (str.match(/^0b/)) {\r\n      n = 2;\r\n      len -= 2;\r\n    } else if (str.match(/^0o/)) {\r\n      n = 8;\r\n      len -= 2;\r\n    } else if (str.match(/^0x/)) {\r\n      n = 16;\r\n      len -= 2;\r\n    }\r\n\r\n    while (len--) {\r\n      // 处理 16 进制\r\n      let char = str.charCodeAt(str.length - len - 1);\r\n      if (char >= "a".charCodeAt(0) && char <= "f".charCodeAt(0)) {\r\n        char = char - "a".charCodeAt(0) + 10;\r\n      } else if (char >= "A".charCodeAt(0) && char <= "F".charCodeAt(0)) {\r\n        char = char - "A".charCodeAt(0) + 10;\r\n      } else if (char >= "0".charCodeAt(0) && char <= "9".charCodeAt(0)) {\r\n        char -= "0".charCodeAt(0);\r\n      } else {\r\n        throw new Error("Invalid or unexpected token");\r\n      }\r\n\r\n      // 将数字字符转换为其对应的数字值\r\n      value = value * n + char;\r\n    }\r\n\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsNumber(node.value);\r\n  }\r\n\r\n  StringLiteral(node) {\r\n    const result = [];\r\n    console.log(node.value);\r\n\r\n    for (let i = 1, len = node.value.length - 1; i < len; i++) {\r\n      switch (node.value[i]) {\r\n        case "\\\\":\r\n          ++i;\r\n          const char = node.value[i],\r\n            escapeCharMap = {\r\n              // 默认处理 BMP 的字符集（0000 - ffff : 一个 utf-16 的资源）\r\n              n: String.fromCharCode(0x000a),\r\n              r: String.fromCharCode(0x000d),\r\n              t: String.fromCharCode(0x0009),\r\n              b: String.fromCharCode(0x0008),\r\n              f: String.fromCharCode(0x000c),\r\n              v: String.fromCharCode(0x000b),\r\n              0: String.fromCharCode(0x0000),\r\n              "\\\\": String.fromCharCode(0x005c),\r\n              "\'": String.fromCharCode(0x0027),\r\n              \'"\': String.fromCharCode(0x0022),\r\n            };\r\n          if (char in escapeCharMap) {\r\n            result.push(escapeCharMap[char]);\r\n          } else {\r\n            result.push(char);\r\n          }\r\n          break;\r\n        default:\r\n          result.push(node.value[i]);\r\n          break;\r\n      }\r\n    }\r\n    // console.log(result);\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsString(result);\r\n  }\r\n\r\n  ObjectLiteral(node) {\r\n    const len = node.children.length;\r\n    if (len === 2) {\r\n      return {};\r\n    }\r\n    if (len === 3) {\r\n      const object = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsObject(); // Js 的对象本质就是两个东西：prototype property\r\n      this.PropertyList(node.children[1], object);\r\n      // object.prototype =\r\n      return object;\r\n    }\r\n  }\r\n\r\n  PropertyList(node, object) {\r\n    if (node.children.length === 1) {\r\n      this.Property(node.children[0], object);\r\n    } else {\r\n      this.PropertyList(node.children[0], object);\r\n      this.Property(node.children[2], object);\r\n    }\r\n  }\r\n\r\n  Property(node, object) {\r\n    let name;\r\n    if (node.children[0].type === "Identifier") {\r\n      name = node.children[0].name;\r\n    } else if (node.children[0].type === "StringLiteral") {\r\n      name = this.evaluate(node.children[0]);\r\n    }\r\n    object.setProperty(name, {\r\n      value: this.evaluate(node.children[2]),\r\n      writeable: true,\r\n      enumerable: true,\r\n      configurable: true,\r\n    });\r\n  }\r\n\r\n  AssignmentExpression(node) {\r\n    if (node.children.length === 1) {\r\n      return this.evaluate(node.children[0]);\r\n    }\r\n    // 先执行左边的表达式，然后执行右边的表达式，最后将右边的值赋值给左边的变量\r\n    let left = this.evaluate(node.children[0]);\r\n    let right = this.evaluate(node.children[2]);\r\n    left.set(right);\r\n  }\r\n\r\n  LogicalORExpression(node) {\r\n    if (node.children.length === 1) return this.evaluate(node.children[0]);\r\n    const res = this.evaluate(node.children[0]);\r\n    if (res.value) return res.value;\r\n    if (res.type === "null" || res.property === "undefined") {\r\n      return this.evaluate(node.children[2]);\r\n    }\r\n    return this.evaluate(node.children[2]);\r\n  }\r\n\r\n  LogicalANDExpression(node) {\r\n    if (node.children.length === 1) return this.evaluate(node.children[0]);\r\n    const res = this.evaluate(node.children[0]);\r\n    if (!res.value) return res.value;\r\n    if (res.type === "null") return null;\r\n    if (res.property === "undefined") return undefined;\r\n    return this.evaluate(node.children[2]);\r\n  }\r\n\r\n  LeftHandSideExpression(node) {\r\n    return this.evaluate(node.children[0]);\r\n  }\r\n\r\n  NewExpression(node) {\r\n    if (node.children.length === 1) {\r\n      return this.evaluate(node.children[0]);\r\n    }\r\n    if (node.children.length === 2) {\r\n      let _class = this.evaluate(node.children[1]);\r\n      return _class.constructor();\r\n    }\r\n    /*\r\n     * let object = this.realm.Object.constructor(),\r\n     *   _class = this.evaluate(node.children[1]),\r\n     *   result = _class.call(object);\r\n     * if(typeof result === "object"){\r\n     *   return result;\r\n     * }\r\n     * return object;\r\n     */\r\n  }\r\n\r\n  CallExpression(node) {\r\n    if (node.children.length === 1) {\r\n      return this.evaluate(node.children[0]);\r\n    }\r\n    if (node.children.length === 2) {\r\n      let _function = this.evaluate(node.children[0]),\r\n        _arguments = this.evaluate(node.children[1]);\r\n      if (_function instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) {\r\n        _function = _function.get();\r\n      }\r\n      return _function.call(_arguments);\r\n    }\r\n    /*\r\n     * let object = this.realm.Object.constructor(),\r\n     *   _class = this.evaluate(node.children[1]),\r\n     *   result = _class.call(object);\r\n     * if(typeof result === "object"){\r\n     *   return result;\r\n     * }\r\n     * return object;\r\n     */\r\n  }\r\n\r\n  MemberExpression(node) {\r\n    if (node.children.length === 1) {\r\n      return this.evaluate(node.children[0]);\r\n    }\r\n    if (node.children.length === 3) {\r\n      const result = this.evaluate(node.children[0]).get(),\r\n        prop = result.properties.get(node.children[2].name);\r\n      if ("value" in prop) return prop.value;\r\n      if ("get" in prop) return prop.get.call(result);\r\n    }\r\n  }\r\n\r\n  Identifier(node) {\r\n    // 将变量存储到 ExecutionContext\r\n    let runningEC = this.ecs[this.ecs.length - 1]; // 取栈顶\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference(runningEC.lexicalEnvironment, node.name);\r\n  }\r\n\r\n  Arguments(node) {\r\n    if (node.children.length === 2) {\r\n      return [];\r\n    } else {\r\n      return this.evaluate(node.children[1]);\r\n    }\r\n  }\r\n\r\n  ArgumentList(node) {\r\n    if (node.children.length === 1) {\r\n      let result = this.evaluate(node.children[0]);\r\n      if (result instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) {\r\n        return result.get();\r\n      }\r\n      return [result];\r\n    } else {\r\n      let result = this.evaluate(node.children[2]);\r\n      if (result instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) {\r\n        result = result.get();\r\n      }\r\n      return this.evaluate(node.children[0]).concat(result);\r\n    }\r\n  }\r\n\r\n  BooleanLiteral(node) {\r\n    if (node.value === "true") {\r\n      return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsBoolean(true);\r\n    } else if (node.value === "false") {\r\n      return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsBoolean(false);\r\n    }\r\n  }\r\n\r\n  NullLiteral(node) {\r\n    if (typeof node.value === "object") {\r\n      return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsNull();\r\n    }\r\n  }\r\n\r\n  BlockStatement(node) {\r\n    if (node.children.length === 2) return;\r\n\r\n    let runningEC = this.ecs[this.ecs.length - 1],\r\n      ec = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionContext(\r\n        runningEC.realm,\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.EnvironmentRecord(runningEC.lexicalEnvironment),\r\n        runningEC.variableEnvironment\r\n      );\r\n    this.ecs.push(ec);\r\n    let result = this.evaluate(node.children[1]);\r\n    this.ecs.pop();\r\n\r\n    return result;\r\n  }\r\n\r\n  FunctionDeclaration(node) {\r\n    let name = node.children[1].name,\r\n      code = node.children[node.children.length - 2],\r\n      func = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsObject();\r\n\r\n    func.call = (args) => {\r\n      let ec = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionContext(\r\n        this.realm,\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.EnvironmentRecord(func.environment),\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.EnvironmentRecord(func.environment)\r\n      );\r\n      this.ecs.push(ec);\r\n      this.evaluate(code);\r\n      this.ecs.pop();\r\n    };\r\n\r\n    let runningEC = this.ecs[this.ecs.length - 1];\r\n    runningEC.lexicalEnvironment.add(name);\r\n    runningEC.lexicalEnvironment.set(name, func);\r\n    func.environment = runningEC.lexicalEnvironment;\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord("normal");\r\n  }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXZhbHVhdG9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBY3NCO0FBQ3RCO0FBQ087QUFDUDtBQUNBLHFCQUFxQiw4Q0FBSztBQUMxQjtBQUNBO0FBQ0EsNEJBQTRCLGlEQUFRO0FBQ3BDO0FBQ0EsVUFBVSx5REFBZ0I7QUFDMUI7QUFDQSxZQUFZLGdFQUF1QjtBQUNuQyxZQUFZLGdFQUF1QjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseURBQWdCO0FBQy9CO0FBQ0EsWUFBWSwwREFBaUI7QUFDN0IsWUFBWSwwREFBaUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUMsaURBQVE7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsb0RBQVc7QUFDNUI7QUFDQSw2QkFBNkIsa0RBQVM7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixvREFBVztBQUM5QjtBQUNBLCtCQUErQixrREFBUztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVixxQkFBcUIseURBQWdCLFlBQVk7QUFDakQ7QUFDQSxRQUFRO0FBQ1IsbUJBQW1CLHlEQUFnQjtBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5REFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0EsZUFBZSx5REFBZ0I7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQSxlQUFlLHlEQUFnQixlQUFlLG9EQUFXO0FBQ3pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtEQUFTO0FBQ25DO0FBQ0E7QUFDQSxlQUFlLHlEQUFnQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtEQUFTO0FBQ25DLDJCQUEyQixrREFBUztBQUNwQztBQUNBO0FBQ0EsbUJBQW1CLGlEQUFRO0FBQzNCO0FBQ0E7QUFDQSxtQkFBbUIsaURBQVE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLGtEQUFTO0FBQ25DLDJCQUEyQixrREFBUztBQUNwQztBQUNBO0FBQ0EsbUJBQW1CLGlEQUFRO0FBQzNCO0FBQ0E7QUFDQSxtQkFBbUIsaURBQVE7QUFDM0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxpREFBUTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpREFBaUQsU0FBUztBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLGlEQUFRO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUIsaURBQVEsSUFBSTtBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGtEQUFTO0FBQ3hDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQsZUFBZSxrREFBUztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLGtEQUFTO0FBQ3JDO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLDRCQUE0QixrREFBUztBQUNyQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGtEQUFTO0FBQzFCLE1BQU07QUFDTixpQkFBaUIsa0RBQVM7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQiwrQ0FBTTtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUseURBQWdCO0FBQy9CO0FBQ0EsWUFBWSwwREFBaUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLGlEQUFRO0FBQ3pCO0FBQ0E7QUFDQSxtQkFBbUIseURBQWdCO0FBQ25DO0FBQ0EsWUFBWSwwREFBaUI7QUFDN0IsWUFBWSwwREFBaUI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLHlEQUFnQjtBQUMvQjtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG95c2NyaXB0Ly4vc3JjL2V2YWx1YXRvci5qcz83NTk1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XHJcbiAgUmVmZXJlbmNlLFxyXG4gIEV4ZWN1dGlvbkNvbnRleHQsXHJcbiAgRW52aXJvbm1lbnRSZWNvcmQsXHJcbiAgUmVhbG0sXHJcbiAgSnNPYmplY3QsXHJcbiAgSnNTeW1ib2wsXHJcbiAgSnNOdWxsLFxyXG4gIEpzVW5kZWZpbmVkLFxyXG4gIEpzTnVtYmVyLFxyXG4gIEpzU3RyaW5nLFxyXG4gIEpzQm9vbGVhbixcclxuICBDb21wbGV0aW9uUmVjb3JkLFxyXG4gIE9iamVjdEVudmlyb25tZW50UmVjb3JkLFxyXG59IGZyb20gXCIuL3J1bnRpbWUuanNcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBFdmFsdWF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy5yZWFsbSA9IG5ldyBSZWFsbSgpO1xyXG4gICAgLy8g5omn6KGM5LiK5LiL5paH5Lit55qE5pWw5o2u54q25oCBIOWcqOWHveaVsOiwg+eUqOeahOaXtuWAmeWIh+aNolxyXG4gICAgLy8g6YCa6L+H5qCI5p2l566h55CGIEV4ZWN1dGlvbkNvbnRleHQg5Zyo5a2Y5YKo5Ye95pWw6LCD55So55qE5YWI5ZCO5pe25py6XHJcbiAgICB0aGlzLmdsb2JhbE9iamVjdCA9IG5ldyBKc09iamVjdCgpO1xyXG4gICAgdGhpcy5lY3MgPSBbXHJcbiAgICAgIG5ldyBFeGVjdXRpb25Db250ZXh0KFxyXG4gICAgICAgIHRoaXMucmVhbG0sXHJcbiAgICAgICAgbmV3IE9iamVjdEVudmlyb25tZW50UmVjb3JkKHRoaXMuZ2xvYmFsT2JqZWN0KSxcclxuICAgICAgICBuZXcgT2JqZWN0RW52aXJvbm1lbnRSZWNvcmQodGhpcy5nbG9iYWxPYmplY3QpXHJcbiAgICAgICksXHJcbiAgICBdO1xyXG4gICAgdGhpcy5sb2coKTtcclxuICB9XHJcblxyXG4gIGV2YWx1YXRlTW9kdWxlKG5vZGUpIHtcclxuICAgIGxldCBnbG9iYWxFQyA9IHRoaXMuZWNzWzBdLFxyXG4gICAgICBlYyA9IG5ldyBFeGVjdXRpb25Db250ZXh0KFxyXG4gICAgICAgIHRoaXMucmVhbG0sXHJcbiAgICAgICAgbmV3IEVudmlyb25tZW50UmVjb3JkKGdsb2JhbEVDLmxleGljYWxFbnZpcm9ubWVudCksXHJcbiAgICAgICAgbmV3IEVudmlyb25tZW50UmVjb3JkKGdsb2JhbEVDLmxleGljYWxFbnZpcm9ubWVudClcclxuICAgICAgKTtcclxuXHJcbiAgICB0aGlzLmVjcy5wdXNoKGVjKTtcclxuICAgIGxldCByZXN1bHQgPSB0aGlzLnZhbHVlT2Yobm9kZSk7XHJcbiAgICB0aGlzLmVjcy5wb3AoKTtcclxuXHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG4gIH1cclxuXHJcbiAgbG9nKCkge1xyXG4gICAgdGhpcy5nbG9iYWxPYmplY3Quc2V0KFwibG9nXCIsIG5ldyBKc09iamVjdCgpKTtcclxuICAgIHRoaXMuZ2xvYmFsT2JqZWN0LmdldChcImxvZ1wiKS5jYWxsID0gKGFyZ3MpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coYXJncyk7XHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgZXZhbHVhdGUobm9kZSkge1xyXG4gICAgaWYgKHRoaXNbbm9kZS50eXBlXSkge1xyXG4gICAgICBsZXQgciA9IHRoaXNbbm9kZS50eXBlXShub2RlKTtcclxuICAgICAgLy8gY29uc29sZS5sb2cocilcclxuICAgICAgcmV0dXJuIHI7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBQcm9ncmFtKG5vZGUpIHtcclxuICAgIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gIH1cclxuXHJcbiAgU3RhdGVtZW50TGlzdChub2RlKSB7XHJcbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCByZWNvcmQgPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwibm9ybWFsXCIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzFdKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gcmVjb3JkO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgU3RhdGVtZW50KG5vZGUpIHtcclxuICAgIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gIH1cclxuXHJcbiAgSWZTdGF0ZW1lbnQobm9kZSkge1xyXG4gICAgbGV0IGNvbmRpdGlvbiA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblsyXSk7XHJcbiAgICBpZiAoY29uZGl0aW9uLnByb3BlcnR5ID09PSBcInVuZGVmaW5lZFwiIHx8IGNvbmRpdGlvbi5wcm9wZXJ0eSA9PT0gXCJOYU5cIikge1xyXG4gICAgICByZXR1cm4gbmV3IEpzVW5kZWZpbmVkKCkudG9Cb29sZWFuKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoY29uZGl0aW9uIGluc3RhbmNlb2YgUmVmZXJlbmNlKSB7XHJcbiAgICAgIGNvbmRpdGlvbiA9IGNvbmRpdGlvbi5nZXQoKTtcclxuICAgIH1cclxuICAgIGlmIChjb25kaXRpb24udG9Cb29sZWFuKCkudmFsdWUpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlbls0XSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBXaGlsZVN0YXRlbWVudChub2RlKSB7XHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICBsZXQgY29uZGl0aW9uID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzJdKTtcclxuICAgICAgaWYgKGNvbmRpdGlvbi5wcm9wZXJ0eSA9PT0gXCJ1bmRlZmluZWRcIiB8fCBjb25kaXRpb24ucHJvcGVydHkgPT09IFwiTmFOXCIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEpzVW5kZWZpbmVkKCkudG9Cb29sZWFuKCk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKGNvbmRpdGlvbiBpbnN0YW5jZW9mIFJlZmVyZW5jZSkge1xyXG4gICAgICAgIGNvbmRpdGlvbiA9IGNvbmRpdGlvbi5nZXQoKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY29uZGl0aW9uLnRvQm9vbGVhbigpLnZhbHVlKSB7XHJcbiAgICAgICAgbGV0IHJlY29yZCA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlbls0XSk7XHJcbiAgICAgICAgaWYgKHJlY29yZC50eXBlID09PSBcImNvbnRpbnVlXCIpIHtcclxuICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgLy8gVE9ET1xyXG4gICAgICAgIH0gZWxzZSBpZiAocmVjb3JkLnR5cGUgPT09IFwiYnJlYWtcIikge1xyXG4gICAgICAgICAgcmV0dXJuIG5ldyBDb21wbGV0aW9uUmVjb3JkKFwibm9ybWFsXCIpOyAvLyBicmVhayDku6PooajnnYDlvqrnjq/miKrmraLkuoYg5ZCm5YiZ5LiA5LiqIGJyZWFrIOS8muaIquWBnOWkmuWxguW+queOr+S6hlxyXG4gICAgICAgIH1cclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gbmV3IENvbXBsZXRpb25SZWNvcmQoXCJub3JtYWxcIik7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIEJyZWFrU3RhdGVtZW50KG5vZGUpIHtcclxuICAgIHJldHVybiBuZXcgQ29tcGxldGlvblJlY29yZChcImJyZWFrXCIpO1xyXG4gIH1cclxuXHJcbiAgQ29udGludWVTdGF0ZW1lbnQobm9kZSkge1xyXG4gICAgcmV0dXJuIG5ldyBDb21wbGV0aW9uUmVjb3JkKFwiY29udGludWVcIik7XHJcbiAgfVxyXG5cclxuICBWYXJpYWJsZURlY2xhcmF0aW9uKG5vZGUpIHtcclxuICAgIC8vIGxvZyhub2RlKSDojrflj5booajovr7lvI/lo7DmmI7kvZNcclxuICAgIGxldCBydW5uaW5nRUMgPSB0aGlzLmVjc1t0aGlzLmVjcy5sZW5ndGggLSAxXTsgLy8g5Y+W5qCI6aG2XHJcbiAgICBydW5uaW5nRUMubGV4aWNhbEVudmlyb25tZW50LmFkZChub2RlLmNoaWxkcmVuWzFdLm5hbWUpO1xyXG4gICAgcmV0dXJuIG5ldyBDb21wbGV0aW9uUmVjb3JkKFwibm9ybWFsXCIsIG5ldyBKc1VuZGVmaW5lZCgpKTtcclxuICB9XHJcblxyXG4gIEV4cHJlc3Npb25TdGF0ZW1lbnQobm9kZSkge1xyXG4gICAgbGV0IHJlc3VsdCA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUmVmZXJlbmNlKSB7XHJcbiAgICAgIHJlc3VsdCA9IHJlc3VsdC5nZXQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuZXcgQ29tcGxldGlvblJlY29yZChcIm5vcm1hbFwiLCByZXN1bHQpO1xyXG4gIH1cclxuXHJcbiAgRXhwcmVzc2lvbihub2RlKSB7XHJcbiAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICB9XHJcblxyXG4gIEFkZGl0aXZlRXhwcmVzc2lvbihub2RlKSB7XHJcbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgIGxldCBsZWZ0ID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKSxcclxuICAgICAgICByaWdodCA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblsyXSk7XHJcbiAgICAgIGlmIChsZWZ0IGluc3RhbmNlb2YgUmVmZXJlbmNlKSBsZWZ0ID0gbGVmdC5nZXQoKTtcclxuICAgICAgaWYgKHJpZ2h0IGluc3RhbmNlb2YgUmVmZXJlbmNlKSByaWdodCA9IHJpZ2h0LmdldCgpO1xyXG5cclxuICAgICAgaWYgKG5vZGUuY2hpbGRyZW5bMV0udHlwZSA9PT0gXCIrXCIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEpzTnVtYmVyKGxlZnQudmFsdWUgKyByaWdodC52YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgICAgaWYgKG5vZGUuY2hpbGRyZW5bMV0udHlwZSA9PT0gXCItXCIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEpzTnVtYmVyKGxlZnQudmFsdWUgLSByaWdodC52YWx1ZSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIE11bHRpcGxpY2F0aXZlRXhwcmVzc2lvbihub2RlKSB7XHJcbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gICAgZWxzZSB7XHJcbiAgICAgIGxldCBsZWZ0ID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKSxcclxuICAgICAgICByaWdodCA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblsyXSk7XHJcbiAgICAgIGlmIChsZWZ0IGluc3RhbmNlb2YgUmVmZXJlbmNlKSBsZWZ0ID0gbGVmdC5nZXQoKTtcclxuICAgICAgaWYgKHJpZ2h0IGluc3RhbmNlb2YgUmVmZXJlbmNlKSByaWdodCA9IGxlZnQuZ2V0KCk7XHJcblxyXG4gICAgICBpZiAobm9kZS5jaGlsZHJlblsxXS50eXBlID09PSBcIipcIikge1xyXG4gICAgICAgIHJldHVybiBuZXcgSnNOdW1iZXIobGVmdC52YWx1ZSAqIHJpZ2h0LnZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAobm9kZS5jaGlsZHJlblsxXS50eXBlID09PSBcIi9cIikge1xyXG4gICAgICAgIHJldHVybiBuZXcgSnNOdW1iZXIobGVmdC52YWx1ZSAvIHJpZ2h0LnZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgUHJpbWFyeUV4cHJlc3Npb24obm9kZSkge1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAxKSByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICB9XHJcblxyXG4gIExpdGVyYWwobm9kZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgfVxyXG5cclxuICBOdW1lcmljTGl0ZXJhbChub2RlKSB7XHJcbiAgICBsZXQgc3RyID0gbm9kZS52YWx1ZSxcclxuICAgICAgbGVuID0gc3RyLmxlbmd0aCxcclxuICAgICAgdmFsdWUgPSAwLCAvLyDov5vliLZcclxuICAgICAgbiA9IDEwO1xyXG5cclxuICAgIGlmIChzdHIubWF0Y2goL14wYi8pKSB7XHJcbiAgICAgIG4gPSAyO1xyXG4gICAgICBsZW4gLT0gMjtcclxuICAgIH0gZWxzZSBpZiAoc3RyLm1hdGNoKC9eMG8vKSkge1xyXG4gICAgICBuID0gODtcclxuICAgICAgbGVuIC09IDI7XHJcbiAgICB9IGVsc2UgaWYgKHN0ci5tYXRjaCgvXjB4LykpIHtcclxuICAgICAgbiA9IDE2O1xyXG4gICAgICBsZW4gLT0gMjtcclxuICAgIH1cclxuXHJcbiAgICB3aGlsZSAobGVuLS0pIHtcclxuICAgICAgLy8g5aSE55CGIDE2IOi/m+WItlxyXG4gICAgICBsZXQgY2hhciA9IHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGggLSBsZW4gLSAxKTtcclxuICAgICAgaWYgKGNoYXIgPj0gXCJhXCIuY2hhckNvZGVBdCgwKSAmJiBjaGFyIDw9IFwiZlwiLmNoYXJDb2RlQXQoMCkpIHtcclxuICAgICAgICBjaGFyID0gY2hhciAtIFwiYVwiLmNoYXJDb2RlQXQoMCkgKyAxMDtcclxuICAgICAgfSBlbHNlIGlmIChjaGFyID49IFwiQVwiLmNoYXJDb2RlQXQoMCkgJiYgY2hhciA8PSBcIkZcIi5jaGFyQ29kZUF0KDApKSB7XHJcbiAgICAgICAgY2hhciA9IGNoYXIgLSBcIkFcIi5jaGFyQ29kZUF0KDApICsgMTA7XHJcbiAgICAgIH0gZWxzZSBpZiAoY2hhciA+PSBcIjBcIi5jaGFyQ29kZUF0KDApICYmIGNoYXIgPD0gXCI5XCIuY2hhckNvZGVBdCgwKSkge1xyXG4gICAgICAgIGNoYXIgLT0gXCIwXCIuY2hhckNvZGVBdCgwKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIG9yIHVuZXhwZWN0ZWQgdG9rZW5cIik7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIOWwhuaVsOWtl+Wtl+espui9rOaNouS4uuWFtuWvueW6lOeahOaVsOWtl+WAvFxyXG4gICAgICB2YWx1ZSA9IHZhbHVlICogbiArIGNoYXI7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ldyBKc051bWJlcihub2RlLnZhbHVlKTtcclxuICB9XHJcblxyXG4gIFN0cmluZ0xpdGVyYWwobm9kZSkge1xyXG4gICAgY29uc3QgcmVzdWx0ID0gW107XHJcbiAgICBjb25zb2xlLmxvZyhub2RlLnZhbHVlKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMSwgbGVuID0gbm9kZS52YWx1ZS5sZW5ndGggLSAxOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgc3dpdGNoIChub2RlLnZhbHVlW2ldKSB7XHJcbiAgICAgICAgY2FzZSBcIlxcXFxcIjpcclxuICAgICAgICAgICsraTtcclxuICAgICAgICAgIGNvbnN0IGNoYXIgPSBub2RlLnZhbHVlW2ldLFxyXG4gICAgICAgICAgICBlc2NhcGVDaGFyTWFwID0ge1xyXG4gICAgICAgICAgICAgIC8vIOm7mOiupOWkhOeQhiBCTVAg55qE5a2X56ym6ZuG77yIMDAwMCAtIGZmZmYgOiDkuIDkuKogdXRmLTE2IOeahOi1hOa6kO+8iVxyXG4gICAgICAgICAgICAgIG46IFN0cmluZy5mcm9tQ2hhckNvZGUoMHgwMDBhKSxcclxuICAgICAgICAgICAgICByOiBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MDAwZCksXHJcbiAgICAgICAgICAgICAgdDogU3RyaW5nLmZyb21DaGFyQ29kZSgweDAwMDkpLFxyXG4gICAgICAgICAgICAgIGI6IFN0cmluZy5mcm9tQ2hhckNvZGUoMHgwMDA4KSxcclxuICAgICAgICAgICAgICBmOiBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MDAwYyksXHJcbiAgICAgICAgICAgICAgdjogU3RyaW5nLmZyb21DaGFyQ29kZSgweDAwMGIpLFxyXG4gICAgICAgICAgICAgIDA6IFN0cmluZy5mcm9tQ2hhckNvZGUoMHgwMDAwKSxcclxuICAgICAgICAgICAgICBcIlxcXFxcIjogU3RyaW5nLmZyb21DaGFyQ29kZSgweDAwNWMpLFxyXG4gICAgICAgICAgICAgIFwiJ1wiOiBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MDAyNyksXHJcbiAgICAgICAgICAgICAgJ1wiJzogU3RyaW5nLmZyb21DaGFyQ29kZSgweDAwMjIpLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgaWYgKGNoYXIgaW4gZXNjYXBlQ2hhck1hcCkge1xyXG4gICAgICAgICAgICByZXN1bHQucHVzaChlc2NhcGVDaGFyTWFwW2NoYXJdKTtcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGNoYXIpO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgIHJlc3VsdC5wdXNoKG5vZGUudmFsdWVbaV0pO1xyXG4gICAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICByZXR1cm4gbmV3IEpzU3RyaW5nKHJlc3VsdCk7XHJcbiAgfVxyXG5cclxuICBPYmplY3RMaXRlcmFsKG5vZGUpIHtcclxuICAgIGNvbnN0IGxlbiA9IG5vZGUuY2hpbGRyZW4ubGVuZ3RoO1xyXG4gICAgaWYgKGxlbiA9PT0gMikge1xyXG4gICAgICByZXR1cm4ge307XHJcbiAgICB9XHJcbiAgICBpZiAobGVuID09PSAzKSB7XHJcbiAgICAgIGNvbnN0IG9iamVjdCA9IG5ldyBKc09iamVjdCgpOyAvLyBKcyDnmoTlr7nosaHmnKzotKjlsLHmmK/kuKTkuKrkuJzopb/vvJpwcm90b3R5cGUgcHJvcGVydHlcclxuICAgICAgdGhpcy5Qcm9wZXJ0eUxpc3Qobm9kZS5jaGlsZHJlblsxXSwgb2JqZWN0KTtcclxuICAgICAgLy8gb2JqZWN0LnByb3RvdHlwZSA9XHJcbiAgICAgIHJldHVybiBvYmplY3Q7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBQcm9wZXJ0eUxpc3Qobm9kZSwgb2JqZWN0KSB7XHJcbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHtcclxuICAgICAgdGhpcy5Qcm9wZXJ0eShub2RlLmNoaWxkcmVuWzBdLCBvYmplY3QpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5Qcm9wZXJ0eUxpc3Qobm9kZS5jaGlsZHJlblswXSwgb2JqZWN0KTtcclxuICAgICAgdGhpcy5Qcm9wZXJ0eShub2RlLmNoaWxkcmVuWzJdLCBvYmplY3QpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgUHJvcGVydHkobm9kZSwgb2JqZWN0KSB7XHJcbiAgICBsZXQgbmFtZTtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuWzBdLnR5cGUgPT09IFwiSWRlbnRpZmllclwiKSB7XHJcbiAgICAgIG5hbWUgPSBub2RlLmNoaWxkcmVuWzBdLm5hbWU7XHJcbiAgICB9IGVsc2UgaWYgKG5vZGUuY2hpbGRyZW5bMF0udHlwZSA9PT0gXCJTdHJpbmdMaXRlcmFsXCIpIHtcclxuICAgICAgbmFtZSA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgICB9XHJcbiAgICBvYmplY3Quc2V0UHJvcGVydHkobmFtZSwge1xyXG4gICAgICB2YWx1ZTogdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzJdKSxcclxuICAgICAgd3JpdGVhYmxlOiB0cnVlLFxyXG4gICAgICBlbnVtZXJhYmxlOiB0cnVlLFxyXG4gICAgICBjb25maWd1cmFibGU6IHRydWUsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIEFzc2lnbm1lbnRFeHByZXNzaW9uKG5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICAgIH1cclxuICAgIC8vIOWFiOaJp+ihjOW3pui+ueeahOihqOi+vuW8j++8jOeEtuWQjuaJp+ihjOWPs+i+ueeahOihqOi+vuW8j++8jOacgOWQjuWwhuWPs+i+ueeahOWAvOi1i+WAvOe7meW3pui+ueeahOWPmOmHj1xyXG4gICAgbGV0IGxlZnQgPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gICAgbGV0IHJpZ2h0ID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzJdKTtcclxuICAgIGxlZnQuc2V0KHJpZ2h0KTtcclxuICB9XHJcblxyXG4gIExvZ2ljYWxPUkV4cHJlc3Npb24obm9kZSkge1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAxKSByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICAgIGNvbnN0IHJlcyA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgICBpZiAocmVzLnZhbHVlKSByZXR1cm4gcmVzLnZhbHVlO1xyXG4gICAgaWYgKHJlcy50eXBlID09PSBcIm51bGxcIiB8fCByZXMucHJvcGVydHkgPT09IFwidW5kZWZpbmVkXCIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblsyXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzJdKTtcclxuICB9XHJcblxyXG4gIExvZ2ljYWxBTkRFeHByZXNzaW9uKG5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgICBjb25zdCByZXMgPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gICAgaWYgKCFyZXMudmFsdWUpIHJldHVybiByZXMudmFsdWU7XHJcbiAgICBpZiAocmVzLnR5cGUgPT09IFwibnVsbFwiKSByZXR1cm4gbnVsbDtcclxuICAgIGlmIChyZXMucHJvcGVydHkgPT09IFwidW5kZWZpbmVkXCIpIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzJdKTtcclxuICB9XHJcblxyXG4gIExlZnRIYW5kU2lkZUV4cHJlc3Npb24obm9kZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgfVxyXG5cclxuICBOZXdFeHByZXNzaW9uKG5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICAgIH1cclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICBsZXQgX2NsYXNzID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzFdKTtcclxuICAgICAgcmV0dXJuIF9jbGFzcy5jb25zdHJ1Y3RvcigpO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAqIGxldCBvYmplY3QgPSB0aGlzLnJlYWxtLk9iamVjdC5jb25zdHJ1Y3RvcigpLFxyXG4gICAgICogICBfY2xhc3MgPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMV0pLFxyXG4gICAgICogICByZXN1bHQgPSBfY2xhc3MuY2FsbChvYmplY3QpO1xyXG4gICAgICogaWYodHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIil7XHJcbiAgICAgKiAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgKiB9XHJcbiAgICAgKiByZXR1cm4gb2JqZWN0O1xyXG4gICAgICovXHJcbiAgfVxyXG5cclxuICBDYWxsRXhwcmVzc2lvbihub2RlKSB7XHJcbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgICB9XHJcbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDIpIHtcclxuICAgICAgbGV0IF9mdW5jdGlvbiA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSksXHJcbiAgICAgICAgX2FyZ3VtZW50cyA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblsxXSk7XHJcbiAgICAgIGlmIChfZnVuY3Rpb24gaW5zdGFuY2VvZiBSZWZlcmVuY2UpIHtcclxuICAgICAgICBfZnVuY3Rpb24gPSBfZnVuY3Rpb24uZ2V0KCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIF9mdW5jdGlvbi5jYWxsKF9hcmd1bWVudHMpO1xyXG4gICAgfVxyXG4gICAgLypcclxuICAgICAqIGxldCBvYmplY3QgPSB0aGlzLnJlYWxtLk9iamVjdC5jb25zdHJ1Y3RvcigpLFxyXG4gICAgICogICBfY2xhc3MgPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMV0pLFxyXG4gICAgICogICByZXN1bHQgPSBfY2xhc3MuY2FsbChvYmplY3QpO1xyXG4gICAgICogaWYodHlwZW9mIHJlc3VsdCA9PT0gXCJvYmplY3RcIil7XHJcbiAgICAgKiAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgKiB9XHJcbiAgICAgKiByZXR1cm4gb2JqZWN0O1xyXG4gICAgICovXHJcbiAgfVxyXG5cclxuICBNZW1iZXJFeHByZXNzaW9uKG5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICAgIH1cclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMykge1xyXG4gICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pLmdldCgpLFxyXG4gICAgICAgIHByb3AgPSByZXN1bHQucHJvcGVydGllcy5nZXQobm9kZS5jaGlsZHJlblsyXS5uYW1lKTtcclxuICAgICAgaWYgKFwidmFsdWVcIiBpbiBwcm9wKSByZXR1cm4gcHJvcC52YWx1ZTtcclxuICAgICAgaWYgKFwiZ2V0XCIgaW4gcHJvcCkgcmV0dXJuIHByb3AuZ2V0LmNhbGwocmVzdWx0KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIElkZW50aWZpZXIobm9kZSkge1xyXG4gICAgLy8g5bCG5Y+Y6YeP5a2Y5YKo5YiwIEV4ZWN1dGlvbkNvbnRleHRcclxuICAgIGxldCBydW5uaW5nRUMgPSB0aGlzLmVjc1t0aGlzLmVjcy5sZW5ndGggLSAxXTsgLy8g5Y+W5qCI6aG2XHJcbiAgICByZXR1cm4gbmV3IFJlZmVyZW5jZShydW5uaW5nRUMubGV4aWNhbEVudmlyb25tZW50LCBub2RlLm5hbWUpO1xyXG4gIH1cclxuXHJcbiAgQXJndW1lbnRzKG5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICByZXR1cm4gW107XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzFdKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEFyZ3VtZW50TGlzdChub2RlKSB7XHJcbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHtcclxuICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSZWZlcmVuY2UpIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0LmdldCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBbcmVzdWx0XTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGxldCByZXN1bHQgPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMl0pO1xyXG4gICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUmVmZXJlbmNlKSB7XHJcbiAgICAgICAgcmVzdWx0ID0gcmVzdWx0LmdldCgpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pLmNvbmNhdChyZXN1bHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQm9vbGVhbkxpdGVyYWwobm9kZSkge1xyXG4gICAgaWYgKG5vZGUudmFsdWUgPT09IFwidHJ1ZVwiKSB7XHJcbiAgICAgIHJldHVybiBuZXcgSnNCb29sZWFuKHRydWUpO1xyXG4gICAgfSBlbHNlIGlmIChub2RlLnZhbHVlID09PSBcImZhbHNlXCIpIHtcclxuICAgICAgcmV0dXJuIG5ldyBKc0Jvb2xlYW4oZmFsc2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgTnVsbExpdGVyYWwobm9kZSkge1xyXG4gICAgaWYgKHR5cGVvZiBub2RlLnZhbHVlID09PSBcIm9iamVjdFwiKSB7XHJcbiAgICAgIHJldHVybiBuZXcgSnNOdWxsKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBCbG9ja1N0YXRlbWVudChub2RlKSB7XHJcbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDIpIHJldHVybjtcclxuXHJcbiAgICBsZXQgcnVubmluZ0VDID0gdGhpcy5lY3NbdGhpcy5lY3MubGVuZ3RoIC0gMV0sXHJcbiAgICAgIGVjID0gbmV3IEV4ZWN1dGlvbkNvbnRleHQoXHJcbiAgICAgICAgcnVubmluZ0VDLnJlYWxtLFxyXG4gICAgICAgIG5ldyBFbnZpcm9ubWVudFJlY29yZChydW5uaW5nRUMubGV4aWNhbEVudmlyb25tZW50KSxcclxuICAgICAgICBydW5uaW5nRUMudmFyaWFibGVFbnZpcm9ubWVudFxyXG4gICAgICApO1xyXG4gICAgdGhpcy5lY3MucHVzaChlYyk7XHJcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzFdKTtcclxuICAgIHRoaXMuZWNzLnBvcCgpO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBGdW5jdGlvbkRlY2xhcmF0aW9uKG5vZGUpIHtcclxuICAgIGxldCBuYW1lID0gbm9kZS5jaGlsZHJlblsxXS5uYW1lLFxyXG4gICAgICBjb2RlID0gbm9kZS5jaGlsZHJlbltub2RlLmNoaWxkcmVuLmxlbmd0aCAtIDJdLFxyXG4gICAgICBmdW5jID0gbmV3IEpzT2JqZWN0KCk7XHJcblxyXG4gICAgZnVuYy5jYWxsID0gKGFyZ3MpID0+IHtcclxuICAgICAgbGV0IGVjID0gbmV3IEV4ZWN1dGlvbkNvbnRleHQoXHJcbiAgICAgICAgdGhpcy5yZWFsbSxcclxuICAgICAgICBuZXcgRW52aXJvbm1lbnRSZWNvcmQoZnVuYy5lbnZpcm9ubWVudCksXHJcbiAgICAgICAgbmV3IEVudmlyb25tZW50UmVjb3JkKGZ1bmMuZW52aXJvbm1lbnQpXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMuZWNzLnB1c2goZWMpO1xyXG4gICAgICB0aGlzLmV2YWx1YXRlKGNvZGUpO1xyXG4gICAgICB0aGlzLmVjcy5wb3AoKTtcclxuICAgIH07XHJcblxyXG4gICAgbGV0IHJ1bm5pbmdFQyA9IHRoaXMuZWNzW3RoaXMuZWNzLmxlbmd0aCAtIDFdO1xyXG4gICAgcnVubmluZ0VDLmxleGljYWxFbnZpcm9ubWVudC5hZGQobmFtZSk7XHJcbiAgICBydW5uaW5nRUMubGV4aWNhbEVudmlyb25tZW50LnNldChuYW1lLCBmdW5jKTtcclxuICAgIGZ1bmMuZW52aXJvbm1lbnQgPSBydW5uaW5nRUMubGV4aWNhbEVudmlyb25tZW50O1xyXG4gICAgcmV0dXJuIG5ldyBDb21wbGV0aW9uUmVjb3JkKFwibm9ybWFsXCIpO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/evaluator.js\n'
        );

        /***/
      },

    /***/ "./src/run.js":
      /*!********************!*\
  !*** ./src/run.js ***!
  \********************/
      /***/ (
        __unused_webpack_module,
        __webpack_exports__,
        __webpack_require__
      ) => {
        eval(
          '__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _SynctaxParser_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SynctaxParser.js */ "./src/SynctaxParser.js");\n/* harmony import */ var _evaluator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./evaluator.js */ "./src/evaluator.js");\n\r\n\r\n\r\ndocument.getElementById(\'btn\').addEventListener(\'click\', (event) => {\r\n  const r = new _evaluator_js__WEBPACK_IMPORTED_MODULE_1__.Evaluator().evaluate((0,_SynctaxParser_js__WEBPACK_IMPORTED_MODULE_0__.parse)(document.getElementById("sourceInp").value))\r\n  console.log(r)\r\n})\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcnVuLmpzIiwibWFwcGluZ3MiOiI7OztBQUF3QztBQUNBO0FBQ3hDO0FBQ0E7QUFDQSxnQkFBZ0Isb0RBQVMsWUFBWSx3REFBSztBQUMxQztBQUNBLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3lzY3JpcHQvLi9zcmMvcnVuLmpzP2M5OTAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtwYXJzZX0gZnJvbSAnLi9TeW5jdGF4UGFyc2VyLmpzJ1xyXG5pbXBvcnQge0V2YWx1YXRvcn0gZnJvbSAnLi9ldmFsdWF0b3IuanMnXHJcblxyXG5kb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICBjb25zdCByID0gbmV3IEV2YWx1YXRvcigpLmV2YWx1YXRlKHBhcnNlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic291cmNlSW5wXCIpLnZhbHVlKSlcclxuICBjb25zb2xlLmxvZyhyKVxyXG59KVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/run.js\n'
        );

        /***/
      },

    /***/ "./src/runtime.js":
      /*!************************!*\
  !*** ./src/runtime.js ***!
  \************************/
      /***/ (
        __unused_webpack_module,
        __webpack_exports__,
        __webpack_require__
      ) => {
        eval(
          "__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CompletionRecord: () => (/* binding */ CompletionRecord),\n/* harmony export */   EnvironmentRecord: () => (/* binding */ EnvironmentRecord),\n/* harmony export */   ExecutionContext: () => (/* binding */ ExecutionContext),\n/* harmony export */   JsBoolean: () => (/* binding */ JsBoolean),\n/* harmony export */   JsNull: () => (/* binding */ JsNull),\n/* harmony export */   JsNumber: () => (/* binding */ JsNumber),\n/* harmony export */   JsObject: () => (/* binding */ JsObject),\n/* harmony export */   JsString: () => (/* binding */ JsString),\n/* harmony export */   JsSymbol: () => (/* binding */ JsSymbol),\n/* harmony export */   JsUndefined: () => (/* binding */ JsUndefined),\n/* harmony export */   JsValue: () => (/* binding */ JsValue),\n/* harmony export */   ObjectEnvironmentRecord: () => (/* binding */ ObjectEnvironmentRecord),\n/* harmony export */   Realm: () => (/* binding */ Realm),\n/* harmony export */   Reference: () => (/* binding */ Reference)\n/* harmony export */ });\n// Js 将变量存储在 ExecutionContext 的上下文中\r\nclass ExecutionContext {\r\n  constructor(realm, lexicalEnvironment, variableEnvironment) {\r\n    variableEnvironment = variableEnvironment || lexicalEnvironment\r\n    this.lexicalEnvironment = lexicalEnvironment\r\n    this.variableEnvironment = variableEnvironment;\r\n    this.realm = realm; // 存储 Global Object Object.prototype\r\n  }\r\n}\r\n\r\nclass EnvironmentRecord {\r\n  constructor(outer) {\r\n    this.outer = outer; // 外层作用域\r\n    this.variables = new Map()\r\n  }\r\n\r\n  add(name) {\r\n    this.variables.set(name, new JsUndefined())\r\n  }\r\n\r\n  get(name) {\r\n    if (this.variables.get(name)) {\r\n      return this.variables.get(name)\r\n    } else if (this.outer) {\r\n      return this.outer.get(name)\r\n    } else {\r\n      return new JsUndefined()\r\n    }\r\n  }\r\n\r\n  set(name, value = new JsUndefined()) {\r\n    if (this.variables.get(name)) {\r\n      return this.variables.set(name, value)\r\n    } else if (this.outer) {\r\n      return this.outer.set(name, value)\r\n    } else {\r\n      return this.variables.set(name, value)\r\n    }\r\n  }\r\n}\r\n\r\nclass ObjectEnvironmentRecord {\r\n  constructor(object, outer) {\r\n    this.object = object;\r\n    this.outer = outer;\r\n  }\r\n\r\n  add(name) {\r\n    this.object.set(name, new JsUndefined())\r\n  }\r\n\r\n  get(name) {\r\n    return this.object.get(name)\r\n    // TODO with statement need outer\r\n  }\r\n\r\n  set(name, value = new JsUndefined()) {\r\n    this.object.set(name, value)\r\n    // TODO with statement need outer\r\n  }\r\n}\r\n\r\n// Js 运行时机制：所有的对象属性的访问都涉及到 reference（运行时类型）\r\n// 将变量名 上下文 值 通过一个对象进行存储\r\nclass Reference {\r\n  constructor(object, property) {\r\n    this.object = object;\r\n    this.property = property\r\n  }\r\n\r\n  set(value) {\r\n    this.object.set(this.property, value)\r\n  }\r\n\r\n  get() {\r\n    return this.object.get(this.property)\r\n  }\r\n}\r\n\r\nclass Realm {\r\n  constructor() {\r\n    this.global = new Map()\r\n    this.Object = new Map()\r\n    this.Object_prototype = new Map()\r\n    this.Object.call = function () {\r\n    }\r\n  }\r\n}\r\n\r\n// 为什么需要做类型转换？\r\n// 因为我们在做条件逻辑的时候依赖了底层的 if，这会导致一个问题就是：\r\n//  上下文可能是不一致的\r\nclass JsValue {\r\n  get type() {\r\n    if (this.constructor === JsNumber) {\r\n      return 'number';\r\n    }\r\n    if (this.constructor === JsString) {\r\n      return 'string';\r\n    }\r\n    if (this.constructor === JsBoolean) {\r\n      return 'boolean';\r\n    }\r\n    if (this.constructor === JsObject) {\r\n      return 'object';\r\n    }\r\n    if (this.constructor === JsNull) {\r\n      // if retrun \"object\" 那么行为就和 Javascript null 行为一样了\r\n      return 'null';\r\n    }\r\n    if (this.constructor === JsSymbol) {\r\n      return 'symbol';\r\n    }\r\n    return 'undefined'; // 默认 undefined 状态\r\n  }\r\n}\r\n\r\nclass JsNumber extends JsValue {\r\n  constructor(value) {\r\n    super();\r\n    this.memory = new ArrayBuffer(8)\r\n    if (arguments.length)\r\n      new Float64Array(this.memory)[0] = value;\r\n    else\r\n      new Float64Array(this.memory)[0] = 0;\r\n  }\r\n\r\n  get value() {\r\n    return new Float64Array(this.memory)[0];\r\n  }\r\n\r\n  toString() {\r\n    // TODO 10 进制: number to string\r\n  }\r\n\r\n  toNumber() {\r\n    return this;\r\n  }\r\n\r\n  toBoolean() {\r\n    if (new Float64Array(this.memory)[0] === 0) {\r\n      return new JsBoolean(false)\r\n    } else {\r\n      return new JsBoolean(true)\r\n    }\r\n  }\r\n\r\n  // toObject(){}\r\n}\r\n\r\nclass JsString extends JsValue {\r\n  constructor(characters) { // js 中的字符串 length 属性在创建时定义 不可以被修改\r\n    super();\r\n    // this.memory = new ArrayBuffer(characters.length * 2); // utf16\r\n    // 正确的应该是按照 utf-16 的方式进行存储\r\n    this.characters = characters;\r\n  }\r\n\r\n  toString() {\r\n    return this.characters;\r\n  }\r\n\r\n  toNumber() {\r\n    // TODO string to number\r\n  }\r\n\r\n  toBoolean() {\r\n    if (new Float64Array(this.memory)[0] === 0) {\r\n      return new JsBoolean(false)\r\n    } else {\r\n      return new JsBoolean(true)\r\n    }\r\n  }\r\n}\r\n\r\nclass JsBoolean extends JsValue {\r\n  constructor(value) {\r\n    super();\r\n    this.value = value || false;\r\n  }\r\n\r\n  toString() {\r\n    if (this.value) {\r\n      return new JsString(['t', 'r', 'u', 'e']);\r\n    }\r\n    return new JsString(['f', 'a', 'l', 's', 'e']);\r\n  }\r\n\r\n  toNumber() {\r\n    if (this.value) {\r\n      return new JsNumber(1);\r\n    }\r\n    return new JsNumber(0);\r\n  }\r\n\r\n  toBoolean() {\r\n    return this;\r\n  }\r\n}\r\n\r\nclass JsObject extends JsValue {\r\n  constructor(proto) {\r\n    super();\r\n    this.properties = new Map();\r\n    this.prototype = proto || null;\r\n  }\r\n\r\n  // Object 类型在处理时需要走原型链的逻辑\r\n  // 所以在 get 的时候，需要有原型链和 getter 执行的过程\r\n  get(name) {\r\n    // TODO prototype chain && getter\r\n    return this.getProperty(name).value\r\n  }\r\n\r\n  set(name, value) {\r\n    // TODO writeable etc.\r\n    this.setProperty(name, {\r\n      value: value,\r\n      enumerable: true,\r\n      configurable: true,\r\n      writeable: true\r\n    })\r\n  }\r\n\r\n  // 构建原型\r\n  setPrototype(proto) {\r\n    this.prototype = proto;\r\n  }\r\n\r\n  getPrototype() {\r\n    return this.prototype;\r\n  }\r\n\r\n  setProperty(name, attributes) {\r\n    this.properties.set(name, attributes);\r\n  }\r\n\r\n  getProperty(name) {\r\n    // TODO 原型链\r\n    return this.properties.get(name)\r\n  }\r\n}\r\n\r\nclass JsNull extends JsValue {\r\n  toNumber() {\r\n    return new JsNumber(0);\r\n  }\r\n\r\n  toString() {\r\n    return new JsString(['n', 'u', 'l', 'l']);\r\n  }\r\n\r\n  toBoolean() {\r\n    return new JsBoolean(false)\r\n  }\r\n}\r\n\r\nclass JsUndefined extends JsValue {\r\n  toNumber() {\r\n    return new JsNumber(NaN);\r\n  }\r\n\r\n  toString() {\r\n    return new JsString(['u', 'n', 'd', 'e', 'f', 'i', 'n', 'e', 'd']);\r\n  }\r\n\r\n  toBoolean() {\r\n    return new JsBoolean(false)\r\n  }\r\n}\r\n\r\nclass JsSymbol extends JsValue {\r\n  constructor(name) {\r\n    super();\r\n    this.name = name || '';\r\n  }\r\n}\r\n\r\nclass CompletionRecord {\r\n  constructor(type, value, target) {\r\n    this.type = type || 'normal';\r\n    this.value = value || new JsUndefined;\r\n    this.target = target || null;\r\n  }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcnVudGltZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QjtBQUN4QjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esd0JBQXdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLDRCQUE0QjtBQUM1QjtBQUNBLDZEQUE2RDtBQUM3RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RveXNjcmlwdC8uL3NyYy9ydW50aW1lLmpzP2FlZmUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSnMg5bCG5Y+Y6YeP5a2Y5YKo5ZyoIEV4ZWN1dGlvbkNvbnRleHQg55qE5LiK5LiL5paH5LitXHJcbmV4cG9ydCBjbGFzcyBFeGVjdXRpb25Db250ZXh0IHtcclxuICBjb25zdHJ1Y3RvcihyZWFsbSwgbGV4aWNhbEVudmlyb25tZW50LCB2YXJpYWJsZUVudmlyb25tZW50KSB7XHJcbiAgICB2YXJpYWJsZUVudmlyb25tZW50ID0gdmFyaWFibGVFbnZpcm9ubWVudCB8fCBsZXhpY2FsRW52aXJvbm1lbnRcclxuICAgIHRoaXMubGV4aWNhbEVudmlyb25tZW50ID0gbGV4aWNhbEVudmlyb25tZW50XHJcbiAgICB0aGlzLnZhcmlhYmxlRW52aXJvbm1lbnQgPSB2YXJpYWJsZUVudmlyb25tZW50O1xyXG4gICAgdGhpcy5yZWFsbSA9IHJlYWxtOyAvLyDlrZjlgqggR2xvYmFsIE9iamVjdCBPYmplY3QucHJvdG90eXBlXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRW52aXJvbm1lbnRSZWNvcmQge1xyXG4gIGNvbnN0cnVjdG9yKG91dGVyKSB7XHJcbiAgICB0aGlzLm91dGVyID0gb3V0ZXI7IC8vIOWkluWxguS9nOeUqOWfn1xyXG4gICAgdGhpcy52YXJpYWJsZXMgPSBuZXcgTWFwKClcclxuICB9XHJcblxyXG4gIGFkZChuYW1lKSB7XHJcbiAgICB0aGlzLnZhcmlhYmxlcy5zZXQobmFtZSwgbmV3IEpzVW5kZWZpbmVkKCkpXHJcbiAgfVxyXG5cclxuICBnZXQobmFtZSkge1xyXG4gICAgaWYgKHRoaXMudmFyaWFibGVzLmdldChuYW1lKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy52YXJpYWJsZXMuZ2V0KG5hbWUpXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMub3V0ZXIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMub3V0ZXIuZ2V0KG5hbWUpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbmV3IEpzVW5kZWZpbmVkKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldChuYW1lLCB2YWx1ZSA9IG5ldyBKc1VuZGVmaW5lZCgpKSB7XHJcbiAgICBpZiAodGhpcy52YXJpYWJsZXMuZ2V0KG5hbWUpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnZhcmlhYmxlcy5zZXQobmFtZSwgdmFsdWUpXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMub3V0ZXIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMub3V0ZXIuc2V0KG5hbWUsIHZhbHVlKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMudmFyaWFibGVzLnNldChuYW1lLCB2YWx1ZSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPYmplY3RFbnZpcm9ubWVudFJlY29yZCB7XHJcbiAgY29uc3RydWN0b3Iob2JqZWN0LCBvdXRlcikge1xyXG4gICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgICB0aGlzLm91dGVyID0gb3V0ZXI7XHJcbiAgfVxyXG5cclxuICBhZGQobmFtZSkge1xyXG4gICAgdGhpcy5vYmplY3Quc2V0KG5hbWUsIG5ldyBKc1VuZGVmaW5lZCgpKVxyXG4gIH1cclxuXHJcbiAgZ2V0KG5hbWUpIHtcclxuICAgIHJldHVybiB0aGlzLm9iamVjdC5nZXQobmFtZSlcclxuICAgIC8vIFRPRE8gd2l0aCBzdGF0ZW1lbnQgbmVlZCBvdXRlclxyXG4gIH1cclxuXHJcbiAgc2V0KG5hbWUsIHZhbHVlID0gbmV3IEpzVW5kZWZpbmVkKCkpIHtcclxuICAgIHRoaXMub2JqZWN0LnNldChuYW1lLCB2YWx1ZSlcclxuICAgIC8vIFRPRE8gd2l0aCBzdGF0ZW1lbnQgbmVlZCBvdXRlclxyXG4gIH1cclxufVxyXG5cclxuLy8gSnMg6L+Q6KGM5pe25py65Yi277ya5omA5pyJ55qE5a+56LGh5bGe5oCn55qE6K6/6Zeu6YO95raJ5Y+K5YiwIHJlZmVyZW5jZe+8iOi/kOihjOaXtuexu+Wei++8iVxyXG4vLyDlsIblj5jph4/lkI0g5LiK5LiL5paHIOWAvCDpgJrov4fkuIDkuKrlr7nosaHov5vooYzlrZjlgqhcclxuZXhwb3J0IGNsYXNzIFJlZmVyZW5jZSB7XHJcbiAgY29uc3RydWN0b3Iob2JqZWN0LCBwcm9wZXJ0eSkge1xyXG4gICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgICB0aGlzLnByb3BlcnR5ID0gcHJvcGVydHlcclxuICB9XHJcblxyXG4gIHNldCh2YWx1ZSkge1xyXG4gICAgdGhpcy5vYmplY3Quc2V0KHRoaXMucHJvcGVydHksIHZhbHVlKVxyXG4gIH1cclxuXHJcbiAgZ2V0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmdldCh0aGlzLnByb3BlcnR5KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJlYWxtIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZ2xvYmFsID0gbmV3IE1hcCgpXHJcbiAgICB0aGlzLk9iamVjdCA9IG5ldyBNYXAoKVxyXG4gICAgdGhpcy5PYmplY3RfcHJvdG90eXBlID0gbmV3IE1hcCgpXHJcbiAgICB0aGlzLk9iamVjdC5jYWxsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8g5Li65LuA5LmI6ZyA6KaB5YGa57G75Z6L6L2s5o2i77yfXHJcbi8vIOWboOS4uuaIkeS7rOWcqOWBmuadoeS7tumAu+i+keeahOaXtuWAmeS+nei1luS6huW6leWxgueahCBpZu+8jOi/meS8muWvvOiHtOS4gOS4qumXrumimOWwseaYr++8mlxyXG4vLyAg5LiK5LiL5paH5Y+v6IO95piv5LiN5LiA6Ie055qEXHJcbmV4cG9ydCBjbGFzcyBKc1ZhbHVlIHtcclxuICBnZXQgdHlwZSgpIHtcclxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBKc051bWJlcikge1xyXG4gICAgICByZXR1cm4gJ251bWJlcic7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3RvciA9PT0gSnNTdHJpbmcpIHtcclxuICAgICAgcmV0dXJuICdzdHJpbmcnO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IEpzQm9vbGVhbikge1xyXG4gICAgICByZXR1cm4gJ2Jvb2xlYW4nO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IEpzT2JqZWN0KSB7XHJcbiAgICAgIHJldHVybiAnb2JqZWN0JztcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBKc051bGwpIHtcclxuICAgICAgLy8gaWYgcmV0cnVuIFwib2JqZWN0XCIg6YKj5LmI6KGM5Li65bCx5ZKMIEphdmFzY3JpcHQgbnVsbCDooYzkuLrkuIDmoLfkuoZcclxuICAgICAgcmV0dXJuICdudWxsJztcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBKc1N5bWJvbCkge1xyXG4gICAgICByZXR1cm4gJ3N5bWJvbCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3VuZGVmaW5lZCc7IC8vIOm7mOiupCB1bmRlZmluZWQg54q25oCBXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSnNOdW1iZXIgZXh0ZW5kcyBKc1ZhbHVlIHtcclxuICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMubWVtb3J5ID0gbmV3IEFycmF5QnVmZmVyKDgpXHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aClcclxuICAgICAgbmV3IEZsb2F0NjRBcnJheSh0aGlzLm1lbW9yeSlbMF0gPSB2YWx1ZTtcclxuICAgIGVsc2VcclxuICAgICAgbmV3IEZsb2F0NjRBcnJheSh0aGlzLm1lbW9yeSlbMF0gPSAwO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHZhbHVlKCkge1xyXG4gICAgcmV0dXJuIG5ldyBGbG9hdDY0QXJyYXkodGhpcy5tZW1vcnkpWzBdO1xyXG4gIH1cclxuXHJcbiAgdG9TdHJpbmcoKSB7XHJcbiAgICAvLyBUT0RPIDEwIOi/m+WItjogbnVtYmVyIHRvIHN0cmluZ1xyXG4gIH1cclxuXHJcbiAgdG9OdW1iZXIoKSB7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHRvQm9vbGVhbigpIHtcclxuICAgIGlmIChuZXcgRmxvYXQ2NEFycmF5KHRoaXMubWVtb3J5KVswXSA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbmV3IEpzQm9vbGVhbihmYWxzZSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBuZXcgSnNCb29sZWFuKHRydWUpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyB0b09iamVjdCgpe31cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEpzU3RyaW5nIGV4dGVuZHMgSnNWYWx1ZSB7XHJcbiAgY29uc3RydWN0b3IoY2hhcmFjdGVycykgeyAvLyBqcyDkuK3nmoTlrZfnrKbkuLIgbGVuZ3RoIOWxnuaAp+WcqOWIm+W7uuaXtuWumuS5iSDkuI3lj6/ku6Xooqvkv67mlLlcclxuICAgIHN1cGVyKCk7XHJcbiAgICAvLyB0aGlzLm1lbW9yeSA9IG5ldyBBcnJheUJ1ZmZlcihjaGFyYWN0ZXJzLmxlbmd0aCAqIDIpOyAvLyB1dGYxNlxyXG4gICAgLy8g5q2j56Gu55qE5bqU6K+l5piv5oyJ54WnIHV0Zi0xNiDnmoTmlrnlvI/ov5vooYzlrZjlgqhcclxuICAgIHRoaXMuY2hhcmFjdGVycyA9IGNoYXJhY3RlcnM7XHJcbiAgfVxyXG5cclxuICB0b1N0cmluZygpIHtcclxuICAgIHJldHVybiB0aGlzLmNoYXJhY3RlcnM7XHJcbiAgfVxyXG5cclxuICB0b051bWJlcigpIHtcclxuICAgIC8vIFRPRE8gc3RyaW5nIHRvIG51bWJlclxyXG4gIH1cclxuXHJcbiAgdG9Cb29sZWFuKCkge1xyXG4gICAgaWYgKG5ldyBGbG9hdDY0QXJyYXkodGhpcy5tZW1vcnkpWzBdID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBuZXcgSnNCb29sZWFuKGZhbHNlKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG5ldyBKc0Jvb2xlYW4odHJ1ZSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBKc0Jvb2xlYW4gZXh0ZW5kcyBKc1ZhbHVlIHtcclxuICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZSB8fCBmYWxzZTtcclxuICB9XHJcblxyXG4gIHRvU3RyaW5nKCkge1xyXG4gICAgaWYgKHRoaXMudmFsdWUpIHtcclxuICAgICAgcmV0dXJuIG5ldyBKc1N0cmluZyhbJ3QnLCAncicsICd1JywgJ2UnXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IEpzU3RyaW5nKFsnZicsICdhJywgJ2wnLCAncycsICdlJ10pO1xyXG4gIH1cclxuXHJcbiAgdG9OdW1iZXIoKSB7XHJcbiAgICBpZiAodGhpcy52YWx1ZSkge1xyXG4gICAgICByZXR1cm4gbmV3IEpzTnVtYmVyKDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBKc051bWJlcigwKTtcclxuICB9XHJcblxyXG4gIHRvQm9vbGVhbigpIHtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEpzT2JqZWN0IGV4dGVuZHMgSnNWYWx1ZSB7XHJcbiAgY29uc3RydWN0b3IocHJvdG8pIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnByb3BlcnRpZXMgPSBuZXcgTWFwKCk7XHJcbiAgICB0aGlzLnByb3RvdHlwZSA9IHByb3RvIHx8IG51bGw7XHJcbiAgfVxyXG5cclxuICAvLyBPYmplY3Qg57G75Z6L5Zyo5aSE55CG5pe26ZyA6KaB6LWw5Y6f5Z6L6ZO+55qE6YC76L6RXHJcbiAgLy8g5omA5Lul5ZyoIGdldCDnmoTml7blgJnvvIzpnIDopoHmnInljp/lnovpk77lkowgZ2V0dGVyIOaJp+ihjOeahOi/h+eoi1xyXG4gIGdldChuYW1lKSB7XHJcbiAgICAvLyBUT0RPIHByb3RvdHlwZSBjaGFpbiAmJiBnZXR0ZXJcclxuICAgIHJldHVybiB0aGlzLmdldFByb3BlcnR5KG5hbWUpLnZhbHVlXHJcbiAgfVxyXG5cclxuICBzZXQobmFtZSwgdmFsdWUpIHtcclxuICAgIC8vIFRPRE8gd3JpdGVhYmxlIGV0Yy5cclxuICAgIHRoaXMuc2V0UHJvcGVydHkobmFtZSwge1xyXG4gICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgd3JpdGVhYmxlOiB0cnVlXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8g5p6E5bu65Y6f5Z6LXHJcbiAgc2V0UHJvdG90eXBlKHByb3RvKSB7XHJcbiAgICB0aGlzLnByb3RvdHlwZSA9IHByb3RvO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJvdG90eXBlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucHJvdG90eXBlO1xyXG4gIH1cclxuXHJcbiAgc2V0UHJvcGVydHkobmFtZSwgYXR0cmlidXRlcykge1xyXG4gICAgdGhpcy5wcm9wZXJ0aWVzLnNldChuYW1lLCBhdHRyaWJ1dGVzKTtcclxuICB9XHJcblxyXG4gIGdldFByb3BlcnR5KG5hbWUpIHtcclxuICAgIC8vIFRPRE8g5Y6f5Z6L6ZO+XHJcbiAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldChuYW1lKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEpzTnVsbCBleHRlbmRzIEpzVmFsdWUge1xyXG4gIHRvTnVtYmVyKCkge1xyXG4gICAgcmV0dXJuIG5ldyBKc051bWJlcigwKTtcclxuICB9XHJcblxyXG4gIHRvU3RyaW5nKCkge1xyXG4gICAgcmV0dXJuIG5ldyBKc1N0cmluZyhbJ24nLCAndScsICdsJywgJ2wnXSk7XHJcbiAgfVxyXG5cclxuICB0b0Jvb2xlYW4oKSB7XHJcbiAgICByZXR1cm4gbmV3IEpzQm9vbGVhbihmYWxzZSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBKc1VuZGVmaW5lZCBleHRlbmRzIEpzVmFsdWUge1xyXG4gIHRvTnVtYmVyKCkge1xyXG4gICAgcmV0dXJuIG5ldyBKc051bWJlcihOYU4pO1xyXG4gIH1cclxuXHJcbiAgdG9TdHJpbmcoKSB7XHJcbiAgICByZXR1cm4gbmV3IEpzU3RyaW5nKFsndScsICduJywgJ2QnLCAnZScsICdmJywgJ2knLCAnbicsICdlJywgJ2QnXSk7XHJcbiAgfVxyXG5cclxuICB0b0Jvb2xlYW4oKSB7XHJcbiAgICByZXR1cm4gbmV3IEpzQm9vbGVhbihmYWxzZSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBKc1N5bWJvbCBleHRlbmRzIEpzVmFsdWUge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lIHx8ICcnO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbXBsZXRpb25SZWNvcmQge1xyXG4gIGNvbnN0cnVjdG9yKHR5cGUsIHZhbHVlLCB0YXJnZXQpIHtcclxuICAgIHRoaXMudHlwZSA9IHR5cGUgfHwgJ25vcm1hbCc7XHJcbiAgICB0aGlzLnZhbHVlID0gdmFsdWUgfHwgbmV3IEpzVW5kZWZpbmVkO1xyXG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXQgfHwgbnVsbDtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/runtime.js\n"
        );

        /***/
      },

    /******/
  };
  /************************************************************************/
  /******/ // The module cache
  /******/ var __webpack_module_cache__ = {};
  /******/
  /******/ // The require function
  /******/ function __webpack_require__(moduleId) {
    /******/ // Check if module is in cache
    /******/ var cachedModule = __webpack_module_cache__[moduleId];
    /******/ if (cachedModule !== undefined) {
      /******/ return cachedModule.exports;
      /******/
    }
    /******/ // Create a new module (and put it into the cache)
    /******/ var module = (__webpack_module_cache__[moduleId] = {
      /******/ // no module.id needed
      /******/ // no module.loaded needed
      /******/ exports: {},
      /******/
    });
    /******/
    /******/ // Execute the module function
    /******/ __webpack_modules__[moduleId](
      module,
      module.exports,
      __webpack_require__
    );
    /******/
    /******/ // Return the exports of the module
    /******/ return module.exports;
    /******/
  }
  /******/
  /************************************************************************/
  /******/ /* webpack/runtime/define property getters */
  /******/ (() => {
    /******/ // define getter functions for harmony exports
    /******/ __webpack_require__.d = (exports, definition) => {
      /******/ for (var key in definition) {
        /******/ if (
          __webpack_require__.o(definition, key) &&
          !__webpack_require__.o(exports, key)
        ) {
          /******/ Object.defineProperty(exports, key, {
            enumerable: true,
            get: definition[key],
          });
          /******/
        }
        /******/
      }
      /******/
    };
    /******/
  })();
  /******/
  /******/ /* webpack/runtime/hasOwnProperty shorthand */
  /******/ (() => {
    /******/ __webpack_require__.o = (obj, prop) =>
      Object.prototype.hasOwnProperty.call(obj, prop);
    /******/
  })();
  /******/
  /******/ /* webpack/runtime/make namespace object */
  /******/ (() => {
    /******/ // define __esModule on exports
    /******/ __webpack_require__.r = (exports) => {
      /******/ if (typeof Symbol !== "undefined" && Symbol.toStringTag) {
        /******/ Object.defineProperty(exports, Symbol.toStringTag, {
          value: "Module",
        });
        /******/
      }
      /******/ Object.defineProperty(exports, "__esModule", { value: true });
      /******/
    };
    /******/
  })();
  /******/
  /************************************************************************/
  /******/
  /******/ // startup
  /******/ // Load entry module and return exports
  /******/ // This entry module can't be inlined because the eval-source-map devtool is used.
  /******/ var __webpack_exports__ = __webpack_require__("./src/run.js");
  /******/
  /******/
})();
