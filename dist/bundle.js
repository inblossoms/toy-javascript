/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/LexParser.js":
/*!**************************!*\
  !*** ./src/LexParser.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   scan: () => (/* binding */ scan)\n/* harmony export */ });\nclass XRegExp {\r\n  constructor(source, flag, root = \"root\") {\r\n    this.table = new Map();\r\n    this.regexp = new RegExp(this.compileRegExp(source, root, 0).source, flag);\r\n  }\r\n\r\n  exec(str) {\r\n    let reg = this.regexp.exec(str);\r\n    for (let i = 0, len = reg.length; i < len; i++) {\r\n      if (reg[i] !== void 0) {\r\n        reg[this.table.get(i - 1)] = reg[i];\r\n        // console.log(this.table.get(i));\r\n      }\r\n    }\r\n    return reg;\r\n  }\r\n\r\n  get lastIndex() {\r\n    return this.regexp.lastIndexst;\r\n  }\r\n\r\n  set lastIndex(value) {\r\n    this.regexp.lastIndex = value;\r\n  }\r\n\r\n  compileRegExp(source, literal, start) {\r\n    if (source[literal] instanceof RegExp)\r\n      return {\r\n        source: source[literal].source,\r\n        length: 0,\r\n      };\r\n\r\n    // 通过 length 计算每一个词法规则可以在 tabel 表中被找到\r\n    let length = 0;\r\n    let regexp = source[literal].replace(/\\<([^>]+)\\>/g, (str, $1) => {\r\n      this.table.set(start + length, $1);\r\n      // this.table.set($1, start + length)\r\n\r\n      ++length;\r\n      let reg = this.compileRegExp(source, $1, start + length);\r\n      length += reg.length;\r\n\r\n      return \"(\" + reg.source + \")\";\r\n    });\r\n\r\n    return {\r\n      source: regexp,\r\n      length: length,\r\n    };\r\n  }\r\n}\r\n\r\n// Keywords 一定在 Identifer 之前，因为 Identifer 可能包含关键字\r\nlet reg = new XRegExp(\r\n  {\r\n    InputElement: \"<Whitespace>|<LineTerminator>|<Comments>|<Token>\",\r\n    Whitespace: / /,\r\n    LineTerminator: /\\n/,\r\n    Comments: /\\/\\*(?:[^*]|\\*[^\\/])*\\*\\/|\\/\\/[^\\n]*/,\r\n    Token: \"<Literal>|<Keywords>|<Identifier>|<Punctuator>\",\r\n    Literal: \"<NumericLiteral>|<BooleanLiteral>|<StringLiteral>|<NullLiteral>\",\r\n    NumericLiteral:\r\n      /0o[0-7]+|0x[0-9a-fA-F]+|0b[01]+|(?:[1-9][0-9]*|0)(?:\\.[0-9]*)?|\\.[0-9]+/,\r\n    StringLiteral: /\\\"(?:[^\"\\n]|\\\\[\\s\\S])*\\\"|\\'(?:[^'\\n]|\\\\[\\s\\S])*\\'/,\r\n    BooleanLiteral: /true|false/,\r\n    NullLiteral: /null/,\r\n    Punctuator:\r\n      /\\|\\||\\&\\&|\\=\\=|\\=\\>|\\+\\+|\\-\\-|\\-|\\+|\\:|\\(|\\=|\\<|\\>|\\]|\\[|\\*|\\)|\\{|\\}|\\?|\\.|;|\\/|\\'|\\\"|\\,/,\r\n    Keywords:\r\n      /let|const|var|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|this|throw|try|typeof|void|while|with|yield/,\r\n    Identifier: /[a-zA-Z_$][a-zA-Z0-9_$]*/,\r\n  },\r\n  \"g\",\r\n  \"InputElement\"\r\n);\r\n\r\nfunction* scan(str) {\r\n  reg.regexp.lastIndex = 0;\r\n  while (reg.regexp.lastIndex < str.length) {\r\n    let r = reg.exec(str);\r\n\r\n    if (r.Whitespace) {\r\n    } else if (r.LineTerminator) {\r\n    } else if (r.Comments) {\r\n    } else if (r.NumericLiteral) {\r\n      yield {\r\n        type: \"NumericLiteral\",\r\n        value: r[0],\r\n      };\r\n    } else if (r.StringLiteral) {\r\n      yield {\r\n        type: \"StringLiteral\",\r\n        value: r[0],\r\n      };\r\n    } else if (r.BooleanLiteral) {\r\n      yield {\r\n        type: \"BooleanLiteral\",\r\n        value: r[0],\r\n      };\r\n    } else if (r.NullLiteral) {\r\n      yield {\r\n        type: \"NullLiteral\",\r\n        value: null,\r\n      };\r\n    } else if (r.Identifier) {\r\n      yield {\r\n        type: \"Identifier\",\r\n        name: r[0],\r\n      };\r\n    } else if (!r.Keywords) {\r\n      if (r.Punctuator) {\r\n        yield {\r\n          type: r[0],\r\n        };\r\n      } else {\r\n        throw new Error(\"unexpected token: \" + r[0]);\r\n      }\r\n    } else {\r\n      yield {\r\n        type: r[0],\r\n      };\r\n    }\r\n\r\n    // console.log(JSON.stringify(r[0]));\r\n    // document.write(r[0]);\r\n    if (!r[0].length) break;\r\n  }\r\n\r\n  yield {\r\n    type: \"EOF\",\r\n  };\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvTGV4UGFyc2VyLmpzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3lzY3JpcHQvLi9zcmMvTGV4UGFyc2VyLmpzP2JkNDEiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgWFJlZ0V4cCB7XHJcbiAgY29uc3RydWN0b3Ioc291cmNlLCBmbGFnLCByb290ID0gXCJyb290XCIpIHtcclxuICAgIHRoaXMudGFibGUgPSBuZXcgTWFwKCk7XHJcbiAgICB0aGlzLnJlZ2V4cCA9IG5ldyBSZWdFeHAodGhpcy5jb21waWxlUmVnRXhwKHNvdXJjZSwgcm9vdCwgMCkuc291cmNlLCBmbGFnKTtcclxuICB9XHJcblxyXG4gIGV4ZWMoc3RyKSB7XHJcbiAgICBsZXQgcmVnID0gdGhpcy5yZWdleHAuZXhlYyhzdHIpO1xyXG4gICAgZm9yIChsZXQgaSA9IDAsIGxlbiA9IHJlZy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBpZiAocmVnW2ldICE9PSB2b2lkIDApIHtcclxuICAgICAgICByZWdbdGhpcy50YWJsZS5nZXQoaSAtIDEpXSA9IHJlZ1tpXTtcclxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnRhYmxlLmdldChpKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiByZWc7XHJcbiAgfVxyXG5cclxuICBnZXQgbGFzdEluZGV4KCkge1xyXG4gICAgcmV0dXJuIHRoaXMucmVnZXhwLmxhc3RJbmRleHN0O1xyXG4gIH1cclxuXHJcbiAgc2V0IGxhc3RJbmRleCh2YWx1ZSkge1xyXG4gICAgdGhpcy5yZWdleHAubGFzdEluZGV4ID0gdmFsdWU7XHJcbiAgfVxyXG5cclxuICBjb21waWxlUmVnRXhwKHNvdXJjZSwgbGl0ZXJhbCwgc3RhcnQpIHtcclxuICAgIGlmIChzb3VyY2VbbGl0ZXJhbF0gaW5zdGFuY2VvZiBSZWdFeHApXHJcbiAgICAgIHJldHVybiB7XHJcbiAgICAgICAgc291cmNlOiBzb3VyY2VbbGl0ZXJhbF0uc291cmNlLFxyXG4gICAgICAgIGxlbmd0aDogMCxcclxuICAgICAgfTtcclxuXHJcbiAgICAvLyDpgJrov4cgbGVuZ3RoIOiuoeeul+avj+S4gOS4quivjeazleinhOWImeWPr+S7peWcqCB0YWJlbCDooajkuK3ooqvmib7liLBcclxuICAgIGxldCBsZW5ndGggPSAwO1xyXG4gICAgbGV0IHJlZ2V4cCA9IHNvdXJjZVtsaXRlcmFsXS5yZXBsYWNlKC9cXDwoW14+XSspXFw+L2csIChzdHIsICQxKSA9PiB7XHJcbiAgICAgIHRoaXMudGFibGUuc2V0KHN0YXJ0ICsgbGVuZ3RoLCAkMSk7XHJcbiAgICAgIC8vIHRoaXMudGFibGUuc2V0KCQxLCBzdGFydCArIGxlbmd0aClcclxuXHJcbiAgICAgICsrbGVuZ3RoO1xyXG4gICAgICBsZXQgcmVnID0gdGhpcy5jb21waWxlUmVnRXhwKHNvdXJjZSwgJDEsIHN0YXJ0ICsgbGVuZ3RoKTtcclxuICAgICAgbGVuZ3RoICs9IHJlZy5sZW5ndGg7XHJcblxyXG4gICAgICByZXR1cm4gXCIoXCIgKyByZWcuc291cmNlICsgXCIpXCI7XHJcbiAgICB9KTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBzb3VyY2U6IHJlZ2V4cCxcclxuICAgICAgbGVuZ3RoOiBsZW5ndGgsXHJcbiAgICB9O1xyXG4gIH1cclxufVxyXG5cclxuLy8gS2V5d29yZHMg5LiA5a6a5ZyoIElkZW50aWZlciDkuYvliY3vvIzlm6DkuLogSWRlbnRpZmVyIOWPr+iDveWMheWQq+WFs+mUruWtl1xyXG5sZXQgcmVnID0gbmV3IFhSZWdFeHAoXHJcbiAge1xyXG4gICAgSW5wdXRFbGVtZW50OiBcIjxXaGl0ZXNwYWNlPnw8TGluZVRlcm1pbmF0b3I+fDxDb21tZW50cz58PFRva2VuPlwiLFxyXG4gICAgV2hpdGVzcGFjZTogLyAvLFxyXG4gICAgTGluZVRlcm1pbmF0b3I6IC9cXG4vLFxyXG4gICAgQ29tbWVudHM6IC9cXC9cXCooPzpbXipdfFxcKlteXFwvXSkqXFwqXFwvfFxcL1xcL1teXFxuXSovLFxyXG4gICAgVG9rZW46IFwiPExpdGVyYWw+fDxLZXl3b3Jkcz58PElkZW50aWZpZXI+fDxQdW5jdHVhdG9yPlwiLFxyXG4gICAgTGl0ZXJhbDogXCI8TnVtZXJpY0xpdGVyYWw+fDxCb29sZWFuTGl0ZXJhbD58PFN0cmluZ0xpdGVyYWw+fDxOdWxsTGl0ZXJhbD5cIixcclxuICAgIE51bWVyaWNMaXRlcmFsOlxyXG4gICAgICAvMG9bMC03XSt8MHhbMC05YS1mQS1GXSt8MGJbMDFdK3woPzpbMS05XVswLTldKnwwKSg/OlxcLlswLTldKik/fFxcLlswLTldKy8sXHJcbiAgICBTdHJpbmdMaXRlcmFsOiAvXFxcIig/OlteXCJcXG5dfFxcXFxbXFxzXFxTXSkqXFxcInxcXCcoPzpbXidcXG5dfFxcXFxbXFxzXFxTXSkqXFwnLyxcclxuICAgIEJvb2xlYW5MaXRlcmFsOiAvdHJ1ZXxmYWxzZS8sXHJcbiAgICBOdWxsTGl0ZXJhbDogL251bGwvLFxyXG4gICAgUHVuY3R1YXRvcjpcclxuICAgICAgL1xcfFxcfHxcXCZcXCZ8XFw9XFw9fFxcPVxcPnxcXCtcXCt8XFwtXFwtfFxcLXxcXCt8XFw6fFxcKHxcXD18XFw8fFxcPnxcXF18XFxbfFxcKnxcXCl8XFx7fFxcfXxcXD98XFwufDt8XFwvfFxcJ3xcXFwifFxcLC8sXHJcbiAgICBLZXl3b3JkczpcclxuICAgICAgL2xldHxjb25zdHx2YXJ8YnJlYWt8Y2FzZXxjYXRjaHxjb250aW51ZXxkZWZhdWx0fGRlbGV0ZXxkb3xlbHNlfGZpbmFsbHl8Zm9yfGZ1bmN0aW9ufGlmfGlufGluc3RhbmNlb2Z8bmV3fHJldHVybnxzd2l0Y2h8dGhpc3x0aHJvd3x0cnl8dHlwZW9mfHZvaWR8d2hpbGV8d2l0aHx5aWVsZC8sXHJcbiAgICBJZGVudGlmaWVyOiAvW2EtekEtWl8kXVthLXpBLVowLTlfJF0qLyxcclxuICB9LFxyXG4gIFwiZ1wiLFxyXG4gIFwiSW5wdXRFbGVtZW50XCJcclxuKTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiogc2NhbihzdHIpIHtcclxuICByZWcucmVnZXhwLmxhc3RJbmRleCA9IDA7XHJcbiAgd2hpbGUgKHJlZy5yZWdleHAubGFzdEluZGV4IDwgc3RyLmxlbmd0aCkge1xyXG4gICAgbGV0IHIgPSByZWcuZXhlYyhzdHIpO1xyXG5cclxuICAgIGlmIChyLldoaXRlc3BhY2UpIHtcclxuICAgIH0gZWxzZSBpZiAoci5MaW5lVGVybWluYXRvcikge1xyXG4gICAgfSBlbHNlIGlmIChyLkNvbW1lbnRzKSB7XHJcbiAgICB9IGVsc2UgaWYgKHIuTnVtZXJpY0xpdGVyYWwpIHtcclxuICAgICAgeWllbGQge1xyXG4gICAgICAgIHR5cGU6IFwiTnVtZXJpY0xpdGVyYWxcIixcclxuICAgICAgICB2YWx1ZTogclswXSxcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSBpZiAoci5TdHJpbmdMaXRlcmFsKSB7XHJcbiAgICAgIHlpZWxkIHtcclxuICAgICAgICB0eXBlOiBcIlN0cmluZ0xpdGVyYWxcIixcclxuICAgICAgICB2YWx1ZTogclswXSxcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSBpZiAoci5Cb29sZWFuTGl0ZXJhbCkge1xyXG4gICAgICB5aWVsZCB7XHJcbiAgICAgICAgdHlwZTogXCJCb29sZWFuTGl0ZXJhbFwiLFxyXG4gICAgICAgIHZhbHVlOiByWzBdLFxyXG4gICAgICB9O1xyXG4gICAgfSBlbHNlIGlmIChyLk51bGxMaXRlcmFsKSB7XHJcbiAgICAgIHlpZWxkIHtcclxuICAgICAgICB0eXBlOiBcIk51bGxMaXRlcmFsXCIsXHJcbiAgICAgICAgdmFsdWU6IG51bGwsXHJcbiAgICAgIH07XHJcbiAgICB9IGVsc2UgaWYgKHIuSWRlbnRpZmllcikge1xyXG4gICAgICB5aWVsZCB7XHJcbiAgICAgICAgdHlwZTogXCJJZGVudGlmaWVyXCIsXHJcbiAgICAgICAgbmFtZTogclswXSxcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSBpZiAoIXIuS2V5d29yZHMpIHtcclxuICAgICAgaWYgKHIuUHVuY3R1YXRvcikge1xyXG4gICAgICAgIHlpZWxkIHtcclxuICAgICAgICAgIHR5cGU6IHJbMF0sXHJcbiAgICAgICAgfTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJ1bmV4cGVjdGVkIHRva2VuOiBcIiArIHJbMF0pO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB5aWVsZCB7XHJcbiAgICAgICAgdHlwZTogclswXSxcclxuICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeShyWzBdKSk7XHJcbiAgICAvLyBkb2N1bWVudC53cml0ZShyWzBdKTtcclxuICAgIGlmICghclswXS5sZW5ndGgpIGJyZWFrO1xyXG4gIH1cclxuXHJcbiAgeWllbGQge1xyXG4gICAgdHlwZTogXCJFT0ZcIixcclxuICB9O1xyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/LexParser.js\n");

/***/ }),

/***/ "./src/SynctaxParser.js":
/*!******************************!*\
  !*** ./src/SynctaxParser.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   parse: () => (/* binding */ parse)\n/* harmony export */ });\n/* harmony import */ var _LexParser_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LexParser.js */ \"./src/LexParser.js\");\n\r\n\r\nconst syntaxMap = {\r\n    Program: [['StatementList', 'EOF']],\r\n    StatementList: [['Statement'], ['StatementList', 'Statement']],\r\n    Statement: [\r\n      ['ExpressionStatement'],\r\n      ['IfStatement'],\r\n      ['WhileStatement'],\r\n      ['VariableDeclaration'],\r\n      ['FunctionDeclaration'],\r\n      ['BlockStatement'],\r\n      ['BreakStatement'],\r\n      ['ContinueStatement'],\r\n    ],\r\n    BreakStatement: [\r\n      ['break', ';']\r\n    ],\r\n    ContinueStatement: [\r\n      ['continue', ';']\r\n    ],\r\n    BlockStatement: [\r\n      ['{', 'StatementList', '}'],\r\n      ['{', '}']\r\n    ],\r\n    IfStatement: [\r\n      ['if', '(', 'Expression', ')', 'Statement']\r\n    ],\r\n    WhileStatement: [\r\n      ['while', '(', 'Expression', ')', 'Statement']\r\n    ],\r\n    VariableDeclaration: [\r\n      ['var', 'Identifier', ';'],\r\n      ['let', 'Identifier', ';']\r\n    ],\r\n    FunctionDeclaration: [\r\n      ['function', 'Identifier', '(', ')', '{', 'StatementList', '}']\r\n    ],\r\n    ExpressionStatement: [['Expression', ';']],\r\n    Expression: [['AssignmentExpression']],\r\n    AssignmentExpression: [\r\n      ['LeftHandSideExpression', '=', 'LogicalORExpression'],\r\n      ['LogicalORExpression']\r\n    ],\r\n    LogicalORExpression: [\r\n      ['LogicalANDExpression'],\r\n      ['LogicalORExpression', '||', 'LogicalANDExpression']\r\n    ],\r\n    LogicalANDExpression: [\r\n      ['AdditiveExpression'],\r\n      ['LogicalANDExpression', '&&', 'AdditiveExpression']\r\n    ],\r\n    AdditiveExpression: [\r\n      ['MultiplicativeExpression'],\r\n      ['AdditiveExpression', '+', 'MultiplicativeExpression'],\r\n      ['AdditiveExpression', '-', 'MultiplicativeExpression']\r\n    ],\r\n    MultiplicativeExpression: [\r\n      ['LeftHandSideExpression'],\r\n      ['MultiplicativeExpression', '*', 'LeftHandSideExpression'],\r\n      ['MultiplicativeExpression', '/', 'LeftHandSideExpression']\r\n    ],\r\n    MemberExpression: [\r\n      ['PrimaryExpression'],\r\n      ['PrimaryExpression', '.', 'Identifier'],\r\n      ['PrimaryExpression', '[', 'Expression', ']']\r\n    ] /* new fn()() || new fn().a() 需要额外注意的是这里的优先级 */,\r\n    LeftHandSideExpression: [\r\n      ['CallExpression'],\r\n      ['NewExpression']\r\n    ],\r\n    CallExpression: [\r\n      ['MemberExpression', 'Arguments'],\r\n      ['CallExpression', 'Arguments']\r\n    ] /* new fn() */,\r\n    Arguments: [\r\n      ['(', ')'],\r\n      ['(', 'ArgumentList', ')']\r\n    ],\r\n    ArgumentList: [\r\n      ['AssignmentExpression'],\r\n      ['ArgumentList', ',', 'AssignmentExpression']\r\n    ],\r\n    NewExpression: [\r\n      ['MemberExpression'],\r\n      ['new', 'NewExpression']\r\n    ] /* new fn */,\r\n    PrimaryExpression: [\r\n      ['(', 'Expression', ')'],\r\n      ['Literal'],\r\n      ['Identifier']\r\n    ],\r\n    Literal: [\r\n      ['NumericLiteral'] /*Number类型默认用于表示双精度浮点数*/,\r\n      ['StringLiteral'] /*JavaScript中的String类型使用UTF-16编码*/,\r\n      ['BooleanLiteral'],\r\n      ['NullLiteral'],\r\n      ['RegularExpression'],\r\n      [\r\n        'ObjectLiteral'\r\n      ] /*Javascript property 对行为和状态并没有一个明确的区分*/,\r\n      ['ArrayLiteral']\r\n    ],\r\n    ObjectLiteral: [\r\n      ['{', '}'],\r\n      ['{', 'PropertyList', '}']\r\n    ],\r\n    PropertyList: [['Property'], ['PropertyList', ',', 'Property']],\r\n    Property: [\r\n      ['StringLiteral', ':', 'AdditiveExpression'],\r\n      ['Identifier', ':', 'AdditiveExpression']\r\n    ]\r\n  },\r\n  hash = {};\r\n\r\n// 状态机\r\nfunction closure(state) {\r\n  hash[JSON.stringify(state)] = state; // 在数据污染之前备份数据\r\n  const queue = [];\r\n\r\n  for (let symbol in state) {\r\n    if (symbol.match(/^\\$/)) continue; // 将 $reduceState 排除, 不做为普通的状态进行迁移\r\n    queue.push(symbol); // 广度优先\r\n  }\r\n  // 提取每一个 symbol，根据 syntax 规则去进行展开 此时只处理了两层\r\n  while (queue.length) {\r\n    const symbol = queue.shift();\r\n    // console.log(symbol);\r\n\r\n    if (syntaxMap[symbol]) {\r\n      for (let rule of syntaxMap[symbol]) {\r\n        if (!state[rule[0]]) queue.push(rule[0]);\r\n        let current = state;\r\n        for (const part of rule) {\r\n          if (!current[part]) {\r\n            current[part] = {};\r\n          }\r\n          current = current[part];\r\n        }\r\n        // 在术语中用 reduce 来代指合并，reduce 有两个要素\r\n        // 1. 将不定个 non-terminal-symbol 合并，所以需要回退状态\r\n        // 2. 要 reduce 成一个什么样的 symbol\r\n        current.$reduceType = symbol;\r\n        current.$reduceLength = rule.length;\r\n      }\r\n    }\r\n  }\r\n\r\n  //\r\n  for (const symbol in state) {\r\n    if (symbol.match(/^\\$/)) continue;\r\n\r\n    if (hash[JSON.stringify(state[symbol])]) {\r\n      state[symbol] = hash[JSON.stringify(state[symbol])];\r\n    } else {\r\n      closure(state[symbol]);\r\n    }\r\n  }\r\n}\r\n\r\n// 如果把语法的分析过程看做一个状态迁移的过程 就是从 start 到 end 的过程\r\nconst end = {\r\n  $isEnd: true\r\n};\r\nconst start = {\r\n  Program: end\r\n};\r\n\r\nclosure(start);\r\n\r\n// console.log(start);\r\n\r\nfunction parse(source) {\r\n  let stack = [start];\r\n  let symbolStack = [];\r\n\r\n  // 处理的是子元素\r\n  function reduce() {\r\n    let state = stack[stack.length - 1];\r\n    // 生成新的 _symbol\r\n    if (state.$reduceType) {\r\n      let children = [];\r\n      for (let i = 0; i < state.$reduceLength; i++) {\r\n        stack.pop();\r\n        children.push(symbolStack.pop());\r\n      }\r\n\r\n      // reduce to non-terminal-symbol and shift it\r\n      return {\r\n        type: state.$reduceType,\r\n        children: children.reverse()\r\n      };\r\n    } else {\r\n      console.log(state);\r\n      throw new Error('unexpected token');\r\n    }\r\n  }\r\n\r\n  function shift(symbol) {\r\n    let state = stack[stack.length - 1];\r\n    if (symbol && symbol.type in state) {\r\n      stack.push(state[symbol.type]); // 储存状态\r\n      symbolStack.push(symbol);\r\n    } else {\r\n      // reduce to non-terminal-symbol\r\n      // reduce 产生的新的 symbol 没有入栈，需要再次 shift\r\n      shift(reduce());\r\n      shift(symbol);\r\n    }\r\n  }\r\n\r\n  for (let symbol /* terminal symbols */ of (0,_LexParser_js__WEBPACK_IMPORTED_MODULE_0__.scan)(source)) {\r\n    shift(symbol);\r\n    // console.log(symbol);\r\n  }\r\n  return reduce();\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvU3luY3RheFBhcnNlci5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG95c2NyaXB0Ly4vc3JjL1N5bmN0YXhQYXJzZXIuanM/MmEyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3NjYW59IGZyb20gJy4vTGV4UGFyc2VyLmpzJztcclxuXHJcbmNvbnN0IHN5bnRheE1hcCA9IHtcclxuICAgIFByb2dyYW06IFtbJ1N0YXRlbWVudExpc3QnLCAnRU9GJ11dLFxyXG4gICAgU3RhdGVtZW50TGlzdDogW1snU3RhdGVtZW50J10sIFsnU3RhdGVtZW50TGlzdCcsICdTdGF0ZW1lbnQnXV0sXHJcbiAgICBTdGF0ZW1lbnQ6IFtcclxuICAgICAgWydFeHByZXNzaW9uU3RhdGVtZW50J10sXHJcbiAgICAgIFsnSWZTdGF0ZW1lbnQnXSxcclxuICAgICAgWydXaGlsZVN0YXRlbWVudCddLFxyXG4gICAgICBbJ1ZhcmlhYmxlRGVjbGFyYXRpb24nXSxcclxuICAgICAgWydGdW5jdGlvbkRlY2xhcmF0aW9uJ10sXHJcbiAgICAgIFsnQmxvY2tTdGF0ZW1lbnQnXSxcclxuICAgICAgWydCcmVha1N0YXRlbWVudCddLFxyXG4gICAgICBbJ0NvbnRpbnVlU3RhdGVtZW50J10sXHJcbiAgICBdLFxyXG4gICAgQnJlYWtTdGF0ZW1lbnQ6IFtcclxuICAgICAgWydicmVhaycsICc7J11cclxuICAgIF0sXHJcbiAgICBDb250aW51ZVN0YXRlbWVudDogW1xyXG4gICAgICBbJ2NvbnRpbnVlJywgJzsnXVxyXG4gICAgXSxcclxuICAgIEJsb2NrU3RhdGVtZW50OiBbXHJcbiAgICAgIFsneycsICdTdGF0ZW1lbnRMaXN0JywgJ30nXSxcclxuICAgICAgWyd7JywgJ30nXVxyXG4gICAgXSxcclxuICAgIElmU3RhdGVtZW50OiBbXHJcbiAgICAgIFsnaWYnLCAnKCcsICdFeHByZXNzaW9uJywgJyknLCAnU3RhdGVtZW50J11cclxuICAgIF0sXHJcbiAgICBXaGlsZVN0YXRlbWVudDogW1xyXG4gICAgICBbJ3doaWxlJywgJygnLCAnRXhwcmVzc2lvbicsICcpJywgJ1N0YXRlbWVudCddXHJcbiAgICBdLFxyXG4gICAgVmFyaWFibGVEZWNsYXJhdGlvbjogW1xyXG4gICAgICBbJ3ZhcicsICdJZGVudGlmaWVyJywgJzsnXSxcclxuICAgICAgWydsZXQnLCAnSWRlbnRpZmllcicsICc7J11cclxuICAgIF0sXHJcbiAgICBGdW5jdGlvbkRlY2xhcmF0aW9uOiBbXHJcbiAgICAgIFsnZnVuY3Rpb24nLCAnSWRlbnRpZmllcicsICcoJywgJyknLCAneycsICdTdGF0ZW1lbnRMaXN0JywgJ30nXVxyXG4gICAgXSxcclxuICAgIEV4cHJlc3Npb25TdGF0ZW1lbnQ6IFtbJ0V4cHJlc3Npb24nLCAnOyddXSxcclxuICAgIEV4cHJlc3Npb246IFtbJ0Fzc2lnbm1lbnRFeHByZXNzaW9uJ11dLFxyXG4gICAgQXNzaWdubWVudEV4cHJlc3Npb246IFtcclxuICAgICAgWydMZWZ0SGFuZFNpZGVFeHByZXNzaW9uJywgJz0nLCAnTG9naWNhbE9SRXhwcmVzc2lvbiddLFxyXG4gICAgICBbJ0xvZ2ljYWxPUkV4cHJlc3Npb24nXVxyXG4gICAgXSxcclxuICAgIExvZ2ljYWxPUkV4cHJlc3Npb246IFtcclxuICAgICAgWydMb2dpY2FsQU5ERXhwcmVzc2lvbiddLFxyXG4gICAgICBbJ0xvZ2ljYWxPUkV4cHJlc3Npb24nLCAnfHwnLCAnTG9naWNhbEFOREV4cHJlc3Npb24nXVxyXG4gICAgXSxcclxuICAgIExvZ2ljYWxBTkRFeHByZXNzaW9uOiBbXHJcbiAgICAgIFsnQWRkaXRpdmVFeHByZXNzaW9uJ10sXHJcbiAgICAgIFsnTG9naWNhbEFOREV4cHJlc3Npb24nLCAnJiYnLCAnQWRkaXRpdmVFeHByZXNzaW9uJ11cclxuICAgIF0sXHJcbiAgICBBZGRpdGl2ZUV4cHJlc3Npb246IFtcclxuICAgICAgWydNdWx0aXBsaWNhdGl2ZUV4cHJlc3Npb24nXSxcclxuICAgICAgWydBZGRpdGl2ZUV4cHJlc3Npb24nLCAnKycsICdNdWx0aXBsaWNhdGl2ZUV4cHJlc3Npb24nXSxcclxuICAgICAgWydBZGRpdGl2ZUV4cHJlc3Npb24nLCAnLScsICdNdWx0aXBsaWNhdGl2ZUV4cHJlc3Npb24nXVxyXG4gICAgXSxcclxuICAgIE11bHRpcGxpY2F0aXZlRXhwcmVzc2lvbjogW1xyXG4gICAgICBbJ0xlZnRIYW5kU2lkZUV4cHJlc3Npb24nXSxcclxuICAgICAgWydNdWx0aXBsaWNhdGl2ZUV4cHJlc3Npb24nLCAnKicsICdMZWZ0SGFuZFNpZGVFeHByZXNzaW9uJ10sXHJcbiAgICAgIFsnTXVsdGlwbGljYXRpdmVFeHByZXNzaW9uJywgJy8nLCAnTGVmdEhhbmRTaWRlRXhwcmVzc2lvbiddXHJcbiAgICBdLFxyXG4gICAgTWVtYmVyRXhwcmVzc2lvbjogW1xyXG4gICAgICBbJ1ByaW1hcnlFeHByZXNzaW9uJ10sXHJcbiAgICAgIFsnUHJpbWFyeUV4cHJlc3Npb24nLCAnLicsICdJZGVudGlmaWVyJ10sXHJcbiAgICAgIFsnUHJpbWFyeUV4cHJlc3Npb24nLCAnWycsICdFeHByZXNzaW9uJywgJ10nXVxyXG4gICAgXSAvKiBuZXcgZm4oKSgpIHx8IG5ldyBmbigpLmEoKSDpnIDopoHpop3lpJbms6jmhI/nmoTmmK/ov5nph4znmoTkvJjlhYjnuqcgKi8sXHJcbiAgICBMZWZ0SGFuZFNpZGVFeHByZXNzaW9uOiBbXHJcbiAgICAgIFsnQ2FsbEV4cHJlc3Npb24nXSxcclxuICAgICAgWydOZXdFeHByZXNzaW9uJ11cclxuICAgIF0sXHJcbiAgICBDYWxsRXhwcmVzc2lvbjogW1xyXG4gICAgICBbJ01lbWJlckV4cHJlc3Npb24nLCAnQXJndW1lbnRzJ10sXHJcbiAgICAgIFsnQ2FsbEV4cHJlc3Npb24nLCAnQXJndW1lbnRzJ11cclxuICAgIF0gLyogbmV3IGZuKCkgKi8sXHJcbiAgICBBcmd1bWVudHM6IFtcclxuICAgICAgWycoJywgJyknXSxcclxuICAgICAgWycoJywgJ0FyZ3VtZW50TGlzdCcsICcpJ11cclxuICAgIF0sXHJcbiAgICBBcmd1bWVudExpc3Q6IFtcclxuICAgICAgWydBc3NpZ25tZW50RXhwcmVzc2lvbiddLFxyXG4gICAgICBbJ0FyZ3VtZW50TGlzdCcsICcsJywgJ0Fzc2lnbm1lbnRFeHByZXNzaW9uJ11cclxuICAgIF0sXHJcbiAgICBOZXdFeHByZXNzaW9uOiBbXHJcbiAgICAgIFsnTWVtYmVyRXhwcmVzc2lvbiddLFxyXG4gICAgICBbJ25ldycsICdOZXdFeHByZXNzaW9uJ11cclxuICAgIF0gLyogbmV3IGZuICovLFxyXG4gICAgUHJpbWFyeUV4cHJlc3Npb246IFtcclxuICAgICAgWycoJywgJ0V4cHJlc3Npb24nLCAnKSddLFxyXG4gICAgICBbJ0xpdGVyYWwnXSxcclxuICAgICAgWydJZGVudGlmaWVyJ11cclxuICAgIF0sXHJcbiAgICBMaXRlcmFsOiBbXHJcbiAgICAgIFsnTnVtZXJpY0xpdGVyYWwnXSAvKk51bWJlcuexu+Wei+m7mOiupOeUqOS6juihqOekuuWPjOeyvuW6pua1rueCueaVsCovLFxyXG4gICAgICBbJ1N0cmluZ0xpdGVyYWwnXSAvKkphdmFTY3JpcHTkuK3nmoRTdHJpbmfnsbvlnovkvb/nlKhVVEYtMTbnvJbnoIEqLyxcclxuICAgICAgWydCb29sZWFuTGl0ZXJhbCddLFxyXG4gICAgICBbJ051bGxMaXRlcmFsJ10sXHJcbiAgICAgIFsnUmVndWxhckV4cHJlc3Npb24nXSxcclxuICAgICAgW1xyXG4gICAgICAgICdPYmplY3RMaXRlcmFsJ1xyXG4gICAgICBdIC8qSmF2YXNjcmlwdCBwcm9wZXJ0eSDlr7nooYzkuLrlkoznirbmgIHlubbmsqHmnInkuIDkuKrmmI7noa7nmoTljLrliIYqLyxcclxuICAgICAgWydBcnJheUxpdGVyYWwnXVxyXG4gICAgXSxcclxuICAgIE9iamVjdExpdGVyYWw6IFtcclxuICAgICAgWyd7JywgJ30nXSxcclxuICAgICAgWyd7JywgJ1Byb3BlcnR5TGlzdCcsICd9J11cclxuICAgIF0sXHJcbiAgICBQcm9wZXJ0eUxpc3Q6IFtbJ1Byb3BlcnR5J10sIFsnUHJvcGVydHlMaXN0JywgJywnLCAnUHJvcGVydHknXV0sXHJcbiAgICBQcm9wZXJ0eTogW1xyXG4gICAgICBbJ1N0cmluZ0xpdGVyYWwnLCAnOicsICdBZGRpdGl2ZUV4cHJlc3Npb24nXSxcclxuICAgICAgWydJZGVudGlmaWVyJywgJzonLCAnQWRkaXRpdmVFeHByZXNzaW9uJ11cclxuICAgIF1cclxuICB9LFxyXG4gIGhhc2ggPSB7fTtcclxuXHJcbi8vIOeKtuaAgeaculxyXG5mdW5jdGlvbiBjbG9zdXJlKHN0YXRlKSB7XHJcbiAgaGFzaFtKU09OLnN0cmluZ2lmeShzdGF0ZSldID0gc3RhdGU7IC8vIOWcqOaVsOaNruaxoeafk+S5i+WJjeWkh+S7veaVsOaNrlxyXG4gIGNvbnN0IHF1ZXVlID0gW107XHJcblxyXG4gIGZvciAobGV0IHN5bWJvbCBpbiBzdGF0ZSkge1xyXG4gICAgaWYgKHN5bWJvbC5tYXRjaCgvXlxcJC8pKSBjb250aW51ZTsgLy8g5bCGICRyZWR1Y2VTdGF0ZSDmjpLpmaQsIOS4jeWBmuS4uuaZrumAmueahOeKtuaAgei/m+ihjOi/geenu1xyXG4gICAgcXVldWUucHVzaChzeW1ib2wpOyAvLyDlub/luqbkvJjlhYhcclxuICB9XHJcbiAgLy8g5o+Q5Y+W5q+P5LiA5LiqIHN5bWJvbO+8jOagueaNriBzeW50YXgg6KeE5YiZ5Y676L+b6KGM5bGV5byAIOatpOaXtuWPquWkhOeQhuS6huS4pOWxglxyXG4gIHdoaWxlIChxdWV1ZS5sZW5ndGgpIHtcclxuICAgIGNvbnN0IHN5bWJvbCA9IHF1ZXVlLnNoaWZ0KCk7XHJcbiAgICAvLyBjb25zb2xlLmxvZyhzeW1ib2wpO1xyXG5cclxuICAgIGlmIChzeW50YXhNYXBbc3ltYm9sXSkge1xyXG4gICAgICBmb3IgKGxldCBydWxlIG9mIHN5bnRheE1hcFtzeW1ib2xdKSB7XHJcbiAgICAgICAgaWYgKCFzdGF0ZVtydWxlWzBdXSkgcXVldWUucHVzaChydWxlWzBdKTtcclxuICAgICAgICBsZXQgY3VycmVudCA9IHN0YXRlO1xyXG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBydWxlKSB7XHJcbiAgICAgICAgICBpZiAoIWN1cnJlbnRbcGFydF0pIHtcclxuICAgICAgICAgICAgY3VycmVudFtwYXJ0XSA9IHt9O1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgY3VycmVudCA9IGN1cnJlbnRbcGFydF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIOWcqOacr+ivreS4reeUqCByZWR1Y2Ug5p2l5Luj5oyH5ZCI5bm277yMcmVkdWNlIOacieS4pOS4quimgee0oFxyXG4gICAgICAgIC8vIDEuIOWwhuS4jeWumuS4qiBub24tdGVybWluYWwtc3ltYm9sIOWQiOW5tu+8jOaJgOS7pemcgOimgeWbnumAgOeKtuaAgVxyXG4gICAgICAgIC8vIDIuIOimgSByZWR1Y2Ug5oiQ5LiA5Liq5LuA5LmI5qC355qEIHN5bWJvbFxyXG4gICAgICAgIGN1cnJlbnQuJHJlZHVjZVR5cGUgPSBzeW1ib2w7XHJcbiAgICAgICAgY3VycmVudC4kcmVkdWNlTGVuZ3RoID0gcnVsZS5sZW5ndGg7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8vXHJcbiAgZm9yIChjb25zdCBzeW1ib2wgaW4gc3RhdGUpIHtcclxuICAgIGlmIChzeW1ib2wubWF0Y2goL15cXCQvKSkgY29udGludWU7XHJcblxyXG4gICAgaWYgKGhhc2hbSlNPTi5zdHJpbmdpZnkoc3RhdGVbc3ltYm9sXSldKSB7XHJcbiAgICAgIHN0YXRlW3N5bWJvbF0gPSBoYXNoW0pTT04uc3RyaW5naWZ5KHN0YXRlW3N5bWJvbF0pXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNsb3N1cmUoc3RhdGVbc3ltYm9sXSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcblxyXG4vLyDlpoLmnpzmioror63ms5XnmoTliIbmnpDov4fnqIvnnIvlgZrkuIDkuKrnirbmgIHov4Hnp7vnmoTov4fnqIsg5bCx5piv5LuOIHN0YXJ0IOWIsCBlbmQg55qE6L+H56iLXHJcbmNvbnN0IGVuZCA9IHtcclxuICAkaXNFbmQ6IHRydWVcclxufTtcclxuY29uc3Qgc3RhcnQgPSB7XHJcbiAgUHJvZ3JhbTogZW5kXHJcbn07XHJcblxyXG5jbG9zdXJlKHN0YXJ0KTtcclxuXHJcbi8vIGNvbnNvbGUubG9nKHN0YXJ0KTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZShzb3VyY2UpIHtcclxuICBsZXQgc3RhY2sgPSBbc3RhcnRdO1xyXG4gIGxldCBzeW1ib2xTdGFjayA9IFtdO1xyXG5cclxuICAvLyDlpITnkIbnmoTmmK/lrZDlhYPntKBcclxuICBmdW5jdGlvbiByZWR1Y2UoKSB7XHJcbiAgICBsZXQgc3RhdGUgPSBzdGFja1tzdGFjay5sZW5ndGggLSAxXTtcclxuICAgIC8vIOeUn+aIkOaWsOeahCBfc3ltYm9sXHJcbiAgICBpZiAoc3RhdGUuJHJlZHVjZVR5cGUpIHtcclxuICAgICAgbGV0IGNoaWxkcmVuID0gW107XHJcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RhdGUuJHJlZHVjZUxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgc3RhY2sucG9wKCk7XHJcbiAgICAgICAgY2hpbGRyZW4ucHVzaChzeW1ib2xTdGFjay5wb3AoKSk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIHJlZHVjZSB0byBub24tdGVybWluYWwtc3ltYm9sIGFuZCBzaGlmdCBpdFxyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICAgIHR5cGU6IHN0YXRlLiRyZWR1Y2VUeXBlLFxyXG4gICAgICAgIGNoaWxkcmVuOiBjaGlsZHJlbi5yZXZlcnNlKClcclxuICAgICAgfTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHN0YXRlKTtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bmV4cGVjdGVkIHRva2VuJyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBzaGlmdChzeW1ib2wpIHtcclxuICAgIGxldCBzdGF0ZSA9IHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdO1xyXG4gICAgaWYgKHN5bWJvbCAmJiBzeW1ib2wudHlwZSBpbiBzdGF0ZSkge1xyXG4gICAgICBzdGFjay5wdXNoKHN0YXRlW3N5bWJvbC50eXBlXSk7IC8vIOWCqOWtmOeKtuaAgVxyXG4gICAgICBzeW1ib2xTdGFjay5wdXNoKHN5bWJvbCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyByZWR1Y2UgdG8gbm9uLXRlcm1pbmFsLXN5bWJvbFxyXG4gICAgICAvLyByZWR1Y2Ug5Lqn55Sf55qE5paw55qEIHN5bWJvbCDmsqHmnInlhaXmoIjvvIzpnIDopoHlho3mrKEgc2hpZnRcclxuICAgICAgc2hpZnQocmVkdWNlKCkpO1xyXG4gICAgICBzaGlmdChzeW1ib2wpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZm9yIChsZXQgc3ltYm9sIC8qIHRlcm1pbmFsIHN5bWJvbHMgKi8gb2Ygc2Nhbihzb3VyY2UpKSB7XHJcbiAgICBzaGlmdChzeW1ib2wpO1xyXG4gICAgLy8gY29uc29sZS5sb2coc3ltYm9sKTtcclxuICB9XHJcbiAgcmV0dXJuIHJlZHVjZSgpO1xyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/SynctaxParser.js\n");

/***/ }),

/***/ "./src/evaluator.js":
/*!**************************!*\
  !*** ./src/evaluator.js ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Evaluator: () => (/* binding */ Evaluator)\n/* harmony export */ });\n/* harmony import */ var _runtime_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./runtime.js */ \"./src/runtime.js\");\n\r\n\r\nclass Evaluator {\r\n  constructor() {\r\n    this.realm = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Realm();\r\n    // 执行上下文中的数据状态 在函数调用的时候切换\r\n    // 通过栈来管理 ExecutionContext 在存储函数调用的先后时机\r\n    this.globalObject = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsObject();\r\n    this.ecs = [\r\n      new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionContext(\r\n        this.realm,\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.ObjectEnvironmentRecord(this.globalObject),\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.ObjectEnvironmentRecord(this.globalObject)\r\n      ),\r\n    ];\r\n    this.log();\r\n  }\r\n\r\n  evaluateModule(node) {\r\n    let globalEC = this.ecs[0],\r\n      ec = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionContext(\r\n        this.realm,\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.EnvironmentRecord(globalEC.lexicalEnvironment),\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.EnvironmentRecord(globalEC.lexicalEnvironment)\r\n      );\r\n\r\n    this.ecs.push(ec);\r\n    let result = this.valueOf(node);\r\n    this.ecs.pop();\r\n\r\n    return result;\r\n  }\r\n\r\n  log() {\r\n    this.globalObject.set(\"log\", new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsObject());\r\n    this.globalObject.get(\"log\").call = (args) => {\r\n      console.log(args);\r\n    };\r\n  }\r\n\r\n  evaluate(node) {\r\n    if (this[node.type]) {\r\n      let r = this[node.type](node);\r\n      // console.log(r)\r\n      return r;\r\n    }\r\n  }\r\n\r\n  Program(node) {\r\n    return this.evaluate(node.children[0]);\r\n  }\r\n\r\n  StatementList(node) {\r\n    if (node.children.length === 1) {\r\n      return this.evaluate(node.children[0]);\r\n    } else {\r\n      const record = this.evaluate(node.children[0]);\r\n      if (record.type === \"normal\") {\r\n        return this.evaluate(node.children[1]);\r\n      }\r\n      return record;\r\n    }\r\n  }\r\n\r\n  Statement(node) {\r\n    return this.evaluate(node.children[0]);\r\n  }\r\n\r\n  IfStatement(node) {\r\n    let condition = this.evaluate(node.children[2]);\r\n    if (condition.property === \"undefined\" || condition.property === \"NaN\") {\r\n      return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsUndefined().toBoolean();\r\n    }\r\n    if (condition instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) {\r\n      condition = condition.get();\r\n    }\r\n    if (condition.toBoolean().value) {\r\n      return this.evaluate(node.children[4]);\r\n    }\r\n  }\r\n\r\n  WhileStatement(node) {\r\n    while (true) {\r\n      let condition = this.evaluate(node.children[2]);\r\n      if (condition.property === \"undefined\" || condition.property === \"NaN\") {\r\n        return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsUndefined().toBoolean();\r\n      }\r\n      if (condition instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) {\r\n        condition = condition.get();\r\n      }\r\n      if (condition.toBoolean().value) {\r\n        let record = this.evaluate(node.children[4]);\r\n        if (record.type === \"continue\") {\r\n          continue;\r\n          // TODO\r\n        } else if (record.type === \"break\") {\r\n          return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord(\"normal\"); // break 代表着循环截止了 否则一个 break 会截停多层循环了\r\n        }\r\n      } else {\r\n        return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord(\"normal\");\r\n      }\r\n    }\r\n  }\r\n\r\n  BreakStatement(node) {\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord(\"break\");\r\n  }\r\n\r\n  ContinueStatement(node) {\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord(\"continue\");\r\n  }\r\n\r\n  VariableDeclaration(node) {\r\n    // log(node) 获取表达式声明体\r\n    let runningEC = this.ecs[this.ecs.length - 1]; // 取栈顶\r\n    runningEC.lexicalEnvironment.add(node.children[1].name);\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord(\"normal\", new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsUndefined());\r\n  }\r\n\r\n  ExpressionStatement(node) {\r\n    let result = this.evaluate(node.children[0]);\r\n    if (result instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) {\r\n      result = result.get();\r\n    }\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord(\"normal\", result);\r\n  }\r\n\r\n  Expression(node) {\r\n    return this.evaluate(node.children[0]);\r\n  }\r\n\r\n  AdditiveExpression(node) {\r\n    if (node.children.length === 1) return this.evaluate(node.children[0]);\r\n    else {\r\n      let left = this.evaluate(node.children[0]),\r\n        right = this.evaluate(node.children[2]);\r\n      if (left instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) left = left.get();\r\n      if (right instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) right = right.get();\r\n\r\n      if (node.children[1].type === \"+\") {\r\n        return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsNumber(left.value + right.value);\r\n      }\r\n      if (node.children[1].type === \"-\") {\r\n        return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsNumber(left.value - right.value);\r\n      }\r\n    }\r\n  }\r\n\r\n  MultiplicativeExpression(node) {\r\n    if (node.children.length === 1) return this.evaluate(node.children[0]);\r\n    else {\r\n      let left = this.evaluate(node.children[0]),\r\n        right = this.evaluate(node.children[2]);\r\n      if (left instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) left = left.get();\r\n      if (right instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) right = left.get();\r\n\r\n      if (node.children[1].type === \"*\") {\r\n        return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsNumber(left.value * right.value);\r\n      }\r\n      if (node.children[1].type === \"/\") {\r\n        return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsNumber(left.value / right.value);\r\n      }\r\n    }\r\n  }\r\n\r\n  PrimaryExpression(node) {\r\n    if (node.children.length === 1) return this.evaluate(node.children[0]);\r\n  }\r\n\r\n  Literal(node) {\r\n    return this.evaluate(node.children[0]);\r\n  }\r\n\r\n  NumericLiteral(node) {\r\n    let str = node.value,\r\n      len = str.length,\r\n      value = 0, // 进制\r\n      n = 10;\r\n\r\n    if (str.match(/^0b/)) {\r\n      n = 2;\r\n      len -= 2;\r\n    } else if (str.match(/^0o/)) {\r\n      n = 8;\r\n      len -= 2;\r\n    } else if (str.match(/^0x/)) {\r\n      n = 16;\r\n      len -= 2;\r\n    }\r\n\r\n    while (len--) {\r\n      // 处理 16 进制\r\n      let char = str.charCodeAt(str.length - len - 1);\r\n      if (char >= \"a\".charCodeAt(0) && char <= \"f\".charCodeAt(0)) {\r\n        char = char - \"a\".charCodeAt(0) + 10;\r\n      } else if (char >= \"A\".charCodeAt(0) && char <= \"F\".charCodeAt(0)) {\r\n        char = char - \"A\".charCodeAt(0) + 10;\r\n      } else if (char >= \"0\".charCodeAt(0) && char <= \"9\".charCodeAt(0)) {\r\n        char -= \"0\".charCodeAt(0);\r\n      } else {\r\n        throw new Error(\"Invalid or unexpected token\");\r\n      }\r\n\r\n      // 将数字字符转换为其对应的数字值\r\n      value = value * n + char;\r\n    }\r\n\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsNumber(node.value);\r\n  }\r\n\r\n  StringLiteral(node) {\r\n    const result = [];\r\n    console.log(node.value);\r\n\r\n    for (let i = 1, len = node.value.length - 1; i < len; i++) {\r\n      switch (node.value[i]) {\r\n        case \"\\\\\":\r\n          ++i;\r\n          const char = node.value[i],\r\n            escapeCharMap = {\r\n              // 默认处理 BMP 的字符集（0000 - ffff : 一个 utf-16 的资源）\r\n              n: String.fromCharCode(0x000a),\r\n              r: String.fromCharCode(0x000d),\r\n              t: String.fromCharCode(0x0009),\r\n              b: String.fromCharCode(0x0008),\r\n              f: String.fromCharCode(0x000c),\r\n              v: String.fromCharCode(0x000b),\r\n              0: String.fromCharCode(0x0000),\r\n              \"\\\\\": String.fromCharCode(0x005c),\r\n              \"'\": String.fromCharCode(0x0027),\r\n              '\"': String.fromCharCode(0x0022),\r\n            };\r\n          if (char in escapeCharMap) {\r\n            result.push(escapeCharMap[char]);\r\n          } else {\r\n            result.push(char);\r\n          }\r\n          break;\r\n        default:\r\n          result.push(node.value[i]);\r\n          break;\r\n      }\r\n    }\r\n    // console.log(result);\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsString(result);\r\n  }\r\n\r\n  ObjectLiteral(node) {\r\n    const len = node.children.length;\r\n    if (len === 2) {\r\n      return {};\r\n    }\r\n    if (len === 3) {\r\n      const object = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsObject(); // Js 的对象本质就是两个东西：prototype property\r\n      this.PropertyList(node.children[1], object);\r\n      // object.prototype =\r\n      return object;\r\n    }\r\n  }\r\n\r\n  PropertyList(node, object) {\r\n    if (node.children.length === 1) {\r\n      this.Property(node.children[0], object);\r\n    } else {\r\n      this.PropertyList(node.children[0], object);\r\n      this.Property(node.children[2], object);\r\n    }\r\n  }\r\n\r\n  Property(node, object) {\r\n    let name;\r\n    if (node.children[0].type === \"Identifier\") {\r\n      name = node.children[0].name;\r\n    } else if (node.children[0].type === \"StringLiteral\") {\r\n      name = this.evaluate(node.children[0]);\r\n    }\r\n    object.setProperty(name, {\r\n      value: this.evaluate(node.children[2]),\r\n      writeable: true,\r\n      enumerable: true,\r\n      configurable: true,\r\n    });\r\n  }\r\n\r\n  AssignmentExpression(node) {\r\n    if (node.children.length === 1) {\r\n      return this.evaluate(node.children[0]);\r\n    }\r\n    // 先执行左边的表达式，然后执行右边的表达式，最后将右边的值赋值给左边的变量\r\n    let left = this.evaluate(node.children[0]);\r\n    let right = this.evaluate(node.children[2]);\r\n    left.set(right);\r\n  }\r\n\r\n  LogicalORExpression(node) {\r\n    if (node.children.length === 1) return this.evaluate(node.children[0]);\r\n    const res = this.evaluate(node.children[0]);\r\n    if (res.value) return res.value;\r\n    if (res.type === \"null\" || res.property === \"undefined\") {\r\n      return this.evaluate(node.children[2]);\r\n    }\r\n    return this.evaluate(node.children[2]);\r\n  }\r\n\r\n  LogicalANDExpression(node) {\r\n    if (node.children.length === 1) return this.evaluate(node.children[0]);\r\n    const res = this.evaluate(node.children[0]);\r\n    if (!res.value) return res.value;\r\n    if (res.type === \"null\") return null;\r\n    if (res.property === \"undefined\") return undefined;\r\n    return this.evaluate(node.children[2]);\r\n  }\r\n\r\n  LeftHandSideExpression(node) {\r\n    return this.evaluate(node.children[0]);\r\n  }\r\n\r\n  NewExpression(node) {\r\n    if (node.children.length === 1) {\r\n      return this.evaluate(node.children[0]);\r\n    }\r\n    if (node.children.length === 2) {\r\n      let _class = this.evaluate(node.children[1]);\r\n      return _class.constructor();\r\n    }\r\n    /*\r\n     * let object = this.realm.Object.constructor(),\r\n     *   _class = this.evaluate(node.children[1]),\r\n     *   result = _class.call(object);\r\n     * if(typeof result === \"object\"){\r\n     *   return result;\r\n     * }\r\n     * return object;\r\n     */\r\n  }\r\n\r\n  CallExpression(node) {\r\n    if (node.children.length === 1) {\r\n      return this.evaluate(node.children[0]);\r\n    }\r\n    if (node.children.length === 2) {\r\n      let _function = this.evaluate(node.children[0]),\r\n        _arguments = this.evaluate(node.children[1]);\r\n      if (_function instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) {\r\n        _function = _function.get();\r\n      }\r\n      return _function.call(_arguments);\r\n    }\r\n    /*\r\n     * let object = this.realm.Object.constructor(),\r\n     *   _class = this.evaluate(node.children[1]),\r\n     *   result = _class.call(object);\r\n     * if(typeof result === \"object\"){\r\n     *   return result;\r\n     * }\r\n     * return object;\r\n     */\r\n  }\r\n\r\n  MemberExpression(node) {\r\n    if (node.children.length === 1) {\r\n      return this.evaluate(node.children[0]);\r\n    }\r\n    if (node.children.length === 3) {\r\n      const result = this.evaluate(node.children[0]).get(),\r\n        prop = result.properties.get(node.children[2].name);\r\n      if (\"value\" in prop) return prop.value;\r\n      if (\"get\" in prop) return prop.get.call(result);\r\n    }\r\n  }\r\n\r\n  Identifier(node) {\r\n    // 将变量存储到 ExecutionContext\r\n    let runningEC = this.ecs[this.ecs.length - 1]; // 取栈顶\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference(runningEC.lexicalEnvironment, node.name);\r\n  }\r\n\r\n  Arguments(node) {\r\n    if (node.children.length === 2) {\r\n      return [];\r\n    } else {\r\n      return this.evaluate(node.children[1]);\r\n    }\r\n  }\r\n\r\n  ArgumentList(node) {\r\n    if (node.children.length === 1) {\r\n      let result = this.evaluate(node.children[0]);\r\n      if (result instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) {\r\n        return result.get();\r\n      }\r\n      return [result];\r\n    } else {\r\n      let result = this.evaluate(node.children[2]);\r\n      if (result instanceof _runtime_js__WEBPACK_IMPORTED_MODULE_0__.Reference) {\r\n        result = result.get();\r\n      }\r\n      return this.evaluate(node.children[0]).concat(result);\r\n    }\r\n  }\r\n\r\n  BooleanLiteral(node) {\r\n    if (node.value === \"true\") {\r\n      return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsBoolean(true);\r\n    } else if (node.value === \"false\") {\r\n      return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsBoolean(false);\r\n    }\r\n  }\r\n\r\n  NullLiteral(node) {\r\n    if (typeof node.value === \"object\") {\r\n      return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsNull();\r\n    }\r\n  }\r\n\r\n  BlockStatement(node) {\r\n    if (node.children.length === 2) return;\r\n\r\n    let runningEC = this.ecs[this.ecs.length - 1],\r\n      ec = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionContext(\r\n        runningEC.realm,\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.EnvironmentRecord(runningEC.lexicalEnvironment),\r\n        runningEC.variableEnvironment\r\n      );\r\n    this.ecs.push(ec);\r\n    let result = this.evaluate(node.children[1]);\r\n    this.ecs.pop();\r\n\r\n    return result;\r\n  }\r\n\r\n  FunctionDeclaration(node) {\r\n    let name = node.children[1].name,\r\n      code = node.children[node.children.length - 2],\r\n      func = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.JsObject();\r\n\r\n    func.call = (args) => {\r\n      let ec = new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.ExecutionContext(\r\n        this.realm,\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.EnvironmentRecord(func.environment),\r\n        new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.EnvironmentRecord(func.environment)\r\n      );\r\n      this.ecs.push(ec);\r\n      this.evaluate(code);\r\n      this.ecs.pop();\r\n    };\r\n\r\n    let runningEC = this.ecs[this.ecs.length - 1];\r\n    runningEC.lexicalEnvironment.add(name);\r\n    runningEC.lexicalEnvironment.set(name, func);\r\n    func.environment = runningEC.lexicalEnvironment;\r\n    return new _runtime_js__WEBPACK_IMPORTED_MODULE_0__.CompletionRecord(\"normal\");\r\n  }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvZXZhbHVhdG9yLmpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBY0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b3lzY3JpcHQvLi9zcmMvZXZhbHVhdG9yLmpzPzc1OTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcclxuICBSZWZlcmVuY2UsXHJcbiAgRXhlY3V0aW9uQ29udGV4dCxcclxuICBFbnZpcm9ubWVudFJlY29yZCxcclxuICBSZWFsbSxcclxuICBKc09iamVjdCxcclxuICBKc1N5bWJvbCxcclxuICBKc051bGwsXHJcbiAgSnNVbmRlZmluZWQsXHJcbiAgSnNOdW1iZXIsXHJcbiAgSnNTdHJpbmcsXHJcbiAgSnNCb29sZWFuLFxyXG4gIENvbXBsZXRpb25SZWNvcmQsXHJcbiAgT2JqZWN0RW52aXJvbm1lbnRSZWNvcmQsXHJcbn0gZnJvbSBcIi4vcnVudGltZS5qc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIEV2YWx1YXRvciB7XHJcbiAgY29uc3RydWN0b3IoKSB7XHJcbiAgICB0aGlzLnJlYWxtID0gbmV3IFJlYWxtKCk7XHJcbiAgICAvLyDmiafooYzkuIrkuIvmlofkuK3nmoTmlbDmja7nirbmgIEg5Zyo5Ye95pWw6LCD55So55qE5pe25YCZ5YiH5o2iXHJcbiAgICAvLyDpgJrov4fmoIjmnaXnrqHnkIYgRXhlY3V0aW9uQ29udGV4dCDlnKjlrZjlgqjlh73mlbDosIPnlKjnmoTlhYjlkI7ml7bmnLpcclxuICAgIHRoaXMuZ2xvYmFsT2JqZWN0ID0gbmV3IEpzT2JqZWN0KCk7XHJcbiAgICB0aGlzLmVjcyA9IFtcclxuICAgICAgbmV3IEV4ZWN1dGlvbkNvbnRleHQoXHJcbiAgICAgICAgdGhpcy5yZWFsbSxcclxuICAgICAgICBuZXcgT2JqZWN0RW52aXJvbm1lbnRSZWNvcmQodGhpcy5nbG9iYWxPYmplY3QpLFxyXG4gICAgICAgIG5ldyBPYmplY3RFbnZpcm9ubWVudFJlY29yZCh0aGlzLmdsb2JhbE9iamVjdClcclxuICAgICAgKSxcclxuICAgIF07XHJcbiAgICB0aGlzLmxvZygpO1xyXG4gIH1cclxuXHJcbiAgZXZhbHVhdGVNb2R1bGUobm9kZSkge1xyXG4gICAgbGV0IGdsb2JhbEVDID0gdGhpcy5lY3NbMF0sXHJcbiAgICAgIGVjID0gbmV3IEV4ZWN1dGlvbkNvbnRleHQoXHJcbiAgICAgICAgdGhpcy5yZWFsbSxcclxuICAgICAgICBuZXcgRW52aXJvbm1lbnRSZWNvcmQoZ2xvYmFsRUMubGV4aWNhbEVudmlyb25tZW50KSxcclxuICAgICAgICBuZXcgRW52aXJvbm1lbnRSZWNvcmQoZ2xvYmFsRUMubGV4aWNhbEVudmlyb25tZW50KVxyXG4gICAgICApO1xyXG5cclxuICAgIHRoaXMuZWNzLnB1c2goZWMpO1xyXG4gICAgbGV0IHJlc3VsdCA9IHRoaXMudmFsdWVPZihub2RlKTtcclxuICAgIHRoaXMuZWNzLnBvcCgpO1xyXG5cclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBsb2coKSB7XHJcbiAgICB0aGlzLmdsb2JhbE9iamVjdC5zZXQoXCJsb2dcIiwgbmV3IEpzT2JqZWN0KCkpO1xyXG4gICAgdGhpcy5nbG9iYWxPYmplY3QuZ2V0KFwibG9nXCIpLmNhbGwgPSAoYXJncykgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhhcmdzKTtcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBldmFsdWF0ZShub2RlKSB7XHJcbiAgICBpZiAodGhpc1tub2RlLnR5cGVdKSB7XHJcbiAgICAgIGxldCByID0gdGhpc1tub2RlLnR5cGVdKG5vZGUpO1xyXG4gICAgICAvLyBjb25zb2xlLmxvZyhyKVxyXG4gICAgICByZXR1cm4gcjtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIFByb2dyYW0obm9kZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgfVxyXG5cclxuICBTdGF0ZW1lbnRMaXN0KG5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnN0IHJlY29yZCA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgICAgIGlmIChyZWNvcmQudHlwZSA9PT0gXCJub3JtYWxcIikge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMV0pO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiByZWNvcmQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBTdGF0ZW1lbnQobm9kZSkge1xyXG4gICAgcmV0dXJuIHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgfVxyXG5cclxuICBJZlN0YXRlbWVudChub2RlKSB7XHJcbiAgICBsZXQgY29uZGl0aW9uID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzJdKTtcclxuICAgIGlmIChjb25kaXRpb24ucHJvcGVydHkgPT09IFwidW5kZWZpbmVkXCIgfHwgY29uZGl0aW9uLnByb3BlcnR5ID09PSBcIk5hTlwiKSB7XHJcbiAgICAgIHJldHVybiBuZXcgSnNVbmRlZmluZWQoKS50b0Jvb2xlYW4oKTtcclxuICAgIH1cclxuICAgIGlmIChjb25kaXRpb24gaW5zdGFuY2VvZiBSZWZlcmVuY2UpIHtcclxuICAgICAgY29uZGl0aW9uID0gY29uZGl0aW9uLmdldCgpO1xyXG4gICAgfVxyXG4gICAgaWYgKGNvbmRpdGlvbi50b0Jvb2xlYW4oKS52YWx1ZSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzRdKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIFdoaWxlU3RhdGVtZW50KG5vZGUpIHtcclxuICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgIGxldCBjb25kaXRpb24gPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMl0pO1xyXG4gICAgICBpZiAoY29uZGl0aW9uLnByb3BlcnR5ID09PSBcInVuZGVmaW5lZFwiIHx8IGNvbmRpdGlvbi5wcm9wZXJ0eSA9PT0gXCJOYU5cIikge1xyXG4gICAgICAgIHJldHVybiBuZXcgSnNVbmRlZmluZWQoKS50b0Jvb2xlYW4oKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoY29uZGl0aW9uIGluc3RhbmNlb2YgUmVmZXJlbmNlKSB7XHJcbiAgICAgICAgY29uZGl0aW9uID0gY29uZGl0aW9uLmdldCgpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChjb25kaXRpb24udG9Cb29sZWFuKCkudmFsdWUpIHtcclxuICAgICAgICBsZXQgcmVjb3JkID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzRdKTtcclxuICAgICAgICBpZiAocmVjb3JkLnR5cGUgPT09IFwiY29udGludWVcIikge1xyXG4gICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAvLyBUT0RPXHJcbiAgICAgICAgfSBlbHNlIGlmIChyZWNvcmQudHlwZSA9PT0gXCJicmVha1wiKSB7XHJcbiAgICAgICAgICByZXR1cm4gbmV3IENvbXBsZXRpb25SZWNvcmQoXCJub3JtYWxcIik7IC8vIGJyZWFrIOS7o+ihqOedgOW+queOr+aIquatouS6hiDlkKbliJnkuIDkuKogYnJlYWsg5Lya5oiq5YGc5aSa5bGC5b6q546v5LqGXHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29tcGxldGlvblJlY29yZChcIm5vcm1hbFwiKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQnJlYWtTdGF0ZW1lbnQobm9kZSkge1xyXG4gICAgcmV0dXJuIG5ldyBDb21wbGV0aW9uUmVjb3JkKFwiYnJlYWtcIik7XHJcbiAgfVxyXG5cclxuICBDb250aW51ZVN0YXRlbWVudChub2RlKSB7XHJcbiAgICByZXR1cm4gbmV3IENvbXBsZXRpb25SZWNvcmQoXCJjb250aW51ZVwiKTtcclxuICB9XHJcblxyXG4gIFZhcmlhYmxlRGVjbGFyYXRpb24obm9kZSkge1xyXG4gICAgLy8gbG9nKG5vZGUpIOiOt+WPluihqOi+vuW8j+WjsOaYjuS9k1xyXG4gICAgbGV0IHJ1bm5pbmdFQyA9IHRoaXMuZWNzW3RoaXMuZWNzLmxlbmd0aCAtIDFdOyAvLyDlj5bmoIjpobZcclxuICAgIHJ1bm5pbmdFQy5sZXhpY2FsRW52aXJvbm1lbnQuYWRkKG5vZGUuY2hpbGRyZW5bMV0ubmFtZSk7XHJcbiAgICByZXR1cm4gbmV3IENvbXBsZXRpb25SZWNvcmQoXCJub3JtYWxcIiwgbmV3IEpzVW5kZWZpbmVkKCkpO1xyXG4gIH1cclxuXHJcbiAgRXhwcmVzc2lvblN0YXRlbWVudChub2RlKSB7XHJcbiAgICBsZXQgcmVzdWx0ID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSZWZlcmVuY2UpIHtcclxuICAgICAgcmVzdWx0ID0gcmVzdWx0LmdldCgpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBDb21wbGV0aW9uUmVjb3JkKFwibm9ybWFsXCIsIHJlc3VsdCk7XHJcbiAgfVxyXG5cclxuICBFeHByZXNzaW9uKG5vZGUpIHtcclxuICAgIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gIH1cclxuXHJcbiAgQWRkaXRpdmVFeHByZXNzaW9uKG5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgICBlbHNlIHtcclxuICAgICAgbGV0IGxlZnQgPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pLFxyXG4gICAgICAgIHJpZ2h0ID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzJdKTtcclxuICAgICAgaWYgKGxlZnQgaW5zdGFuY2VvZiBSZWZlcmVuY2UpIGxlZnQgPSBsZWZ0LmdldCgpO1xyXG4gICAgICBpZiAocmlnaHQgaW5zdGFuY2VvZiBSZWZlcmVuY2UpIHJpZ2h0ID0gcmlnaHQuZ2V0KCk7XHJcblxyXG4gICAgICBpZiAobm9kZS5jaGlsZHJlblsxXS50eXBlID09PSBcIitcIikge1xyXG4gICAgICAgIHJldHVybiBuZXcgSnNOdW1iZXIobGVmdC52YWx1ZSArIHJpZ2h0LnZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgICBpZiAobm9kZS5jaGlsZHJlblsxXS50eXBlID09PSBcIi1cIikge1xyXG4gICAgICAgIHJldHVybiBuZXcgSnNOdW1iZXIobGVmdC52YWx1ZSAtIHJpZ2h0LnZhbHVlKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgTXVsdGlwbGljYXRpdmVFeHByZXNzaW9uKG5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkgcmV0dXJuIHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgICBlbHNlIHtcclxuICAgICAgbGV0IGxlZnQgPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pLFxyXG4gICAgICAgIHJpZ2h0ID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzJdKTtcclxuICAgICAgaWYgKGxlZnQgaW5zdGFuY2VvZiBSZWZlcmVuY2UpIGxlZnQgPSBsZWZ0LmdldCgpO1xyXG4gICAgICBpZiAocmlnaHQgaW5zdGFuY2VvZiBSZWZlcmVuY2UpIHJpZ2h0ID0gbGVmdC5nZXQoKTtcclxuXHJcbiAgICAgIGlmIChub2RlLmNoaWxkcmVuWzFdLnR5cGUgPT09IFwiKlwiKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBKc051bWJlcihsZWZ0LnZhbHVlICogcmlnaHQudmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChub2RlLmNoaWxkcmVuWzFdLnR5cGUgPT09IFwiL1wiKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBKc051bWJlcihsZWZ0LnZhbHVlIC8gcmlnaHQudmFsdWUpO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBQcmltYXJ5RXhwcmVzc2lvbihub2RlKSB7XHJcbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gIH1cclxuXHJcbiAgTGl0ZXJhbChub2RlKSB7XHJcbiAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICB9XHJcblxyXG4gIE51bWVyaWNMaXRlcmFsKG5vZGUpIHtcclxuICAgIGxldCBzdHIgPSBub2RlLnZhbHVlLFxyXG4gICAgICBsZW4gPSBzdHIubGVuZ3RoLFxyXG4gICAgICB2YWx1ZSA9IDAsIC8vIOi/m+WItlxyXG4gICAgICBuID0gMTA7XHJcblxyXG4gICAgaWYgKHN0ci5tYXRjaCgvXjBiLykpIHtcclxuICAgICAgbiA9IDI7XHJcbiAgICAgIGxlbiAtPSAyO1xyXG4gICAgfSBlbHNlIGlmIChzdHIubWF0Y2goL14wby8pKSB7XHJcbiAgICAgIG4gPSA4O1xyXG4gICAgICBsZW4gLT0gMjtcclxuICAgIH0gZWxzZSBpZiAoc3RyLm1hdGNoKC9eMHgvKSkge1xyXG4gICAgICBuID0gMTY7XHJcbiAgICAgIGxlbiAtPSAyO1xyXG4gICAgfVxyXG5cclxuICAgIHdoaWxlIChsZW4tLSkge1xyXG4gICAgICAvLyDlpITnkIYgMTYg6L+b5Yi2XHJcbiAgICAgIGxldCBjaGFyID0gc3RyLmNoYXJDb2RlQXQoc3RyLmxlbmd0aCAtIGxlbiAtIDEpO1xyXG4gICAgICBpZiAoY2hhciA+PSBcImFcIi5jaGFyQ29kZUF0KDApICYmIGNoYXIgPD0gXCJmXCIuY2hhckNvZGVBdCgwKSkge1xyXG4gICAgICAgIGNoYXIgPSBjaGFyIC0gXCJhXCIuY2hhckNvZGVBdCgwKSArIDEwO1xyXG4gICAgICB9IGVsc2UgaWYgKGNoYXIgPj0gXCJBXCIuY2hhckNvZGVBdCgwKSAmJiBjaGFyIDw9IFwiRlwiLmNoYXJDb2RlQXQoMCkpIHtcclxuICAgICAgICBjaGFyID0gY2hhciAtIFwiQVwiLmNoYXJDb2RlQXQoMCkgKyAxMDtcclxuICAgICAgfSBlbHNlIGlmIChjaGFyID49IFwiMFwiLmNoYXJDb2RlQXQoMCkgJiYgY2hhciA8PSBcIjlcIi5jaGFyQ29kZUF0KDApKSB7XHJcbiAgICAgICAgY2hhciAtPSBcIjBcIi5jaGFyQ29kZUF0KDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIkludmFsaWQgb3IgdW5leHBlY3RlZCB0b2tlblwiKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8g5bCG5pWw5a2X5a2X56ym6L2s5o2i5Li65YW25a+55bqU55qE5pWw5a2X5YC8XHJcbiAgICAgIHZhbHVlID0gdmFsdWUgKiBuICsgY2hhcjtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gbmV3IEpzTnVtYmVyKG5vZGUudmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgU3RyaW5nTGl0ZXJhbChub2RlKSB7XHJcbiAgICBjb25zdCByZXN1bHQgPSBbXTtcclxuICAgIGNvbnNvbGUubG9nKG5vZGUudmFsdWUpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAxLCBsZW4gPSBub2RlLnZhbHVlLmxlbmd0aCAtIDE7IGkgPCBsZW47IGkrKykge1xyXG4gICAgICBzd2l0Y2ggKG5vZGUudmFsdWVbaV0pIHtcclxuICAgICAgICBjYXNlIFwiXFxcXFwiOlxyXG4gICAgICAgICAgKytpO1xyXG4gICAgICAgICAgY29uc3QgY2hhciA9IG5vZGUudmFsdWVbaV0sXHJcbiAgICAgICAgICAgIGVzY2FwZUNoYXJNYXAgPSB7XHJcbiAgICAgICAgICAgICAgLy8g6buY6K6k5aSE55CGIEJNUCDnmoTlrZfnrKbpm4bvvIgwMDAwIC0gZmZmZiA6IOS4gOS4qiB1dGYtMTYg55qE6LWE5rqQ77yJXHJcbiAgICAgICAgICAgICAgbjogU3RyaW5nLmZyb21DaGFyQ29kZSgweDAwMGEpLFxyXG4gICAgICAgICAgICAgIHI6IFN0cmluZy5mcm9tQ2hhckNvZGUoMHgwMDBkKSxcclxuICAgICAgICAgICAgICB0OiBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MDAwOSksXHJcbiAgICAgICAgICAgICAgYjogU3RyaW5nLmZyb21DaGFyQ29kZSgweDAwMDgpLFxyXG4gICAgICAgICAgICAgIGY6IFN0cmluZy5mcm9tQ2hhckNvZGUoMHgwMDBjKSxcclxuICAgICAgICAgICAgICB2OiBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MDAwYiksXHJcbiAgICAgICAgICAgICAgMDogU3RyaW5nLmZyb21DaGFyQ29kZSgweDAwMDApLFxyXG4gICAgICAgICAgICAgIFwiXFxcXFwiOiBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MDA1YyksXHJcbiAgICAgICAgICAgICAgXCInXCI6IFN0cmluZy5mcm9tQ2hhckNvZGUoMHgwMDI3KSxcclxuICAgICAgICAgICAgICAnXCInOiBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MDAyMiksXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICBpZiAoY2hhciBpbiBlc2NhcGVDaGFyTWFwKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGVzY2FwZUNoYXJNYXBbY2hhcl0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmVzdWx0LnB1c2goY2hhcik7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgcmVzdWx0LnB1c2gobm9kZS52YWx1ZVtpXSk7XHJcbiAgICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgIHJldHVybiBuZXcgSnNTdHJpbmcocmVzdWx0KTtcclxuICB9XHJcblxyXG4gIE9iamVjdExpdGVyYWwobm9kZSkge1xyXG4gICAgY29uc3QgbGVuID0gbm9kZS5jaGlsZHJlbi5sZW5ndGg7XHJcbiAgICBpZiAobGVuID09PSAyKSB7XHJcbiAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuICAgIGlmIChsZW4gPT09IDMpIHtcclxuICAgICAgY29uc3Qgb2JqZWN0ID0gbmV3IEpzT2JqZWN0KCk7IC8vIEpzIOeahOWvueixoeacrOi0qOWwseaYr+S4pOS4quS4nOilv++8mnByb3RvdHlwZSBwcm9wZXJ0eVxyXG4gICAgICB0aGlzLlByb3BlcnR5TGlzdChub2RlLmNoaWxkcmVuWzFdLCBvYmplY3QpO1xyXG4gICAgICAvLyBvYmplY3QucHJvdG90eXBlID1cclxuICAgICAgcmV0dXJuIG9iamVjdDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIFByb3BlcnR5TGlzdChub2RlLCBvYmplY3QpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICB0aGlzLlByb3BlcnR5KG5vZGUuY2hpbGRyZW5bMF0sIG9iamVjdCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLlByb3BlcnR5TGlzdChub2RlLmNoaWxkcmVuWzBdLCBvYmplY3QpO1xyXG4gICAgICB0aGlzLlByb3BlcnR5KG5vZGUuY2hpbGRyZW5bMl0sIG9iamVjdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBQcm9wZXJ0eShub2RlLCBvYmplY3QpIHtcclxuICAgIGxldCBuYW1lO1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW5bMF0udHlwZSA9PT0gXCJJZGVudGlmaWVyXCIpIHtcclxuICAgICAgbmFtZSA9IG5vZGUuY2hpbGRyZW5bMF0ubmFtZTtcclxuICAgIH0gZWxzZSBpZiAobm9kZS5jaGlsZHJlblswXS50eXBlID09PSBcIlN0cmluZ0xpdGVyYWxcIikge1xyXG4gICAgICBuYW1lID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICAgIH1cclxuICAgIG9iamVjdC5zZXRQcm9wZXJ0eShuYW1lLCB7XHJcbiAgICAgIHZhbHVlOiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMl0pLFxyXG4gICAgICB3cml0ZWFibGU6IHRydWUsXHJcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgQXNzaWdubWVudEV4cHJlc3Npb24obm9kZSkge1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gICAgfVxyXG4gICAgLy8g5YWI5omn6KGM5bem6L6555qE6KGo6L6+5byP77yM54S25ZCO5omn6KGM5Y+z6L6555qE6KGo6L6+5byP77yM5pyA5ZCO5bCG5Y+z6L6555qE5YC86LWL5YC857uZ5bem6L6555qE5Y+Y6YePXHJcbiAgICBsZXQgbGVmdCA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgICBsZXQgcmlnaHQgPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMl0pO1xyXG4gICAgbGVmdC5zZXQocmlnaHQpO1xyXG4gIH1cclxuXHJcbiAgTG9naWNhbE9SRXhwcmVzc2lvbihub2RlKSB7XHJcbiAgICBpZiAobm9kZS5jaGlsZHJlbi5sZW5ndGggPT09IDEpIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gICAgY29uc3QgcmVzID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICAgIGlmIChyZXMudmFsdWUpIHJldHVybiByZXMudmFsdWU7XHJcbiAgICBpZiAocmVzLnR5cGUgPT09IFwibnVsbFwiIHx8IHJlcy5wcm9wZXJ0eSA9PT0gXCJ1bmRlZmluZWRcIikge1xyXG4gICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzJdKTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMl0pO1xyXG4gIH1cclxuXHJcbiAgTG9naWNhbEFOREV4cHJlc3Npb24obm9kZSkge1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAxKSByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICAgIGNvbnN0IHJlcyA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSk7XHJcbiAgICBpZiAoIXJlcy52YWx1ZSkgcmV0dXJuIHJlcy52YWx1ZTtcclxuICAgIGlmIChyZXMudHlwZSA9PT0gXCJudWxsXCIpIHJldHVybiBudWxsO1xyXG4gICAgaWYgKHJlcy5wcm9wZXJ0eSA9PT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMl0pO1xyXG4gIH1cclxuXHJcbiAgTGVmdEhhbmRTaWRlRXhwcmVzc2lvbihub2RlKSB7XHJcbiAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICB9XHJcblxyXG4gIE5ld0V4cHJlc3Npb24obm9kZSkge1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gICAgfVxyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgIGxldCBfY2xhc3MgPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMV0pO1xyXG4gICAgICByZXR1cm4gX2NsYXNzLmNvbnN0cnVjdG9yKCk7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgICogbGV0IG9iamVjdCA9IHRoaXMucmVhbG0uT2JqZWN0LmNvbnN0cnVjdG9yKCksXHJcbiAgICAgKiAgIF9jbGFzcyA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblsxXSksXHJcbiAgICAgKiAgIHJlc3VsdCA9IF9jbGFzcy5jYWxsKG9iamVjdCk7XHJcbiAgICAgKiBpZih0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiKXtcclxuICAgICAqICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAqIH1cclxuICAgICAqIHJldHVybiBvYmplY3Q7XHJcbiAgICAgKi9cclxuICB9XHJcblxyXG4gIENhbGxFeHByZXNzaW9uKG5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICByZXR1cm4gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICAgIH1cclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICBsZXQgX2Z1bmN0aW9uID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKSxcclxuICAgICAgICBfYXJndW1lbnRzID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzFdKTtcclxuICAgICAgaWYgKF9mdW5jdGlvbiBpbnN0YW5jZW9mIFJlZmVyZW5jZSkge1xyXG4gICAgICAgIF9mdW5jdGlvbiA9IF9mdW5jdGlvbi5nZXQoKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gX2Z1bmN0aW9uLmNhbGwoX2FyZ3VtZW50cyk7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgICogbGV0IG9iamVjdCA9IHRoaXMucmVhbG0uT2JqZWN0LmNvbnN0cnVjdG9yKCksXHJcbiAgICAgKiAgIF9jbGFzcyA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblsxXSksXHJcbiAgICAgKiAgIHJlc3VsdCA9IF9jbGFzcy5jYWxsKG9iamVjdCk7XHJcbiAgICAgKiBpZih0eXBlb2YgcmVzdWx0ID09PSBcIm9iamVjdFwiKXtcclxuICAgICAqICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAqIH1cclxuICAgICAqIHJldHVybiBvYmplY3Q7XHJcbiAgICAgKi9cclxuICB9XHJcblxyXG4gIE1lbWJlckV4cHJlc3Npb24obm9kZSkge1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMF0pO1xyXG4gICAgfVxyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAzKSB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSkuZ2V0KCksXHJcbiAgICAgICAgcHJvcCA9IHJlc3VsdC5wcm9wZXJ0aWVzLmdldChub2RlLmNoaWxkcmVuWzJdLm5hbWUpO1xyXG4gICAgICBpZiAoXCJ2YWx1ZVwiIGluIHByb3ApIHJldHVybiBwcm9wLnZhbHVlO1xyXG4gICAgICBpZiAoXCJnZXRcIiBpbiBwcm9wKSByZXR1cm4gcHJvcC5nZXQuY2FsbChyZXN1bHQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgSWRlbnRpZmllcihub2RlKSB7XHJcbiAgICAvLyDlsIblj5jph4/lrZjlgqjliLAgRXhlY3V0aW9uQ29udGV4dFxyXG4gICAgbGV0IHJ1bm5pbmdFQyA9IHRoaXMuZWNzW3RoaXMuZWNzLmxlbmd0aCAtIDFdOyAvLyDlj5bmoIjpobZcclxuICAgIHJldHVybiBuZXcgUmVmZXJlbmNlKHJ1bm5pbmdFQy5sZXhpY2FsRW52aXJvbm1lbnQsIG5vZGUubmFtZSk7XHJcbiAgfVxyXG5cclxuICBBcmd1bWVudHMobm9kZSkge1xyXG4gICAgaWYgKG5vZGUuY2hpbGRyZW4ubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgIHJldHVybiBbXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMV0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgQXJndW1lbnRMaXN0KG5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICBsZXQgcmVzdWx0ID0gdGhpcy5ldmFsdWF0ZShub2RlLmNoaWxkcmVuWzBdKTtcclxuICAgICAgaWYgKHJlc3VsdCBpbnN0YW5jZW9mIFJlZmVyZW5jZSkge1xyXG4gICAgICAgIHJldHVybiByZXN1bHQuZ2V0KCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIFtyZXN1bHRdO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbGV0IHJlc3VsdCA9IHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblsyXSk7XHJcbiAgICAgIGlmIChyZXN1bHQgaW5zdGFuY2VvZiBSZWZlcmVuY2UpIHtcclxuICAgICAgICByZXN1bHQgPSByZXN1bHQuZ2V0KCk7XHJcbiAgICAgIH1cclxuICAgICAgcmV0dXJuIHRoaXMuZXZhbHVhdGUobm9kZS5jaGlsZHJlblswXSkuY29uY2F0KHJlc3VsdCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBCb29sZWFuTGl0ZXJhbChub2RlKSB7XHJcbiAgICBpZiAobm9kZS52YWx1ZSA9PT0gXCJ0cnVlXCIpIHtcclxuICAgICAgcmV0dXJuIG5ldyBKc0Jvb2xlYW4odHJ1ZSk7XHJcbiAgICB9IGVsc2UgaWYgKG5vZGUudmFsdWUgPT09IFwiZmFsc2VcIikge1xyXG4gICAgICByZXR1cm4gbmV3IEpzQm9vbGVhbihmYWxzZSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBOdWxsTGl0ZXJhbChub2RlKSB7XHJcbiAgICBpZiAodHlwZW9mIG5vZGUudmFsdWUgPT09IFwib2JqZWN0XCIpIHtcclxuICAgICAgcmV0dXJuIG5ldyBKc051bGwoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIEJsb2NrU3RhdGVtZW50KG5vZGUpIHtcclxuICAgIGlmIChub2RlLmNoaWxkcmVuLmxlbmd0aCA9PT0gMikgcmV0dXJuO1xyXG5cclxuICAgIGxldCBydW5uaW5nRUMgPSB0aGlzLmVjc1t0aGlzLmVjcy5sZW5ndGggLSAxXSxcclxuICAgICAgZWMgPSBuZXcgRXhlY3V0aW9uQ29udGV4dChcclxuICAgICAgICBydW5uaW5nRUMucmVhbG0sXHJcbiAgICAgICAgbmV3IEVudmlyb25tZW50UmVjb3JkKHJ1bm5pbmdFQy5sZXhpY2FsRW52aXJvbm1lbnQpLFxyXG4gICAgICAgIHJ1bm5pbmdFQy52YXJpYWJsZUVudmlyb25tZW50XHJcbiAgICAgICk7XHJcbiAgICB0aGlzLmVjcy5wdXNoKGVjKTtcclxuICAgIGxldCByZXN1bHQgPSB0aGlzLmV2YWx1YXRlKG5vZGUuY2hpbGRyZW5bMV0pO1xyXG4gICAgdGhpcy5lY3MucG9wKCk7XHJcblxyXG4gICAgcmV0dXJuIHJlc3VsdDtcclxuICB9XHJcblxyXG4gIEZ1bmN0aW9uRGVjbGFyYXRpb24obm9kZSkge1xyXG4gICAgbGV0IG5hbWUgPSBub2RlLmNoaWxkcmVuWzFdLm5hbWUsXHJcbiAgICAgIGNvZGUgPSBub2RlLmNoaWxkcmVuW25vZGUuY2hpbGRyZW4ubGVuZ3RoIC0gMl0sXHJcbiAgICAgIGZ1bmMgPSBuZXcgSnNPYmplY3QoKTtcclxuXHJcbiAgICBmdW5jLmNhbGwgPSAoYXJncykgPT4ge1xyXG4gICAgICBsZXQgZWMgPSBuZXcgRXhlY3V0aW9uQ29udGV4dChcclxuICAgICAgICB0aGlzLnJlYWxtLFxyXG4gICAgICAgIG5ldyBFbnZpcm9ubWVudFJlY29yZChmdW5jLmVudmlyb25tZW50KSxcclxuICAgICAgICBuZXcgRW52aXJvbm1lbnRSZWNvcmQoZnVuYy5lbnZpcm9ubWVudClcclxuICAgICAgKTtcclxuICAgICAgdGhpcy5lY3MucHVzaChlYyk7XHJcbiAgICAgIHRoaXMuZXZhbHVhdGUoY29kZSk7XHJcbiAgICAgIHRoaXMuZWNzLnBvcCgpO1xyXG4gICAgfTtcclxuXHJcbiAgICBsZXQgcnVubmluZ0VDID0gdGhpcy5lY3NbdGhpcy5lY3MubGVuZ3RoIC0gMV07XHJcbiAgICBydW5uaW5nRUMubGV4aWNhbEVudmlyb25tZW50LmFkZChuYW1lKTtcclxuICAgIHJ1bm5pbmdFQy5sZXhpY2FsRW52aXJvbm1lbnQuc2V0KG5hbWUsIGZ1bmMpO1xyXG4gICAgZnVuYy5lbnZpcm9ubWVudCA9IHJ1bm5pbmdFQy5sZXhpY2FsRW52aXJvbm1lbnQ7XHJcbiAgICByZXR1cm4gbmV3IENvbXBsZXRpb25SZWNvcmQoXCJub3JtYWxcIik7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/evaluator.js\n");

/***/ }),

/***/ "./src/run.js":
/*!********************!*\
  !*** ./src/run.js ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _SynctaxParser_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./SynctaxParser.js */ \"./src/SynctaxParser.js\");\n/* harmony import */ var _evaluator_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./evaluator.js */ \"./src/evaluator.js\");\n\r\n\r\n\r\ndocument.getElementById('btn').addEventListener('click', (event) => {\r\n  const r = new _evaluator_js__WEBPACK_IMPORTED_MODULE_1__.Evaluator().evaluate((0,_SynctaxParser_js__WEBPACK_IMPORTED_MODULE_0__.parse)(document.getElementById(\"sourceInp\").value))\r\n  console.log(r)\r\n})\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcnVuLmpzIiwibWFwcGluZ3MiOiI7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG95c2NyaXB0Ly4vc3JjL3J1bi5qcz9jOTkwIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7cGFyc2V9IGZyb20gJy4vU3luY3RheFBhcnNlci5qcydcclxuaW1wb3J0IHtFdmFsdWF0b3J9IGZyb20gJy4vZXZhbHVhdG9yLmpzJ1xyXG5cclxuZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgY29uc3QgciA9IG5ldyBFdmFsdWF0b3IoKS5ldmFsdWF0ZShwYXJzZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNvdXJjZUlucFwiKS52YWx1ZSkpXHJcbiAgY29uc29sZS5sb2cocilcclxufSlcclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/run.js\n");

/***/ }),

/***/ "./src/runtime.js":
/*!************************!*\
  !*** ./src/runtime.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   CompletionRecord: () => (/* binding */ CompletionRecord),\n/* harmony export */   EnvironmentRecord: () => (/* binding */ EnvironmentRecord),\n/* harmony export */   ExecutionContext: () => (/* binding */ ExecutionContext),\n/* harmony export */   JsBoolean: () => (/* binding */ JsBoolean),\n/* harmony export */   JsNull: () => (/* binding */ JsNull),\n/* harmony export */   JsNumber: () => (/* binding */ JsNumber),\n/* harmony export */   JsObject: () => (/* binding */ JsObject),\n/* harmony export */   JsString: () => (/* binding */ JsString),\n/* harmony export */   JsSymbol: () => (/* binding */ JsSymbol),\n/* harmony export */   JsUndefined: () => (/* binding */ JsUndefined),\n/* harmony export */   JsValue: () => (/* binding */ JsValue),\n/* harmony export */   ObjectEnvironmentRecord: () => (/* binding */ ObjectEnvironmentRecord),\n/* harmony export */   Realm: () => (/* binding */ Realm),\n/* harmony export */   Reference: () => (/* binding */ Reference)\n/* harmony export */ });\n// Js 将变量存储在 ExecutionContext 的上下文中\r\nclass ExecutionContext {\r\n  constructor(realm, lexicalEnvironment, variableEnvironment) {\r\n    variableEnvironment = variableEnvironment || lexicalEnvironment\r\n    this.lexicalEnvironment = lexicalEnvironment\r\n    this.variableEnvironment = variableEnvironment;\r\n    this.realm = realm; // 存储 Global Object Object.prototype\r\n  }\r\n}\r\n\r\nclass EnvironmentRecord {\r\n  constructor(outer) {\r\n    this.outer = outer; // 外层作用域\r\n    this.variables = new Map()\r\n  }\r\n\r\n  add(name) {\r\n    this.variables.set(name, new JsUndefined())\r\n  }\r\n\r\n  get(name) {\r\n    if (this.variables.get(name)) {\r\n      return this.variables.get(name)\r\n    } else if (this.outer) {\r\n      return this.outer.get(name)\r\n    } else {\r\n      return new JsUndefined()\r\n    }\r\n  }\r\n\r\n  set(name, value = new JsUndefined()) {\r\n    if (this.variables.get(name)) {\r\n      return this.variables.set(name, value)\r\n    } else if (this.outer) {\r\n      return this.outer.set(name, value)\r\n    } else {\r\n      return this.variables.set(name, value)\r\n    }\r\n  }\r\n}\r\n\r\nclass ObjectEnvironmentRecord {\r\n  constructor(object, outer) {\r\n    this.object = object;\r\n    this.outer = outer;\r\n  }\r\n\r\n  add(name) {\r\n    this.object.set(name, new JsUndefined())\r\n  }\r\n\r\n  get(name) {\r\n    return this.object.get(name)\r\n    // TODO with statement need outer\r\n  }\r\n\r\n  set(name, value = new JsUndefined()) {\r\n    this.object.set(name, value)\r\n    // TODO with statement need outer\r\n  }\r\n}\r\n\r\n// Js 运行时机制：所有的对象属性的访问都涉及到 reference（运行时类型）\r\n// 将变量名 上下文 值 通过一个对象进行存储\r\nclass Reference {\r\n  constructor(object, property) {\r\n    this.object = object;\r\n    this.property = property\r\n  }\r\n\r\n  set(value) {\r\n    this.object.set(this.property, value)\r\n  }\r\n\r\n  get() {\r\n    return this.object.get(this.property)\r\n  }\r\n}\r\n\r\nclass Realm {\r\n  constructor() {\r\n    this.global = new Map()\r\n    this.Object = new Map()\r\n    this.Object_prototype = new Map()\r\n    this.Object.call = function () {\r\n    }\r\n  }\r\n}\r\n\r\n// 为什么需要做类型转换？\r\n// 因为我们在做条件逻辑的时候依赖了底层的 if，这会导致一个问题就是：\r\n//  上下文可能是不一致的\r\nclass JsValue {\r\n  get type() {\r\n    if (this.constructor === JsNumber) {\r\n      return 'number';\r\n    }\r\n    if (this.constructor === JsString) {\r\n      return 'string';\r\n    }\r\n    if (this.constructor === JsBoolean) {\r\n      return 'boolean';\r\n    }\r\n    if (this.constructor === JsObject) {\r\n      return 'object';\r\n    }\r\n    if (this.constructor === JsNull) {\r\n      // if retrun \"object\" 那么行为就和 Javascript null 行为一样了\r\n      return 'null';\r\n    }\r\n    if (this.constructor === JsSymbol) {\r\n      return 'symbol';\r\n    }\r\n    return 'undefined'; // 默认 undefined 状态\r\n  }\r\n}\r\n\r\nclass JsNumber extends JsValue {\r\n  constructor(value) {\r\n    super();\r\n    this.memory = new ArrayBuffer(8)\r\n    if (arguments.length)\r\n      new Float64Array(this.memory)[0] = value;\r\n    else\r\n      new Float64Array(this.memory)[0] = 0;\r\n  }\r\n\r\n  get value() {\r\n    return new Float64Array(this.memory)[0];\r\n  }\r\n\r\n  toString() {\r\n    // TODO 10 进制: number to string\r\n  }\r\n\r\n  toNumber() {\r\n    return this;\r\n  }\r\n\r\n  toBoolean() {\r\n    if (new Float64Array(this.memory)[0] === 0) {\r\n      return new JsBoolean(false)\r\n    } else {\r\n      return new JsBoolean(true)\r\n    }\r\n  }\r\n\r\n  // toObject(){}\r\n}\r\n\r\nclass JsString extends JsValue {\r\n  constructor(characters) { // js 中的字符串 length 属性在创建时定义 不可以被修改\r\n    super();\r\n    // this.memory = new ArrayBuffer(characters.length * 2); // utf16\r\n    // 正确的应该是按照 utf-16 的方式进行存储\r\n    this.characters = characters;\r\n  }\r\n\r\n  toString() {\r\n    return this.characters;\r\n  }\r\n\r\n  toNumber() {\r\n    // TODO string to number\r\n  }\r\n\r\n  toBoolean() {\r\n    if (new Float64Array(this.memory)[0] === 0) {\r\n      return new JsBoolean(false)\r\n    } else {\r\n      return new JsBoolean(true)\r\n    }\r\n  }\r\n}\r\n\r\nclass JsBoolean extends JsValue {\r\n  constructor(value) {\r\n    super();\r\n    this.value = value || false;\r\n  }\r\n\r\n  toString() {\r\n    if (this.value) {\r\n      return new JsString(['t', 'r', 'u', 'e']);\r\n    }\r\n    return new JsString(['f', 'a', 'l', 's', 'e']);\r\n  }\r\n\r\n  toNumber() {\r\n    if (this.value) {\r\n      return new JsNumber(1);\r\n    }\r\n    return new JsNumber(0);\r\n  }\r\n\r\n  toBoolean() {\r\n    return this;\r\n  }\r\n}\r\n\r\nclass JsObject extends JsValue {\r\n  constructor(proto) {\r\n    super();\r\n    this.properties = new Map();\r\n    this.prototype = proto || null;\r\n  }\r\n\r\n  // Object 类型在处理时需要走原型链的逻辑\r\n  // 所以在 get 的时候，需要有原型链和 getter 执行的过程\r\n  get(name) {\r\n    // TODO prototype chain && getter\r\n    return this.getProperty(name).value\r\n  }\r\n\r\n  set(name, value) {\r\n    // TODO writeable etc.\r\n    this.setProperty(name, {\r\n      value: value,\r\n      enumerable: true,\r\n      configurable: true,\r\n      writeable: true\r\n    })\r\n  }\r\n\r\n  // 构建原型\r\n  setPrototype(proto) {\r\n    this.prototype = proto;\r\n  }\r\n\r\n  getPrototype() {\r\n    return this.prototype;\r\n  }\r\n\r\n  setProperty(name, attributes) {\r\n    this.properties.set(name, attributes);\r\n  }\r\n\r\n  getProperty(name) {\r\n    // TODO 原型链\r\n    return this.properties.get(name)\r\n  }\r\n}\r\n\r\nclass JsNull extends JsValue {\r\n  toNumber() {\r\n    return new JsNumber(0);\r\n  }\r\n\r\n  toString() {\r\n    return new JsString(['n', 'u', 'l', 'l']);\r\n  }\r\n\r\n  toBoolean() {\r\n    return new JsBoolean(false)\r\n  }\r\n}\r\n\r\nclass JsUndefined extends JsValue {\r\n  toNumber() {\r\n    return new JsNumber(NaN);\r\n  }\r\n\r\n  toString() {\r\n    return new JsString(['u', 'n', 'd', 'e', 'f', 'i', 'n', 'e', 'd']);\r\n  }\r\n\r\n  toBoolean() {\r\n    return new JsBoolean(false)\r\n  }\r\n}\r\n\r\nclass JsSymbol extends JsValue {\r\n  constructor(name) {\r\n    super();\r\n    this.name = name || '';\r\n  }\r\n}\r\n\r\nclass CompletionRecord {\r\n  constructor(type, value, target) {\r\n    this.type = type || 'normal';\r\n    this.value = value || new JsUndefined;\r\n    this.target = target || null;\r\n  }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvcnVudGltZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3RveXNjcmlwdC8uL3NyYy9ydW50aW1lLmpzP2FlZmUiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gSnMg5bCG5Y+Y6YeP5a2Y5YKo5ZyoIEV4ZWN1dGlvbkNvbnRleHQg55qE5LiK5LiL5paH5LitXHJcbmV4cG9ydCBjbGFzcyBFeGVjdXRpb25Db250ZXh0IHtcclxuICBjb25zdHJ1Y3RvcihyZWFsbSwgbGV4aWNhbEVudmlyb25tZW50LCB2YXJpYWJsZUVudmlyb25tZW50KSB7XHJcbiAgICB2YXJpYWJsZUVudmlyb25tZW50ID0gdmFyaWFibGVFbnZpcm9ubWVudCB8fCBsZXhpY2FsRW52aXJvbm1lbnRcclxuICAgIHRoaXMubGV4aWNhbEVudmlyb25tZW50ID0gbGV4aWNhbEVudmlyb25tZW50XHJcbiAgICB0aGlzLnZhcmlhYmxlRW52aXJvbm1lbnQgPSB2YXJpYWJsZUVudmlyb25tZW50O1xyXG4gICAgdGhpcy5yZWFsbSA9IHJlYWxtOyAvLyDlrZjlgqggR2xvYmFsIE9iamVjdCBPYmplY3QucHJvdG90eXBlXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRW52aXJvbm1lbnRSZWNvcmQge1xyXG4gIGNvbnN0cnVjdG9yKG91dGVyKSB7XHJcbiAgICB0aGlzLm91dGVyID0gb3V0ZXI7IC8vIOWkluWxguS9nOeUqOWfn1xyXG4gICAgdGhpcy52YXJpYWJsZXMgPSBuZXcgTWFwKClcclxuICB9XHJcblxyXG4gIGFkZChuYW1lKSB7XHJcbiAgICB0aGlzLnZhcmlhYmxlcy5zZXQobmFtZSwgbmV3IEpzVW5kZWZpbmVkKCkpXHJcbiAgfVxyXG5cclxuICBnZXQobmFtZSkge1xyXG4gICAgaWYgKHRoaXMudmFyaWFibGVzLmdldChuYW1lKSkge1xyXG4gICAgICByZXR1cm4gdGhpcy52YXJpYWJsZXMuZ2V0KG5hbWUpXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMub3V0ZXIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMub3V0ZXIuZ2V0KG5hbWUpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICByZXR1cm4gbmV3IEpzVW5kZWZpbmVkKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldChuYW1lLCB2YWx1ZSA9IG5ldyBKc1VuZGVmaW5lZCgpKSB7XHJcbiAgICBpZiAodGhpcy52YXJpYWJsZXMuZ2V0KG5hbWUpKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLnZhcmlhYmxlcy5zZXQobmFtZSwgdmFsdWUpXHJcbiAgICB9IGVsc2UgaWYgKHRoaXMub3V0ZXIpIHtcclxuICAgICAgcmV0dXJuIHRoaXMub3V0ZXIuc2V0KG5hbWUsIHZhbHVlKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIHRoaXMudmFyaWFibGVzLnNldChuYW1lLCB2YWx1ZSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBPYmplY3RFbnZpcm9ubWVudFJlY29yZCB7XHJcbiAgY29uc3RydWN0b3Iob2JqZWN0LCBvdXRlcikge1xyXG4gICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgICB0aGlzLm91dGVyID0gb3V0ZXI7XHJcbiAgfVxyXG5cclxuICBhZGQobmFtZSkge1xyXG4gICAgdGhpcy5vYmplY3Quc2V0KG5hbWUsIG5ldyBKc1VuZGVmaW5lZCgpKVxyXG4gIH1cclxuXHJcbiAgZ2V0KG5hbWUpIHtcclxuICAgIHJldHVybiB0aGlzLm9iamVjdC5nZXQobmFtZSlcclxuICAgIC8vIFRPRE8gd2l0aCBzdGF0ZW1lbnQgbmVlZCBvdXRlclxyXG4gIH1cclxuXHJcbiAgc2V0KG5hbWUsIHZhbHVlID0gbmV3IEpzVW5kZWZpbmVkKCkpIHtcclxuICAgIHRoaXMub2JqZWN0LnNldChuYW1lLCB2YWx1ZSlcclxuICAgIC8vIFRPRE8gd2l0aCBzdGF0ZW1lbnQgbmVlZCBvdXRlclxyXG4gIH1cclxufVxyXG5cclxuLy8gSnMg6L+Q6KGM5pe25py65Yi277ya5omA5pyJ55qE5a+56LGh5bGe5oCn55qE6K6/6Zeu6YO95raJ5Y+K5YiwIHJlZmVyZW5jZe+8iOi/kOihjOaXtuexu+Wei++8iVxyXG4vLyDlsIblj5jph4/lkI0g5LiK5LiL5paHIOWAvCDpgJrov4fkuIDkuKrlr7nosaHov5vooYzlrZjlgqhcclxuZXhwb3J0IGNsYXNzIFJlZmVyZW5jZSB7XHJcbiAgY29uc3RydWN0b3Iob2JqZWN0LCBwcm9wZXJ0eSkge1xyXG4gICAgdGhpcy5vYmplY3QgPSBvYmplY3Q7XHJcbiAgICB0aGlzLnByb3BlcnR5ID0gcHJvcGVydHlcclxuICB9XHJcblxyXG4gIHNldCh2YWx1ZSkge1xyXG4gICAgdGhpcy5vYmplY3Quc2V0KHRoaXMucHJvcGVydHksIHZhbHVlKVxyXG4gIH1cclxuXHJcbiAgZ2V0KCkge1xyXG4gICAgcmV0dXJuIHRoaXMub2JqZWN0LmdldCh0aGlzLnByb3BlcnR5KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIFJlYWxtIHtcclxuICBjb25zdHJ1Y3RvcigpIHtcclxuICAgIHRoaXMuZ2xvYmFsID0gbmV3IE1hcCgpXHJcbiAgICB0aGlzLk9iamVjdCA9IG5ldyBNYXAoKVxyXG4gICAgdGhpcy5PYmplY3RfcHJvdG90eXBlID0gbmV3IE1hcCgpXHJcbiAgICB0aGlzLk9iamVjdC5jYWxsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuLy8g5Li65LuA5LmI6ZyA6KaB5YGa57G75Z6L6L2s5o2i77yfXHJcbi8vIOWboOS4uuaIkeS7rOWcqOWBmuadoeS7tumAu+i+keeahOaXtuWAmeS+nei1luS6huW6leWxgueahCBpZu+8jOi/meS8muWvvOiHtOS4gOS4qumXrumimOWwseaYr++8mlxyXG4vLyAg5LiK5LiL5paH5Y+v6IO95piv5LiN5LiA6Ie055qEXHJcbmV4cG9ydCBjbGFzcyBKc1ZhbHVlIHtcclxuICBnZXQgdHlwZSgpIHtcclxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBKc051bWJlcikge1xyXG4gICAgICByZXR1cm4gJ251bWJlcic7XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5jb25zdHJ1Y3RvciA9PT0gSnNTdHJpbmcpIHtcclxuICAgICAgcmV0dXJuICdzdHJpbmcnO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IEpzQm9vbGVhbikge1xyXG4gICAgICByZXR1cm4gJ2Jvb2xlYW4nO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuY29uc3RydWN0b3IgPT09IEpzT2JqZWN0KSB7XHJcbiAgICAgIHJldHVybiAnb2JqZWN0JztcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBKc051bGwpIHtcclxuICAgICAgLy8gaWYgcmV0cnVuIFwib2JqZWN0XCIg6YKj5LmI6KGM5Li65bCx5ZKMIEphdmFzY3JpcHQgbnVsbCDooYzkuLrkuIDmoLfkuoZcclxuICAgICAgcmV0dXJuICdudWxsJztcclxuICAgIH1cclxuICAgIGlmICh0aGlzLmNvbnN0cnVjdG9yID09PSBKc1N5bWJvbCkge1xyXG4gICAgICByZXR1cm4gJ3N5bWJvbCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3VuZGVmaW5lZCc7IC8vIOm7mOiupCB1bmRlZmluZWQg54q25oCBXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgSnNOdW1iZXIgZXh0ZW5kcyBKc1ZhbHVlIHtcclxuICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMubWVtb3J5ID0gbmV3IEFycmF5QnVmZmVyKDgpXHJcbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aClcclxuICAgICAgbmV3IEZsb2F0NjRBcnJheSh0aGlzLm1lbW9yeSlbMF0gPSB2YWx1ZTtcclxuICAgIGVsc2VcclxuICAgICAgbmV3IEZsb2F0NjRBcnJheSh0aGlzLm1lbW9yeSlbMF0gPSAwO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHZhbHVlKCkge1xyXG4gICAgcmV0dXJuIG5ldyBGbG9hdDY0QXJyYXkodGhpcy5tZW1vcnkpWzBdO1xyXG4gIH1cclxuXHJcbiAgdG9TdHJpbmcoKSB7XHJcbiAgICAvLyBUT0RPIDEwIOi/m+WItjogbnVtYmVyIHRvIHN0cmluZ1xyXG4gIH1cclxuXHJcbiAgdG9OdW1iZXIoKSB7XHJcbiAgICByZXR1cm4gdGhpcztcclxuICB9XHJcblxyXG4gIHRvQm9vbGVhbigpIHtcclxuICAgIGlmIChuZXcgRmxvYXQ2NEFycmF5KHRoaXMubWVtb3J5KVswXSA9PT0gMCkge1xyXG4gICAgICByZXR1cm4gbmV3IEpzQm9vbGVhbihmYWxzZSlcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiBuZXcgSnNCb29sZWFuKHRydWUpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvLyB0b09iamVjdCgpe31cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEpzU3RyaW5nIGV4dGVuZHMgSnNWYWx1ZSB7XHJcbiAgY29uc3RydWN0b3IoY2hhcmFjdGVycykgeyAvLyBqcyDkuK3nmoTlrZfnrKbkuLIgbGVuZ3RoIOWxnuaAp+WcqOWIm+W7uuaXtuWumuS5iSDkuI3lj6/ku6Xooqvkv67mlLlcclxuICAgIHN1cGVyKCk7XHJcbiAgICAvLyB0aGlzLm1lbW9yeSA9IG5ldyBBcnJheUJ1ZmZlcihjaGFyYWN0ZXJzLmxlbmd0aCAqIDIpOyAvLyB1dGYxNlxyXG4gICAgLy8g5q2j56Gu55qE5bqU6K+l5piv5oyJ54WnIHV0Zi0xNiDnmoTmlrnlvI/ov5vooYzlrZjlgqhcclxuICAgIHRoaXMuY2hhcmFjdGVycyA9IGNoYXJhY3RlcnM7XHJcbiAgfVxyXG5cclxuICB0b1N0cmluZygpIHtcclxuICAgIHJldHVybiB0aGlzLmNoYXJhY3RlcnM7XHJcbiAgfVxyXG5cclxuICB0b051bWJlcigpIHtcclxuICAgIC8vIFRPRE8gc3RyaW5nIHRvIG51bWJlclxyXG4gIH1cclxuXHJcbiAgdG9Cb29sZWFuKCkge1xyXG4gICAgaWYgKG5ldyBGbG9hdDY0QXJyYXkodGhpcy5tZW1vcnkpWzBdID09PSAwKSB7XHJcbiAgICAgIHJldHVybiBuZXcgSnNCb29sZWFuKGZhbHNlKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgcmV0dXJuIG5ldyBKc0Jvb2xlYW4odHJ1ZSlcclxuICAgIH1cclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBKc0Jvb2xlYW4gZXh0ZW5kcyBKc1ZhbHVlIHtcclxuICBjb25zdHJ1Y3Rvcih2YWx1ZSkge1xyXG4gICAgc3VwZXIoKTtcclxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZSB8fCBmYWxzZTtcclxuICB9XHJcblxyXG4gIHRvU3RyaW5nKCkge1xyXG4gICAgaWYgKHRoaXMudmFsdWUpIHtcclxuICAgICAgcmV0dXJuIG5ldyBKc1N0cmluZyhbJ3QnLCAncicsICd1JywgJ2UnXSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IEpzU3RyaW5nKFsnZicsICdhJywgJ2wnLCAncycsICdlJ10pO1xyXG4gIH1cclxuXHJcbiAgdG9OdW1iZXIoKSB7XHJcbiAgICBpZiAodGhpcy52YWx1ZSkge1xyXG4gICAgICByZXR1cm4gbmV3IEpzTnVtYmVyKDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5ldyBKc051bWJlcigwKTtcclxuICB9XHJcblxyXG4gIHRvQm9vbGVhbigpIHtcclxuICAgIHJldHVybiB0aGlzO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEpzT2JqZWN0IGV4dGVuZHMgSnNWYWx1ZSB7XHJcbiAgY29uc3RydWN0b3IocHJvdG8pIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLnByb3BlcnRpZXMgPSBuZXcgTWFwKCk7XHJcbiAgICB0aGlzLnByb3RvdHlwZSA9IHByb3RvIHx8IG51bGw7XHJcbiAgfVxyXG5cclxuICAvLyBPYmplY3Qg57G75Z6L5Zyo5aSE55CG5pe26ZyA6KaB6LWw5Y6f5Z6L6ZO+55qE6YC76L6RXHJcbiAgLy8g5omA5Lul5ZyoIGdldCDnmoTml7blgJnvvIzpnIDopoHmnInljp/lnovpk77lkowgZ2V0dGVyIOaJp+ihjOeahOi/h+eoi1xyXG4gIGdldChuYW1lKSB7XHJcbiAgICAvLyBUT0RPIHByb3RvdHlwZSBjaGFpbiAmJiBnZXR0ZXJcclxuICAgIHJldHVybiB0aGlzLmdldFByb3BlcnR5KG5hbWUpLnZhbHVlXHJcbiAgfVxyXG5cclxuICBzZXQobmFtZSwgdmFsdWUpIHtcclxuICAgIC8vIFRPRE8gd3JpdGVhYmxlIGV0Yy5cclxuICAgIHRoaXMuc2V0UHJvcGVydHkobmFtZSwge1xyXG4gICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgIGVudW1lcmFibGU6IHRydWUsXHJcbiAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcclxuICAgICAgd3JpdGVhYmxlOiB0cnVlXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8g5p6E5bu65Y6f5Z6LXHJcbiAgc2V0UHJvdG90eXBlKHByb3RvKSB7XHJcbiAgICB0aGlzLnByb3RvdHlwZSA9IHByb3RvO1xyXG4gIH1cclxuXHJcbiAgZ2V0UHJvdG90eXBlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMucHJvdG90eXBlO1xyXG4gIH1cclxuXHJcbiAgc2V0UHJvcGVydHkobmFtZSwgYXR0cmlidXRlcykge1xyXG4gICAgdGhpcy5wcm9wZXJ0aWVzLnNldChuYW1lLCBhdHRyaWJ1dGVzKTtcclxuICB9XHJcblxyXG4gIGdldFByb3BlcnR5KG5hbWUpIHtcclxuICAgIC8vIFRPRE8g5Y6f5Z6L6ZO+XHJcbiAgICByZXR1cm4gdGhpcy5wcm9wZXJ0aWVzLmdldChuYW1lKVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEpzTnVsbCBleHRlbmRzIEpzVmFsdWUge1xyXG4gIHRvTnVtYmVyKCkge1xyXG4gICAgcmV0dXJuIG5ldyBKc051bWJlcigwKTtcclxuICB9XHJcblxyXG4gIHRvU3RyaW5nKCkge1xyXG4gICAgcmV0dXJuIG5ldyBKc1N0cmluZyhbJ24nLCAndScsICdsJywgJ2wnXSk7XHJcbiAgfVxyXG5cclxuICB0b0Jvb2xlYW4oKSB7XHJcbiAgICByZXR1cm4gbmV3IEpzQm9vbGVhbihmYWxzZSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBKc1VuZGVmaW5lZCBleHRlbmRzIEpzVmFsdWUge1xyXG4gIHRvTnVtYmVyKCkge1xyXG4gICAgcmV0dXJuIG5ldyBKc051bWJlcihOYU4pO1xyXG4gIH1cclxuXHJcbiAgdG9TdHJpbmcoKSB7XHJcbiAgICByZXR1cm4gbmV3IEpzU3RyaW5nKFsndScsICduJywgJ2QnLCAnZScsICdmJywgJ2knLCAnbicsICdlJywgJ2QnXSk7XHJcbiAgfVxyXG5cclxuICB0b0Jvb2xlYW4oKSB7XHJcbiAgICByZXR1cm4gbmV3IEpzQm9vbGVhbihmYWxzZSlcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBKc1N5bWJvbCBleHRlbmRzIEpzVmFsdWUge1xyXG4gIGNvbnN0cnVjdG9yKG5hbWUpIHtcclxuICAgIHN1cGVyKCk7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lIHx8ICcnO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENvbXBsZXRpb25SZWNvcmQge1xyXG4gIGNvbnN0cnVjdG9yKHR5cGUsIHZhbHVlLCB0YXJnZXQpIHtcclxuICAgIHRoaXMudHlwZSA9IHR5cGUgfHwgJ25vcm1hbCc7XHJcbiAgICB0aGlzLnZhbHVlID0gdmFsdWUgfHwgbmV3IEpzVW5kZWZpbmVkO1xyXG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXQgfHwgbnVsbDtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/runtime.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval-source-map devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/run.js");
/******/ 	
/******/ })()
;